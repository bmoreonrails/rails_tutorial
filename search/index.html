<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    
      <base target="_blank"/>
    
    <title>B'more on Rails Workshop for Women</title>
    <link href="/rails_tutorial/css/syntax/monokai.css" type="text/css" rel="stylesheet"/>
    <link href="/rails_tutorial/css/base.css" type="text/css" rel="stylesheet"/>
    <link href="/rails_tutorial/assets/vendor/css/featherlight.min.css" type="text/css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="/rails_tutorial/js/jquery.min.js"></script>
    <script src="/rails_tutorial/assets/vendor/js/featherlight.min.js"></script>
    <script src="/rails_tutorial/js/tutorial_nav.js"></script>
    <script src="/rails_tutorial/js/progress.js"></script>
  </head>

<body>
  <div class="container" data-chapter="">
    <nav>
      
<div class="tutorial_nav">
  <div class="progress"><div class="progress_bar"></div></div>
  <ul id="menu-list">
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_01/" target="_self">
        1 Getting Started from Scratch
       </a>
     </li>
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_02/" target="_self">
        2 Creating the First Table in Your Database
       </a>
     </li>
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_03/" target="_self">
        3 Viewing Data in the Browser
       </a>
     </li>
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_04/" target="_self">
        4 Showing Detailed Information in the Browser
       </a>
     </li>
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_05/" target="_self">
        5 Creating Books Through the Browser
       </a>
     </li>
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_06/" target="_self">
        6 Updating Books
       </a>
     </li>
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_07/" target="_self">
        7 Styling Your Bookstore
       </a>
     </li>
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_08/" target="_self">
        8 Deleting a Book
       </a>
     </li>
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_09/" target="_self">
        9 Reviewing a Book
       </a>
     </li>
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_10/" target="_self">
        10 Showing Reviews
       </a>
     </li>
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_11/" target="_self">
        11 Adding Reviews from the Browser
       </a>
     </li>
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_12/" target="_self">
        12 Adding Users to Your Database
       </a>
     </li>
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_13/" target="_self">
        13 Logging In and Logging Out
       </a>
     </li>
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_14/" target="_self">
        14 Logged In vs Logged Out Users
       </a>
     </li>
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_15/" target="_self">
        15 Associating Reviews with Users
       </a>
     </li>
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_16/" target="_self">
        16 The End!
       </a>
     </li>
    
   </ul>

  <div class="menu-container">
    <div class="menu" data-toggle="#menu-list">
      <div class="hamburger-icon"> &#9776</div>
      <div class="menu-title">Chapter  -- Search</div>
      <div class="menu-title"><a href="/rails_tutorial/" target="_self">Home</a></div>
    </div>

    <div class="search">
      <form action="/rails_tutorial/search" method="get" target="_self">
        <i class="material-icons">search</i><input type="text" id="search-box" name="query">
      </form>
    </div>
  </div>

</div>

    </nav>
    <div class="content">
      <ul id="search-results"></ul>

<script>
  window.store = {
    
      "tutorial-chapter-01": {
        "title": "Getting Started from Scratch",
        "content": "Getting Started from ScratchThroughout the tutorial, you‚Äôre going to run a lot of commands on the command line. For example, we might ask you to do something like  Run pwd to print your current working directory.Where you run these commands will vary depending on the type of computer you‚Äôre using.      If you‚Äôre using a Mac, you‚Äôll type the command into Terminal.        If you‚Äôre on Windows, you‚Äôll type the command into Command Prompt.  After you‚Äôve typed the command, you‚Äôll press enter to execute it.To keep things simple, we‚Äôll refer to both Terminal and Command Prompt as Terminal in the tutorial.Windows users! If you followed our install instructions, you‚Äôll have to run C:\\RubyDevKit\\devkitvars.bat when you open the Command Prompt.      Get started by opening Terminal.        You‚Äôre now in your home directory. Let‚Äôs take a look what you have in there.    Run ls to list everything inside your home directory.    ls        You might see some familiar directories like Desktop, Documents, and Music.        All code deserves a good home. Add a new Projects directory to your home directory by running mkdir Projects.    mkdir Projects            Navigate into your new Projects directory by running cd Projects.    cd Projects        Now you‚Äôre ready to create a new Rails application!    $ ls  Desktop Document Music  $ mkdir Projects  $ cd ProjectsBefore you can continue with the tutorial, your computer needs to be configured with Rails. If you haven‚Äôt already, please refer to the install instructions to get everything set up and ready to go.      Run rails new bookstore to create a new Rails application named ‚Äúbookstore‚Äù.    rails new bookstore            After rails new finishes, run cd bookstore to navigate into the newly created bookstore application.    cd bookstore        $ rails new bookstore        create        create  README.md        create  Rakefile        create  config.ru        create  .gitignore        create  Gemfile        create  app        ...        run bundle install  Fetching gem metadata from http://rubygems.org/...........  Fetching version metadata from http://rubygems.org/...  Fetching dependency metadata from http://rubygems.org/..  Resolving dependencies..................  Installing rake 11.3.0  ...  $ cd bookstoreWoah! The rails new command does a lot of stuff!When you run rails new, it creates the files and directories that make up the basic structure of your new Rails application. Then, it runs bundle install to install the dependencies needed to run the application.Let‚Äôs take a look the files that got created when you ran rails new.      Run ls -l to list out all the top level files and directories in the bookstore directory.    ls -l        There‚Äôs a lot of stuff in there, but a few things stand out.        Any code that is specific to your bookstore application will live in the app directory. This is where you‚Äôll be doing most of your work for this tutorial.    Run ls -l app and take a look at some of things in there.    ls -l app        $ ls -l  total 48  -rw-r--r--   1 awesomesauce  staff  1728 Nov  6 14:31 Gemfile  -rw-r--r--   1 awesomesauce  staff  4329 Nov  6 14:33 Gemfile.lock  -rw-r--r--   1 awesomesauce  staff   374 Nov  6 14:13 README.md  -rw-r--r--   1 awesomesauce  staff   227 Nov  6 14:13 Rakefile  drwxr-xr-x  10 awesomesauce  staff   340 Nov  6 14:13 app  drwxr-xr-x   7 awesomesauce  staff   238 Nov  6 14:13 bin  drwxr-xr-x  14 awesomesauce  staff   476 Nov 12 18:56 config  -rw-r--r--   1 awesomesauce  staff   130 Nov  6 14:13 config.ru  drwxr-xr-x   4 awesomesauce  staff   136 Nov 12 18:54 db  drwxr-xr-x   4 awesomesauce  staff   136 Nov  6 14:13 lib  drwxr-xr-x   4 awesomesauce  staff   136 Nov  6 14:34 log  drwxr-xr-x   9 awesomesauce  staff   306 Nov  6 14:13 public  drwxr-xr-x   9 awesomesauce  staff   306 Nov  6 14:13 test  drwxr-xr-x   7 awesomesauce  staff   238 Nov  6 14:34 tmp  drwxr-xr-x   3 awesomesauce  staff   102 Nov  6 14:13 vendor  $ ls -l app  total 0  drwxr-xr-x  6 awesomesauce  staff  204 Nov  6 14:13 assets  drwxr-xr-x  3 awesomesauce  staff  102 Nov  6 14:13 channels  drwxr-xr-x  4 awesomesauce  staff  136 Nov  6 14:13 controllers  drwxr-xr-x  3 awesomesauce  staff  102 Nov  6 14:13 helpers  drwxr-xr-x  3 awesomesauce  staff  102 Nov  6 14:13 jobs  drwxr-xr-x  3 awesomesauce  staff  102 Nov  6 14:13 mailers  drwxr-xr-x  4 awesomesauce  staff  136 Nov  6 14:13 models  drwxr-xr-x  3 awesomesauce  staff  102 Nov  6 14:13 viewsIt‚Äôs easiest to view and edit the files of your application using a text editor created just for programming. If you don‚Äôt already have a favorite text editor we recommend Atom.The config directory is where you‚Äôll store configuration files for the bookstore application.rails new generated a bunch of configuration files to help you get this new application up and running quickly. Let‚Äôs take a look at one of those files.      Using your favorite text editor, open the whole bookstore directory.    If you‚Äôre using Atom, you can do this by going to File &gt; Open....        Now, open config/database.yml.    database.yml tells Rails how to connect to the bookstore application‚Äôs database.    By default, the bookstore application is setup to use SQLite. It‚Äôs a light weight database that‚Äôs perfect for this tutorial.    Since we‚Äôre happy with the default database.yml generated by rails new, we can live it as is.  12345678910111213141516171819202122232425  # SQLite version 3.x  #   gem install sqlite3  #  #   Ensure the SQLite 3 gem is defined in your Gemfile  #   gem 'sqlite3'  #  default: &amp;default    adapter: sqlite3    pool: 5    timeout: 5000  development:    &lt;&lt;: *default    database: db/development.sqlite3  # Warning: The database defined as \"test\" will be erased and  # re-generated from your development database when you run \"rake\".  # Do not set this db to the same as development or production.  test:    &lt;&lt;: *default    database: db/test.sqlite3  production:    &lt;&lt;: *default    database: db/production.sqlite3Not sure what a database is? Don‚Äôt worry, we‚Äôll fill you in. üòäThere are many different types of databases out there, but we‚Äôll only be working with a relational database.A relational database is made up of tables where you store data. You can think of them kinda like an Excel spreadsheet but much more powerful. There are many types of Relational Database Management Systems (RDMS‚Äôs for short) and SQLite is just one of them.Feel free to check out this video to learn a bit more about Relational Databases:While you‚Äôre working through the tutorial, don‚Äôt worry if what you‚Äôre seeing doesn‚Äôt look exactly like the examples in the tutorial. Everyone‚Äôs setup is going to be a little different, and small things can change between different versions of Rails.Let‚Äôs get the application running!      Go back to Terminal and make sure you‚Äôre in the bookstore directory by running pwd.    pwd        pwd shows you what directory you‚Äôre in. You should see something like /Users/awesomesauce/Projects/bookstore.        If you‚Äôre not in the bookstore directory, you‚Äôre probably in your home directory.    To get to the bookstore directory from your home directory, first run cd Projects to get to your Projects directory. Then, run cd bookstore.    cd Projectscd bookstore            Now run rails server to start your application‚Äôs web server.    If you take a close look at the command‚Äôs output, you‚Äôll see where you can access the running application:    =&gt; Rails 5.0.0.1 application starting in development onhttp://localhost:3000            Open you web browser and go to http://localhost:3000.    $ pwd  /Users/awesomesauce/Projects/bookstore  $ rails server  =&gt; Booting Puma  =&gt; Rails 5.0.0.1 application starting in development on http://localhost:3000  =&gt; Run `rails server -h` for more startup options  Puma starting in single mode...  * Version 3.6.0 (ruby 2.3.1-p112), codename: Sleepy Sunday Serenity  * Min threads: 5, max threads: 5  * Environment: development  * Listening on tcp://localhost:3000  Use Ctrl-C to stopYay! The bookstore application is running!      Go back to Terminal and take a look at what‚Äôs happening in your application‚Äôs web server. You can see the application responding to requests!        Now that you‚Äôre back in Terminal, run Ctrl-C to stop your application‚Äôs web server.    $ rails server  ...  Started GET \"/\" for ::1 at 2016-11-12 19:38:25 -0500  Processing by Rails::WelcomeController#index as HTML    Parameters: {\"internal\"=&gt;true}    Rendering /Users/awesomesauce/.rvm/gems/ruby-2.3.1/gems/railties-5.0.0.1/lib/rails/templates/rails/welcome/index.html.erb    Rendered /Users/awesomesauce/.rvm/gems/ruby-2.3.1/gems/railties-5.0.0.1/lib/rails/templates/rails/welcome/index.html.erb (6.6ms)  Completed 200 OK in 71ms (Views: 27.0ms | ActiveRecord: 0.0ms)  ...  ^CExitingWhat‚Äôs this bookstore we keep talking about?In this tutorial, you‚Äôre going to use Rails to build an application for a bookstore.As you build the application, you‚Äôll add features to create, view, edit, and delete books. Since we all have feelings on the books we love‚Ä¶and hate, you‚Äôll add features so books can be reviewed by users.By creating an application for a bookstore, you‚Äôll get to explore the different layers of the Rails framework.Are you ready?!",
        "url": "/rails_tutorial/tutorial/chapter_01/"
      }
      ,
    
      "tutorial-chapter-02": {
        "title": "Creating the First Table in Your Database",
        "content": "Creating the First Table in Your Database      Open Terminal.        If you still have Terminal open from the previous chapter, you should be in the bookstore directory.    Do you remember how to check what directory you‚Äôre in?    (pwd)        If you‚Äôre not already in the bookstore directory, run the following commands to get there:    cd Projectscd bookstore            Now run    rails generate model book        This generated a few new files, but there are only a couple we‚Äôre interesed in.        Run ls -l db/migrate to take a look at one of the new files. You should see a file named something like 20161115030350_create_books.rb.    20161115030350 is a timestamp generated when the file is created. Your file will start with a more recent timestamp‚Ä¶I hope üòù    Let‚Äôs take a look at this file in your text editor.    $ pwd  /Users/awesomesauce/Projects/bookstore  $ rails generate model book        invoke  active_record        create    db/migrate/20161115030350_create_books.rb        create    app/models/book.rb        invoke    test_unit        create      test/models/book_test.rb        create      test/fixtures/books.yml  $ ls -l db/migrate  total 8  -rw-r--r--  1 awesomesauce  staff  131 Nov 14 22:03 20161115030350_create_books.rb      Open db/migrate/YOUR_TIMESTAMP_create_books.rb in your text editor.    This is a migration file called CreateBooks. Migrations are used to make changes to your database.    On line 3 of the CreateBooks migration, there‚Äôs a block called create_table. Inside this block, you‚Äôll make changes to add columns to the new books table.  12345678  class CreateBooks &lt; ActiveRecord::Migration[5.0]    def change      create_table :books do |t|        t.timestamps      end    end  endYou might remember blocks from the Ruby in 100 Minutes tutorial.Like most blocks, the create_table block starts with the do keyword and ends with the end keyword.The books table will need a few columns.It will need a string column to store book titles and another string column to store book authors.The table will also need a column to store book prices. Since keeping track of money can be tricky, the column will need to be an integer column where book prices can be stored in cents. It sounds weird, but you‚Äôll have to trust me on this one.      Inside the create_table block, add the following lines:    t.string :titlet.string :authort.integer :price_cents            Save your changes to the CreateBooks migration and go back to Terminal.  12345678910  class CreateBooks &lt; ActiveRecord::Migration[5.0]    def change      create_table :books do |t|        t.string :title        t.string :author        t.integer :price_cents        t.timestamps      end    end  endWhat‚Äôs t.timestamps?You added a few things to the create_table block, but you might‚Äôve noticed that there was already some code in there:create_table :books do |t|  t.timestampsendWhat‚Äôs t.timestamps?It‚Äôs a convinence method added by Rails that will add two more columns to the books table: created_at and updated_at. They‚Äôll be used to store the times when books are created and updated.      In Terminal, make sure you‚Äôre in the bookstore directory.        Run rake db:migrate.        Yay! You‚Äôve just run your first migration!    $ pwd  /Users/awesomesauce/Projects/bookstore  $ rake db:migrate  == 20161115030350 CreateBooks: migrating ======================================  -- create_table(:books)     -&gt; 0.0030s  == 20161115030350 CreateBooks: migrated (0.0034s) =============================What just happened?This migration just added a table to your database!One of the advantages of using a framework like Rails is that you can build and modify a database without having to use raw SQL.The migration was just one of the files that was generated by rails generate model book. It also generated another file: app/models/book.rb. Let‚Äôs take a quick look at it.      Open app/models/book.rb in your text editor.    It might not look very exciting, but it‚Äôs actually pretty powerful. We now have a Book class. The Book class is used to represent individual rows in the books table.    Still not impressed? Let‚Äôs see what you can do with this class.  12  class Book &lt; ApplicationRecord  endYou might remember classes from the Ruby in 100 minutes tutorial.Classes are used to describe things. For example, the Book class in your bookstore is used to describe books.      Open Terminal and make sure you‚Äôre in the bookstore directory.        Run rails console. This will open‚Ä¶the rails console.    The rails console is available in all Rails applications. It let‚Äôs you play around with the different things in your applications including the data stored in your database.    Now that you‚Äôre in the rails console, let‚Äôs see what we can do with the Book class.    $ pwd  /Users/awesomesauce/Projects/bookstore  $ rails console  Loading development environment (Rails 5.0.0.1)  &gt;&gt;      Let‚Äôs try creating my favorite book.    In the rails console, run the following code:    my_favorite_book = Book.new        This assigns a new instance of Book to a variable so that we can refer to it as my_favorite_book.        Now, to give this new instance of book a title run:    my_favorite_book.title = \"why's (poignant) Guide to Ruby\"            my_favorite_book now has a title.    Don‚Äôt believe me?! Try running my_favorite_book.title. It should return ‚Äúwhy‚Äôs (poignant) Guide to Ruby‚Äù.    &gt;&gt; my_favorite_book = Book.new  =&gt; #&lt;Book id: nil, title: nil, author: nil, price_cents: nil, created_at: nil, updated_at: nil&gt;  &gt;&gt; my_favorite_book.title = \"why's (poignant) Guide to Ruby\"  =&gt; \"why's (poignant) Guide to Ruby\"  &gt;&gt; my_favorite_book.title  =&gt; \"why's (poignant) Guide to Ruby\"Remember those other columns we added to the books table? We can set those on my_favorite_book.      Try setting my_favorite_book‚Äôs author to ‚Äúwhy the lucky stiff‚Äù.        Although my_favorite_book is priceless, you can go ahead and give it a price. Remember, we named this column price_cents.        We should probably keep track of the number of copies we have of my favorite book. Run the following code to set the quantity:    my_favorite_book.quantity = 500        Did that work? No?!    Welcome to your first error!        These errors can seem intimidating at first, but they can be suprisingly helpful as you work your way through building an application.    So let‚Äôs embrace and explore these errors together!    &gt;&gt; my_favorite_book.author = \"why the lucky stiff\"  =&gt; \"why the lucky stiff\"  &gt;&gt; my_favorite_book.price_cents = 100  =&gt; 100  &gt;&gt; my_favorite_book.quantity = 500  NoMethodError: undefined method `quantity=' for #&lt;Book:0x007fdc9453bf60&gt;      from /Users/awesomesauce/.rvm/gems/ruby-2.3.1/gems/activemodel-5.0.0.1/lib/active_model/attribute_methods.rb:433:in `method_missing'      from (irb):11      from /Users/awesomesauce/.rvm/gems/ruby-2.3.1/gems/railties-5.0.0.1/lib/rails/commands/console.rb:65:in `start'      from /Users/awesomesauce/.rvm/gems/ruby-2.3.1/gems/railties-5.0.0.1/lib/rails/commands/console_helper.rb:9:in `start'      from /Users/awesomesauce/.rvm/gems/ruby-2.3.1/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:78:in `console'      from /Users/awesomesauce/.rvm/gems/ruby-2.3.1/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!'      from /Users/awesomesauce/.rvm/gems/ruby-2.3.1/gems/railties-5.0.0.1/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'      from bin/rails:4:in `require'      from bin/rails:4:in `&lt;main&gt;'Your first errorWe tried setting quantity on my_favorite_book, but we got an error:&gt;&gt; my_favorite_book.quantity = 500NoMethodError: undefined method `quantity=' for #&lt;Book:0x007fdc9453bf60&gt;We get a NoMethodError for quantity= because quantity isn‚Äôt a attribute we can set on Book.If you remember the CreateBooks migration, we added a few columns, but we never added a column for quantity.class CreateBooks &lt; ActiveRecord::Migration[5.0]  def change    create_table :books do |t|      t.string :title      t.string :author      t.integer :price_cents      t.timestamps    end  endendYour database is currently in a bad state. The books table needs a quantity column to store the number of available books.Fortunately, we have a few ways to fix this.Migrations are designed to run in two directions. So far, we‚Äôve run the CreateBooks migration ‚Äúup‚Äù to add the books table.Now, we‚Äôre going to run the CreateBooks migration ‚Äúdown‚Äù. By running the migration ‚Äúdown‚Äù, the books table will be removed. With the table no longer in the database, we can make changes to the migration and re-run it so the books table has the quantity column.      First, exit the rails console by running exit.        Then, run the CreateBooks migration down by running rake db:rollback.    &gt;&gt; exit  $ rake db:rollback  == 20161115030350 CreateBooks: reverting ======================================  -- drop_table(:books)     -&gt; 0.0098s  == 20161115030350 CreateBooks: reverted (0.0143s) =============================      Go back to your text editor and open the CreateBooks migration.        Inside the create_table block, add the following line:    t.integer :quantity            Save your changes to the CreateBooks migration.  1234567891011  class CreateBooks &lt; ActiveRecord::Migration[5.0]    def change      create_table :books do |t|        t.string :title        t.string :author        t.integer :price_cents        t.timestamps        t.integer :quantity      end    end  end      Go back to Terminal.        Re-run the migration by running rake db:migrate.    $ rake db:migrate  == 20161115030350 CreateBooks: migrating ======================================  -- create_table(:books)     -&gt; 0.0415s  == 20161115030350 CreateBooks: migrated (0.0416s) =============================Now that your books table has the quantity column, you can go back to adding my favorite book üòâ      Enter the rails console by running‚Ä¶rails console.        You already forgot what my favorite book was, didn‚Äôt you?    No worries. You can run each of the following lines of code in your console to refresh your memory:    my_favorite_book = Book.newmy_favorite_book.title = \"why's (poignant) Guide to Ruby\"my_favorite_book.author = \"why the lucky stiff\"my_favorite_book.price_cents = 100            Ok, now that you have my favorite book again try adding the quantity:    my_favorite_book.quantity = 500            Alright, my favorite book is coming along nicely. I think we‚Äôre ready to save it to your database.    Run my_favorite_book.save to save my favorite book to your database.    If the last thing you see says true, my favorite books has been saved to your database. Yay!    &gt;&gt; my_favorite_book = Book.new  =&gt; #&lt;Book id: nil, title: nil, author: nil, price_cents: nil, created_at: nil, updated_at: nil, quantity: nil&gt;  &gt;&gt; my_favorite_book.title = \"why's (poignant) Guide to Ruby\"  =&gt; \"why's (poignant) Guide to Ruby\"  &gt;&gt; my_favorite_book.author = \"why the lucky stiff\"  =&gt; \"why the lucky stiff\"  &gt;&gt; my_favorite_book.price_cents = 100  =&gt; 100  &gt;&gt; my_favorite_book.quantity = 500  =&gt; 500  &gt;&gt; my_favorite_book.save     (0.1ms)  begin transaction    SQL (0.8ms)  INSERT INTO \"books\" (\"title\", \"author\", \"price_cents\", \"created_at\", \"updated_at\", \"quantity\") VALUES (?, ?, ?, ?, ?, ?)  [[\"title\", \"why's (poignant) Guide to Ruby\"], [\"author\", \"why the lucky stiff\"], [\"price_cents\", 100], [\"created_at\", 2016-11-24 03:30:53 UTC], [\"updated_at\", 2016-11-24 03:30:53 UTC], [\"quantity\", 500]]     (2.3ms)  commit transaction  =&gt; trueWhat if I told you there was more than one way to add a book to your database?      Let‚Äôs try using the create method to add my second favorite book to your database.    Run the following code on the rails console:    Book.create(title: \"Oh, the Places You'll Go!\", author: \"Dr. Seuss\", price_cents: 500, quantity: 200)        The create method lets us save data in a single command. Instead of setitng attributes one at a time, we can set them all at once.    &gt;&gt; Book.create(title: \"Oh, the Places You'll Go!\", author: \"Dr. Seuss\", price_cents: 500, quantity: 200)     (0.1ms)  begin transaction    SQL (0.8ms)  INSERT INTO \"books\" (\"title\", \"author\", \"price_cents\", \"created_at\", \"updated_at\", \"quantity\") VALUES (?, ?, ?, ?, ?, ?)  [[\"title\", \"Oh, the Places You'll Go!\"], [\"author\", \"Dr. Seuss\"], [\"price_cents\", 500], [\"created_at\", 2016-11-24 03:33:22 UTC], [\"updated_at\", 2016-11-24 03:33:22 UTC], [\"quantity\", 200]]     (3.7ms)  commit transaction  =&gt; #&lt;Book id: 2, title: \"Oh, the Places You'll Go!\", author: \"Dr. Seuss\", price_cents: 500, created_at: \"2016-11-24 03:33:22\", updated_at: \"2016-11-24 03:33:22\", quantity: 200&gt;Now that we‚Äôve added some books to your database, let‚Äôs try pulling them out of the database.      My second favorite book was the last book you added to your database. To get it, run Book.last on the rails console.        My favorite book was the first book you added. Can you guess how we would get it?    Run Book.first to get the first book in your database.        What if you wanted to see all the books in your database? How would you do that??    Run Book.all to get all the books in your database.    Programming can be really confusing, but every once in a while it kinda makes sense üòä    &gt;&gt; Book.last    Book Load (0.2ms)  SELECT  \"books\".* FROM \"books\" ORDER BY \"books\".\"id\" DESC LIMIT ?  [[\"LIMIT\", 1]]  =&gt; #&lt;Book id: 2, title: \"Oh, the Places You'll Go!\", author: \"Dr. Seuss\", price_cents: 500, created_at: \"2016-11-24 03:33:22\", updated_at: \"2016-11-24 03:33:22\", quantity: 200&gt;  &gt;&gt; Book.first    Book Load (0.2ms)  SELECT  \"books\".* FROM \"books\" ORDER BY \"books\".\"id\" ASC LIMIT ?  [[\"LIMIT\", 1]]  =&gt; #&lt;Book id: 1, title: \"why's (poignant) Guide to Ruby\", author: \"why the lucky stiff\", price_cents: 100, created_at: \"2016-11-24 03:30:53\", updated_at: \"2016-11-24 03:30:53\", quantity: 500&gt;  &gt;&gt; Book.all    Book Load (0.2ms)  SELECT \"books\".* FROM \"books\"  =&gt; #&lt;ActiveRecord::Relation [#&lt;Book id: 1, title: \"why's (poignant) Guide to Ruby\", author: \"why the lucky stiff\", price_cents: 100, created_at: \"2016-11-24 03:30:53\", updated_at: \"2016-11-24 03:30:53\", quantity: 500&gt;, #&lt;Book id: 2, title: \"Oh, the Places You'll Go!\", author: \"Dr. Seuss\", price_cents: 500, created_at: \"2016-11-24 03:33:22\", updated_at: \"2016-11-24 03:33:22\", quantity: 200&gt;]&gt;As happy as I am to see some of my favorite books in your bookstore, I‚Äôm sure you have some you‚Äôd like to add as well.      Add five more books to your bookstore.        When you‚Äôre done, run Book.count to get the total number of books in your database. It should return 7.        After you‚Äôve added five more books and verified that they are saved to your database, exit the rails console by running exit.  ",
        "url": "/rails_tutorial/tutorial/chapter_02/"
      }
      ,
    
      "tutorial-chapter-03": {
        "title": "Viewing Data in the Browser",
        "content": "Viewing Data in the BrowserYou‚Äôve added a lot of books to your bookstore, but wouldn‚Äôt it be nice if you could actually see them in your browser? You are building a web application after all. üòâ      Before you can see your books, you‚Äôll need make some changes. Open the bookstore directory in your text editor.        Now open config/routes.rb and add the following line inside the only block in the file:    resources :books            Save your changes.  1234    Rails.application.routes.draw do      # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html      resources :books    end      Go back to Terminal and make sure you‚Äôre in the bookstore directory.        Run rake routes.    You should see a bunch of stuff about books along the lines of‚Ä¶       Prefix Verb   URI Pattern               Controller#Action    books GET    /books(.:format)          books#index          POST   /books(.:format)          books#create new_book GET    /books/new(.:format)      books#newedit_book GET    /books/:id/edit(.:format) books#edit     book GET    /books/:id(.:format)      books#show          PATCH  /books/:id(.:format)      books#update          PUT    /books/:id(.:format)      books#update          DELETE /books/:id(.:format)      books#destroy        rake routes prints a table of the available routes in your application. Since you added books as a resource in config/routes.rb, your application now has a bunch of book routes.    The URI Pattern column in the table tells you how to reach the routes from a browser.    For example, when your application is running locally you can reach /books by going to http://localhost:3000/books.    $ pwd  /Users/awesomesauce/Projects/bookstore  $ rake routes     Prefix Verb   URI Pattern               Controller#Action      books GET    /books(.:format)          books#index            POST   /books(.:format)          books#create   new_book GET    /books/new(.:format)      books#new  edit_book GET    /books/:id/edit(.:format) books#edit       book GET    /books/:id(.:format)      books#show            PATCH  /books/:id(.:format)      books#update            PUT    /books/:id(.:format)      books#update            DELETE /books/:id(.:format)      books#destroyLet‚Äôs trying going to the /books route.      In Terminal, run rails server to start your application‚Äôs web server.        Now, open your favorite web browser and go to http://localhost:3000/books.    If I had to guess, you probably got an error üôÉ    $ rails server  =&gt; Booting Puma  =&gt; Rails 5.0.0.1 application starting in development on http://localhost:3000  =&gt; Run `rails server -h` for more startup options  Puma starting in single mode...  * Version 3.6.0 (ruby 2.3.1-p112), codename: Sleepy Sunday Serenity  * Min threads: 5, max threads: 5  * Environment: development  * Listening on tcp://localhost:3000  Use Ctrl-C to stop  Started GET \"/books\" for ::1 at 2016-11-28 22:24:04 -0500    ActiveRecord::SchemaMigration Load (0.4ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"  ActionController::RoutingError (uninitialized constant BooksController):  ...We‚Äôve run into a problem, but Rails is giving us some info to help us understand what‚Äôs going on.You‚Äôre getting a Routing Error because there‚Äôs an uninitialized constant called BooksController. Rails is expecting your application to have a BooksController, but it doesn‚Äôt have one. Let‚Äôs create it!      Go back to Terminal and stop your rails server by running Ctrl-c.        Create the BooksController by running touch app/controllers/books_controller.rb.        Restart your web server by running rails server, and try going to http://localhost:3000/books again.    That still errored, didn‚Äôt it? But hey, at least you got a new error!    $ rails server  =&gt; Booting Puma  =&gt; Rails 5.0.0.1 application starting in development on http://localhost:3000  =&gt; Run `rails server -h` for more startup options  Puma starting in single mode...  * Version 3.6.0 (ruby 2.3.1-p112), codename: Sleepy Sunday Serenity  * Min threads: 5, max threads: 5  * Environment: development  * Listening on tcp://localhost:3000  Use Ctrl-C to stop  ...  ^CExiting  $ touch app/controllers/books_controller.rb  $ rails server  =&gt; Booting Puma  =&gt; Rails 5.0.0.1 application starting in development on http://localhost:3000  ...  Use Ctrl-C to stop  Started GET \"/books\" for ::1 at 2016-11-29 20:55:26 -0500    ActiveRecord::SchemaMigration Load (0.2ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"  LoadError (Unable to autoload constant BooksController, expected /Users/awesomesauce/Projects/bookstore/app/controllers/books_controller.rb to define it):Now you got a LoadError because BooksController isn‚Äôt defined.Remember the touch command you used to create the BooksController?touch app/controllers/books_controller.rbIt created the BooksController file, but the file is empty. Don‚Äôt believe me? Let‚Äôs take a look at it.      If your text editor isn‚Äôt already open, open it and go to the bookstore directory.        Now, open app/controllers/books_controller.rb.        See, it‚Äôs empty üòù    touch creates empty files. You used it to create an empty file called app/controllers/books_controller.rb.  The error you got said something about there being a missing constant BooksController. Let‚Äôs add it.      Add the following code to app/controllers/books_controller.rb:    class BooksController &lt; ApplicationControllerend        That should define the constant Rails was looking for.        Save the file and try going to http://localhost:3000/books again.    New error!  12class BooksController &lt; ApplicationControllerendThis new error is telling us that your BooksController doesn‚Äôt have an index action. That kinda makes sense - we didn‚Äôt add very much code to the BooksController. But why does it care that the index action is missing?Remember the routing table? Kinda? Don‚Äôt worry, it‚Äôs fuzzy for me too. Let‚Äôs pull it up again.      Go back to Terminal and stop the rails server by running Ctrl-c.        Now, run rake routes. Voila - the routing table.    The first entry in the routing table is for the /books path.    Prefix Verb   URI Pattern       Controller#Action books GET    /books(.:format)  books#index        The last column tells us which controller and action get run when we go to the /books path.    The URI Pattern /books(.:format) maps to the Controller#Action pair of books#index. This tells us requests to the /books path will be routed to the BooksController index action.    Clear as mud, right? Don‚Äôt worry, it‚Äôll make more sense later.        Now that we (kinda) know why we‚Äôre trying to run the index action, let‚Äôs add it.    Before we go on, restart your web server by running rails server.    $ rails server  =&gt; Booting Puma  ...  ^CExiting  $ rake routes     Prefix Verb   URI Pattern               Controller#Action      books GET    /books(.:format)          books#index            POST   /books(.:format)          books#create   new_book GET    /books/new(.:format)      books#new  edit_book GET    /books/:id/edit(.:format) books#edit       book GET    /books/:id(.:format)      books#show            PATCH  /books/:id(.:format)      books#update            PUT    /books/:id(.:format)      books#update            DELETE /books/:id(.:format)      books#destroy  $ rails server  =&gt; Booting Puma  ...      In your text editor, open the BooksController and add the following method inside the BooksController class.    def indexend            Save your changes and try going to http://localhost:3000/books again.      1234  class BooksController &lt; ApplicationController    def index    end  endProgress!We‚Äôre making progress.‚Ä¶Seriously!The /books path is sucessfully reaching the BooksController index action, but we‚Äôre getting an error because we‚Äôre missing a template.A template is a view that get‚Äôs rendered at the end of a controller action. In this case, Rails is expecting your application to have an index template to go with the BooksController index action.Let‚Äôs make that happen!      Stop your rails server by running Ctrl-c.        All templates live in the app/views directory.    app/views will have directories for each of the controllers in your application. By default, a controller‚Äôs template directory will be the name of the controller‚Ä¶minus the controller.    For example, the templates for the BooksController will live in the app/views/books directory.    Create the BooksController template directory by running mkdir app/views/books.        Now, create the template for the BooksController‚Äôs index action by running touch app/views/books/index.html.erb.        Restart your web server.    (Remember? Start your web server by running rails server.)        Now, try going to http://localhost:3000/books.    The page might be blank, but that means no errors!    $ rails server  =&gt; Booting Puma  ...  ^CExiting  $ mkdir app/views/books  $ touch app/views/books/index.html.erb  $ rails server  ...  Started GET \"/books\" for ::1 at 2016-11-29 22:15:07 -0500    ActiveRecord::SchemaMigration Load (0.2ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"  Processing by BooksController#index as HTML    Rendering books/index.html.erb within layouts/application    Rendered books/index.html.erb within layouts/application (1.7ms)  Completed 200 OK in 645ms (Views: 631.6ms | ActiveRecord: 0.0ms)Ok, let‚Äôs make this page a little more interesting.      In your text editor, open the template we made (app/views/books/index.html.erb) and add the following line:    &lt;h1&gt;Welcome to My Super Rad Bookstore!&lt;/h1&gt;            Save your changes and go to http://localhost:3000/books again.    Yay! üéâ  1  &lt;h1&gt;Welcome to My Super Rad Bookstore!&lt;/h1&gt;Listing All the ThingsYou‚Äôve been going to the /books path a bunch and as a result you‚Äôve been running the BooksController index action a lot.You can think of an index action in a Rails application as the index of a book. It‚Äôs used to list all of a controller‚Äôs resources.Since we‚Äôre dealing with the BooksController, this index action is going to list all of your bookstore‚Äôs books.Before you can show all of your books in the browser, you have to make the books data available through your application‚Äôs BooksController index action.      In your text editor, open app/controllers/books_controller.rb. Inside the index method, add the following line:    @books = Book.all        That line might look a little familiar. In Chapter 2, we used Book.all to list all your books on the rails console.    We‚Äôre using the same method again so we can render your books in the browser.        Save your changes.  12345  class BooksController &lt; ApplicationController    def index      @books = Book.all    end  endBy making that change to the BooksController index action, you‚Äôve made book data available to your index template.Let‚Äôs see what you can do with it.      In your text editor, open app/views/books/index.html.erb and add the following line to the end of the file:    &lt;%= @books[0].title %&gt;            Save your changes and try going to http://localhost:3000/books again.  12  &lt;h1&gt;Welcome to My Super Rad Bookstore!&lt;/h1&gt;  &lt;%= @books[0].title %&gt;Your application‚Äôs data might be a little different than mine, but you‚Äôre probably seeing the title to MY favorite book. Yippie!(If your data is different, you‚Äôre seeing the title of some other book‚Ä¶sigh üòâ)You had to do a couple of things to get that title to show up in your browser.First in the BooksController index method, you defined an instance variable @books and assigned it all the books in your application.class BooksController &lt; ApplicationController  def index    @books = Book.all  endendThen in the associated index template (app/views/books/index.html.erb), you used some funny looking syntax to get the first book and show it‚Äôs title.&lt;h1&gt;Welcome to My Super Rad Bookstore!&lt;/h1&gt;&lt;%= @books[0].title %&gt;Let‚Äôs focus on that funny looking syntax for a few minutes.      In your text editor, open app/views/books/index.html.erb.        Remember that line you added to the end of the file?    &lt;%= @books[0].title %&gt;        Change it so it looks like this:    &lt;%= @books[1].title %&gt;            Can you guess what this will change? Reload http://localhost:3000/books to see what happens.  12  &lt;h1&gt;Welcome to My Super Rad Bookstore!&lt;/h1&gt;  &lt;%= @books[0].title %&gt;You‚Äôre seeing a different book title, aren‚Äôt you?You used @books[0] to get the first book from your database, and you changed it to @books[1] to get the next book.I bet you could get all the books to render on the index template‚Ä¶      Spend some time and see if you can get all the book titles to render. If you‚Äôve been following along with the tutorial, you should have seven books in your application.    If you know some HTML, try listing the titles in an unordered list.    Don‚Äôt know very much HTML? Don‚Äôt worry about it - you‚Äôll get familiar with it reaaaal soon. Just focus on getting the titles to render.        What did you come up with?    One way may have been to list out each book like this:    &lt;%= @books[0].title %&gt;&lt;%= @books[1].title %&gt;&lt;%= @books[2].title %&gt;&lt;%= @books[3].title %&gt;&lt;%= @books[4].title %&gt;&lt;%= @books[5].title %&gt;&lt;%= @books[6].title %&gt;        That renders all the book titles, but they end up getting rendered on a single line.        If you know some HTML, you may have thrown in a few brs to give the titles some space like this:    &lt;%= @books[0].title %&gt;&lt;br&gt;&lt;%= @books[1].title %&gt;&lt;br&gt;&lt;%= @books[2].title %&gt;&lt;br&gt;&lt;%= @books[3].title %&gt;&lt;br&gt;&lt;%= @books[4].title %&gt;&lt;br&gt;&lt;%= @books[5].title %&gt;&lt;br&gt;&lt;%= @books[6].title %&gt;            Better yet, you may have even used an unordered list:    &lt;ul&gt;  &lt;li&gt;&lt;%= @books[0].title %&gt;&lt;/li&gt;  &lt;li&gt;&lt;%= @books[1].title %&gt;&lt;/li&gt;  &lt;li&gt;&lt;%= @books[2].title %&gt;&lt;/li&gt;  &lt;li&gt;&lt;%= @books[3].title %&gt;&lt;/li&gt;  &lt;li&gt;&lt;%= @books[4].title %&gt;&lt;/li&gt;  &lt;li&gt;&lt;%= @books[5].title %&gt;&lt;/li&gt;  &lt;li&gt;&lt;%= @books[6].title %&gt;&lt;/li&gt;&lt;/ul&gt;            If you used an unordered list, great!    If not, no worries - update your solution to use an unordered list.  1234567891011  &lt;h1&gt;Welcome to My Super Rad Bookstore!&lt;/h1&gt;  &lt;ul&gt;    &lt;li&gt;&lt;%= @books[0].title %&gt;&lt;/li&gt;    &lt;li&gt;&lt;%= @books[1].title %&gt;&lt;/li&gt;    &lt;li&gt;&lt;%= @books[2].title %&gt;&lt;/li&gt;    &lt;li&gt;&lt;%= @books[3].title %&gt;&lt;/li&gt;    &lt;li&gt;&lt;%= @books[4].title %&gt;&lt;/li&gt;    &lt;li&gt;&lt;%= @books[5].title %&gt;&lt;/li&gt;    &lt;li&gt;&lt;%= @books[6].title %&gt;&lt;/li&gt;  &lt;/ul&gt;Yay! Book titles!But doesn‚Äôt a lot of that code in your template look just a little‚Ä¶repetitive?&lt;li&gt;&lt;%= @books[0].title %&gt;&lt;/li&gt;&lt;li&gt;&lt;%= @books[1].title %&gt;&lt;/li&gt;&lt;li&gt;&lt;%= @books[2].title %&gt;&lt;/li&gt;...There has to be a better way!?There is! üòÑRemember when you defined @books in the BooksController index method?@books = Book.allYou defined @books to be a collection of all the books in your application‚Äôs database. For our purposes, we can treat this collection like a Ruby Array.You can get each item of a Ruby array by its index, and the first item starts at index 0.Does that sound familiar? It‚Äôs what you used to render the book titles.  &lt;li&gt;&lt;%= @books[0].title %&gt;&lt;/li&gt;  &lt;li&gt;&lt;%= @books[1].title %&gt;&lt;/li&gt;  ...This works well, but it‚Äôs a very manual process. You have to individually access each book to render its title. It also depends on you knowing how many books there are in the database.In Ruby, we don‚Äôt have to access each book individually like this. We can use Array‚Äôs each method to help us out.Let‚Äôs see what that would look like.You might remember reading about arrays in the Ruby in 100 minutes tutorial. Arrays are most commonly used for storing a list or collection of things.      Go back to your terminal and quit the rails server by running Ctrl-c.        Now, start the rails console by running‚Ä¶rails console.        Run the following code:    books = Book.all        You now have a books variable that‚Äôs been assigned all the books in your application‚Äôs database. books can be thought of as a Ruby Array.    Sound familiar üòâ        Now, try running the following:    books.each { |book| puts book.title }        What happened?    You used the each method to iterate over each book and print its title.        The curly braces ({}) after each are the start and end of a block. We‚Äôve seen the other block notation before - it starts with a do and ends with an end.    Try running the following:    books.each do |book|  puts book.titleend        The syntax might be different, but it‚Äôs the same result - each of the book titles are printed.        At the beginning of the block, you have a couple of pipes surronding book    books.each { |book| ... }        This is called a block parameter. In this case, it lets you access each book so you can print its title.    Before, we would‚Äôve manually gone through each book to print its title.    puts books[0].titleputs books[1].title...        Now, each lets us do it in a lot less code.    books.each { |book| puts book.title }            Try playing with the each method to see what else you can print out. You should be able print things like the book ids, authors, and quantities.        When you‚Äôre done exploring, run exit to exit the rails console. Then, restart the rails server.    &gt;&gt; books = Book.all    Book Load (1.4ms)  SELECT \"books\".* FROM \"books\"  =&gt; #&lt;ActiveRecord::Relation [#&lt;Book id: 1, title: \"why's (poignant) Guide to Ruby\", author: \"why the lucky stiff\", price_cents: 100, created_at: \"2016-11-24 03:30:53\", updated_at: \"2016-11-24 03:30:53\", quantity: 500&gt;, #&lt;Book id: 2, title: \"Oh, the Places You'll Go!\", author: \"Dr. Seuss\", price_cents: 500, created_at: \"2016-11-24 03:33:22\", updated_at: \"2016-11-24 03:33:22\", quantity: 200&gt;, #&lt;Book id: 4, title: \"1984\", author: \"George Orwell\", price_cents: 0, created_at: \"2016-11-30 01:35:44\", updated_at: \"2016-11-30 01:35:44\", quantity: 200&gt;, #&lt;Book id: 5, title: \"The Sound and The Fury\", author: \"William Faulkner\", price_cents: 500, created_at: \"2016-11-30 01:36:47\", updated_at: \"2016-11-30 01:36:47\", quantity: 150&gt;, #&lt;Book id: 6, title: \"Life of Pi\", author: \"Yann Martel\", price_cents: 750, created_at: \"2016-11-30 01:37:40\", updated_at: \"2016-11-30 01:37:40\", quantity: 50&gt;, #&lt;Book id: 7, title: \"The Kite Runner\", author: \"Khaled Hosseini\", price_cents: 600, created_at: \"2016-11-30 01:38:28\", updated_at: \"2016-11-30 01:38:28\", quantity: 23&gt;, #&lt;Book id: 8, title: \"Ender's Game\", author: \"Orson Scott Card\", price_cents: 42, created_at: \"2016-11-30 01:40:20\", updated_at: \"2016-11-30 01:40:20\", quantity: 1000&gt;]&gt;  &gt;&gt; books.each { |book| puts book.title }  why's (poignant) Guide to Ruby  Oh, the Places You'll Go!  1984  The Sound and The Fury  Life of Pi  The Kite Runner  Ender's Game  =&gt; [#&lt;Book id: 1, title: \"why's (poignant) Guide to Ruby\", author: \"why the lucky stiff\", price_cents: 100, created_at: \"2016-11-24 03:30:53\", updated_at: \"2016-11-24 03:30:53\", quantity: 500&gt;, #&lt;Book id: 2, title: \"Oh, the Places You'll Go!\", author: \"Dr. Seuss\", price_cents: 500, created_at: \"2016-11-24 03:33:22\", updated_at: \"2016-11-24 03:33:22\", quantity: 200&gt;, #&lt;Book id: 4, title: \"1984\", author: \"George Orwell\", price_cents: 0, created_at: \"2016-11-30 01:35:44\", updated_at: \"2016-11-30 01:35:44\", quantity: 200&gt;, #&lt;Book id: 5, title: \"The Sound and The Fury\", author: \"William Faulkner\", price_cents: 500, created_at: \"2016-11-30 01:36:47\", updated_at: \"2016-11-30 01:36:47\", quantity: 150&gt;, #&lt;Book id: 6, title: \"Life of Pi\", author: \"Yann Martel\", price_cents: 750, created_at: \"2016-11-30 01:37:40\", updated_at: \"2016-11-30 01:37:40\", quantity: 50&gt;, #&lt;Book id: 7, title: \"The Kite Runner\", author: \"Khaled Hosseini\", price_cents: 600, created_at: \"2016-11-30 01:38:28\", updated_at: \"2016-11-30 01:38:28\", quantity: 23&gt;, #&lt;Book id: 8, title: \"Ender's Game\", author: \"Orson Scott Card\", price_cents: 42, created_at: \"2016-11-30 01:40:20\", updated_at: \"2016-11-30 01:40:20\", quantity: 1000&gt;]  &gt;&gt; books.each do |book|  ?&gt;     puts book.title  &gt;&gt;   end  why's (poignant) Guide to Ruby  Oh, the Places You'll Go!  1984  The Sound and The Fury  Life of Pi  The Kite Runner  Ender's Game  =&gt; [#&lt;Book id: 1, title: \"why's (poignant) Guide to Ruby\", author: \"why the lucky stiff\", price_cents: 100, created_at: \"2016-11-24 03:30:53\", updated_at: \"2016-11-24 03:30:53\", quantity: 500&gt;, #&lt;Book id: 2, title: \"Oh, the Places You'll Go!\", author: \"Dr. Seuss\", price_cents: 500, created_at: \"2016-11-24 03:33:22\", updated_at: \"2016-11-24 03:33:22\", quantity: 200&gt;, #&lt;Book id: 4, title: \"1984\", author: \"George Orwell\", price_cents: 0, created_at: \"2016-11-30 01:35:44\", updated_at: \"2016-11-30 01:35:44\", quantity: 200&gt;, #&lt;Book id: 5, title: \"The Sound and The Fury\", author: \"William Faulkner\", price_cents: 500, created_at: \"2016-11-30 01:36:47\", updated_at: \"2016-11-30 01:36:47\", quantity: 150&gt;, #&lt;Book id: 6, title: \"Life of Pi\", author: \"Yann Martel\", price_cents: 750, created_at: \"2016-11-30 01:37:40\", updated_at: \"2016-11-30 01:37:40\", quantity: 50&gt;, #&lt;Book id: 7, title: \"The Kite Runner\", author: \"Khaled Hosseini\", price_cents: 600, created_at: \"2016-11-30 01:38:28\", updated_at: \"2016-11-30 01:38:28\", quantity: 23&gt;, #&lt;Book id: 8, title: \"Ender's Game\", author: \"Orson Scott Card\", price_cents: 42, created_at: \"2016-11-30 01:40:20\", updated_at: \"2016-11-30 01:40:20\", quantity: 1000&gt;]Let‚Äôs put this new knowledge to work.      In your text editor, open app/views/books/index.html.erb.        At the end of the file, add a new, empty unordered list. It should look like this:    &lt;ul&gt;&lt;/ul&gt;        Inside the new unordered list, we‚Äôll want to iterate over all the books assigned to @books and render a list item for each book title.    We can iterate over @books by using the each method.    You‚Äôve used the each method on the rails console, but how will you use it in your template?        To run Ruby code in your template, you have to put it inside some funny looking brackets:    &lt;% ... %&gt;        Everything inside &lt;% %&gt; will get run in your template.    We‚Äôve seen something similar before. Remember how you got the book titles to render?    &lt;%= @books[0].title %&gt;        The syntax is slightly different. &lt;%= %&gt; runs Ruby code and renders the result in your template.    &lt;% %&gt; on the other hand only runs Ruby code. It does not render theresult of that code.    With that in mind, add the following code inside your new unordered list:    &lt;% @books.each do |book| %&gt;&lt;% end %&gt;            Save your changes and revisit http://localhost:3000/books. Did anything change?    Nothing changed! You‚Äôre running @books.each in your template, but since it‚Äôs inside &lt;% %&gt; the result of that block isn‚Äôt rendered.  12345678910111213141516  &lt;h1&gt;Welcome to My Super Rad Bookstore!&lt;/h1&gt;  &lt;ul&gt;    &lt;li&gt;&lt;%= @books[0].title %&gt;&lt;/li&gt;    &lt;li&gt;&lt;%= @books[1].title %&gt;&lt;/li&gt;    &lt;li&gt;&lt;%= @books[2].title %&gt;&lt;/li&gt;    &lt;li&gt;&lt;%= @books[3].title %&gt;&lt;/li&gt;    &lt;li&gt;&lt;%= @books[4].title %&gt;&lt;/li&gt;    &lt;li&gt;&lt;%= @books[5].title %&gt;&lt;/li&gt;    &lt;li&gt;&lt;%= @books[6].title %&gt;&lt;/li&gt;  &lt;/ul&gt;  &lt;ul&gt;    &lt;% @books.each do |book| %&gt;    &lt;% end %&gt;  &lt;/ul&gt;You can use that funny looking syntax in your templates because they‚Äôre ERB templates.ERB templates are available in all Rails applications. Any file that ends in .html.erb is an ERB template.Now that you have your block set up, you‚Äôre ready to render some book titles.      Spend a few minutes and try to get each book title to render as a list item inside the block.    Remember, inside the block each book is availble to you as book.    When you‚Äôre done, you should see two identical unordered lists on http://localhost:3000/books.        Did you get it?! Your new unordered list should look something like this:    &lt;ul&gt;  &lt;% @books.each do |book| %&gt;    &lt;li&gt;&lt;%= book.title %&gt;&lt;/li&gt;  &lt;% end %&gt;&lt;/ul&gt;        Update your solution to match this solution.        Compare your two unordered lists. They both end in the same result, but one required a little more effort.    &lt;ul&gt;  &lt;li&gt;&lt;%= @books[0].title %&gt;&lt;/li&gt;  &lt;li&gt;&lt;%= @books[1].title %&gt;&lt;/li&gt;  &lt;li&gt;&lt;%= @books[2].title %&gt;&lt;/li&gt;  &lt;li&gt;&lt;%= @books[3].title %&gt;&lt;/li&gt;  &lt;li&gt;&lt;%= @books[4].title %&gt;&lt;/li&gt;  &lt;li&gt;&lt;%= @books[5].title %&gt;&lt;/li&gt;  &lt;li&gt;&lt;%= @books[6].title %&gt;&lt;/li&gt;&lt;/ul&gt;&lt;ul&gt;  &lt;% @books.each do |book| %&gt;    &lt;li&gt;&lt;%= book.title %&gt;&lt;/li&gt;  &lt;% end %&gt;&lt;/ul&gt;        We can take advantage of the ability to run Ruby code inside Rails templates to do things quickly.        You don‚Äôt need to show both unordered lists, so go ahead and remove the first one.  1234567  &lt;h1&gt;Welcome to My Super Rad Bookstore!&lt;/h1&gt;  &lt;ul&gt;    &lt;% @books.each do |book| %&gt;      &lt;li&gt;&lt;%= book.title %&gt;&lt;/li&gt;    &lt;% end %&gt;  &lt;/ul&gt;Now that you have book titles rendering, let‚Äôs try adding some information.      Update the books unordered lists so it includes the book author next to each author like this:    why‚Äôs (poignant) Guide to Ruby by why the lucky stiff        What did you come up with? Compare your solution with people around you.    Inside the @books.each block, you should‚Äôve edited the list item so it renders each book‚Äôs author next to its title.    &lt;li&gt;&lt;%= book.title %&gt; by &lt;%= book.author %&gt;&lt;/li&gt;            Update your solution to match this solution.        When you‚Äôre done, stop your application‚Äôs web server by running Ctrl-C.  1234567  &lt;h1&gt;Welcome to My Super Rad Bookstore!&lt;/h1&gt;  &lt;ul&gt;    &lt;% @books.each do |book| %&gt;      &lt;li&gt;&lt;%= book.title %&gt; by &lt;%= book.author %&gt;&lt;/li&gt;    &lt;% end %&gt;  &lt;/ul&gt;",
        "url": "/rails_tutorial/tutorial/chapter_03/"
      }
      ,
    
      "tutorial-chapter-04": {
        "title": "Showing Detailed Information in the Browser",
        "content": "Showing Detailed Information in the BrowserYour bookstore is starting to come along. You have an index that lists all the books in your database by title and author. This is great, but what about the other information you‚Äôve stored about your books? It would be useful to see how much a book costs, or how many are available.Let‚Äôs show this information.Let‚Äôs start by looking at your application‚Äôs routes again.      Open Terminal and go to your bookstore directory.        Run rake routes.    So far we‚Äôve worked with the first row in the routes table. We used the /books path with the BooksController index action to list all your application‚Äôs books.    books GET    /books(.:format)          books#index        Now that we want to show detailed book information we‚Äôll need to use a different route.    book GET    /books/:id(.:format)      books#show        This time, we‚Äôll use the /books/:id path with the BooksController show action to show a book‚Äôs information.    $ pwd  /Users/awesomesauce/Projects/bookstore  $ rake routes     Prefix Verb   URI Pattern               Controller#Action      books GET    /books(.:format)          books#index            POST   /books(.:format)          books#create   new_book GET    /books/new(.:format)      books#new  edit_book GET    /books/:id/edit(.:format) books#edit       book GET    /books/:id(.:format)      books#show            PATCH  /books/:id(.:format)      books#update            PUT    /books/:id(.:format)      books#update            DELETE /books/:id(.:format)      books#destroyIn the /books/:id path, we can take advantage of :id to get a book by it‚Äôs id.What‚Äôs that? You didn‚Äôt know a book could have an id? Let‚Äôs take a look.      Go back to Terminal and start rails console.        In the console, run Book.first to get the first book from your database.    Take a look at the output. It might be hard to see, but at the beginning there‚Äôs an id.    #&lt;Book id: 1, title: \"why's (poignant) Guide to Ruby\", ... &gt;        The first book in your database has an id of 1.        I wonder what id your second book will have‚Ä¶    Run Book.second and look at the output.    #&lt;Book id: 2, title: \"Oh, the Places You'll Go!\", ... &gt;        The second book in your database has an id of ‚Ä¶ 2!!!    By default, every book you create will be given a unique id, and it will be given an id in sequential order.        Exit the console.    $ rails c  Loading development environment (Rails 5.0.0.1)  &gt;&gt; Book.first    Book Load (0.2ms)  SELECT  \"books\".* FROM \"books\" ORDER BY \"books\".\"id\" ASC LIMIT ?  [[\"LIMIT\", 1]]  =&gt; #&lt;Book id: 1, title: \"why's (poignant) Guide to Ruby\", author: \"why the lucky stiff\", price_cents: 100, created_at: \"2016-12-26 15:51:15\", updated_at: \"2016-12-26 15:51:15\", quantity: 500&gt;  &gt;&gt; Book.second    Book Load (0.2ms)  SELECT  \"books\".* FROM \"books\" ORDER BY \"books\".\"id\" ASC LIMIT ? OFFSET ?  [[\"LIMIT\", 1], [\"OFFSET\", 1]]  =&gt; #&lt;Book id: 2, title: \"Oh, the Places You'll Go!\", author: \"Dr. Seuss\", price_cents: 500, created_at: \"2016-12-26 15:51:15\", updated_at: \"2016-12-26 15:51:15\", quantity: 200&gt;  &gt;&gt; exitHow will the /books/:id path work in action?      Go back to Terminal and start your application‚Äôs web server by running rails server.        :id can be replaced with specific ids. Since we know your first book‚Äôs id is 1, we can go to /books/1.    Open your browser and go to http://localhost:3000/books/1.        An unknown action error?! Why does that look familiar‚Ä¶ üòâ    You‚Äôre trying to access the BooksController show action, but it doesn‚Äôt exist. Let‚Äôs make it!    $ rails server  =&gt; Booting Puma  =&gt; Rails 5.0.0.1 application starting in development on http://localhost:3000  =&gt; Run `rails server -h` for more startup options  Puma starting in single mode...  * Version 3.6.0 (ruby 2.3.1-p112), codename: Sleepy Sunday Serenity  * Min threads: 5, max threads: 5  * Environment: development  * Listening on tcp://localhost:3000  Use Ctrl-C to stop  Started GET \"/books/1\" for ::1 at 2016-12-26 12:07:18 -0500    ActiveRecord::SchemaMigration Load (0.2ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"  AbstractController::ActionNotFound (The action 'show' could not be found for BooksController):  ...      Open your text editor and go to app/controllers/books_controller.rb.        After the index action, add the following:    def showend            Save your changes, and go to http://localhost:3000/books/1 again.        Now you get a different error:    ActionController::UnknownFormat (BooksController#show is missing a template for this request format and variant.        We‚Äôve seen this error too. You added the show action, but it doesn‚Äôt have a template to go with it.  12345678  class BooksController &lt; ApplicationController    def index      @books = Book.all    end    def show    end  endLet‚Äôs add the missing template.      Go back to Terminal and stop your application‚Äôs web server by running Ctrl-C.        Now, run touch app/views/books/show.html.erb to create the empty template.        Restart your application‚Äôs web server by running rails server and revisit http://localhost:3000/books/1.    Remember, a blank page means no errors. üòÜ    Now that we have the BooksController show action rendering a template, we‚Äôre ready to show a book‚Äôs details.    $ rails server  ...  ^CExiting  $ touch app/views/books/show.html.erb  $ rails server  ...How do we know which book we‚Äôre showing?Before you can show a book‚Äôs details, you have to figure out which book‚Äôs details to show. How can we figure out which book to show?When you visit http://localhost:3000/books/1, you send a request to your application‚Äôs web server. Thanks to Rails routing, the book id (1) is included in that request.Started GET \"/books/1\" for ::1 at 2016-12-26 16:12:07 -0500Processing by BooksController#show as HTML  Parameters: {\"id\"=&gt;\"1\"}  Rendering books/show.html.erb within layouts/application  Rendered books/show.html.erb within layouts/application (0.3ms)Completed 200 OK in 266ms (Views: 263.1ms | ActiveRecord: 0.0ms)It‚Äôs tucked in there, but the id is inside the parameters hash. See it? Try to find it in your server‚Äôs output.Parameters: {\"id\"=&gt;\"1\"}Let‚Äôs see how we can access the parameters hash in your BooksController show method.      Open your text editor and go to app/controllers/books_controller.rb.        Request parameters are available in all your application‚Äôs controllers as params.    Inside the show method, add the following code:    @id = params[:id]      123456789  class BooksController &lt; ApplicationController    def index      @books = Book.all    end    def show      @id = params[:id]    end  endBy defining @id in the BooksController show method, it‚Äôs available in the BooksController show template.      Open app/views/books/show.html.erb in your text editor and add the following:    This book's id is &lt;%= @id %&gt;.            Save your changes.  1  This book's id is &lt;%= @id %&gt;.Now that the BooksController show template is wired up to render something, what do you expect to see if you visit http://localhost:3000/books/1?Do you have an idea? Let‚Äôs verify it!      Go to http://localhost:3000/books/1.    What do you see?? Was it what you were expecting?  Did reality meet your expecations?The page renders ‚ÄúThis book‚Äôs id is 1.‚Äù becuase you made a request from your browser with book id 1 (http://localhost:3000/books/1).You‚Äôre able to render the id because you grabbed it from the request parameters and assigned it to @id inside the BooksController show action.What happens if you go to http://localhost:3000/books/2?What about http://localhost:3000/books/3?The new book id is rendered on every request because you wired up the template to show the requested book‚Äôs id.Finding a BookNow that we have the book id for the book we want to show, we can use it to get that book from your application‚Äôs database.We‚Äôve used a few methods to get books from the database. We‚Äôve used Book.all to get all the books, and we‚Äôve used Book.first to get the first book.But how do we get a book by it‚Äôs id? Let‚Äôs explore on the rails console.      Go back to Terminal and quit your application‚Äôs web server by running Ctrl-C. Then, start the rails console.        Now try running the following code:    Book.find(3)        What did it return? It returned the book in your application‚Äôs database with id 3.    #&lt;Book id: 3, title: \"1984\", author: \"George Orwell\", price_cents: 0, created_at: \"2016-12-26 15:51:15\", updated_at: \"2016-12-26 15:51:15\", quantity: 200&gt;            What do you get when you run Book.find(1) or Book.find(5)?    You get the book with that id.        What happens if you do Book.find(100)?    ActiveRecord::RecordNotFound: Couldn't find Book with 'id'=100        An error! Book.find returns an error when it doesn‚Äôt find a book with the given book id.    So we can use Book.find to get books from your application‚Äôs database with a given id. If a book doesn‚Äôt exist with that id, we get an ActiveRecord::RecordNotFound error.        Exit the console and restart your application‚Äôs web server.    $ rails server  ...  ^CExiting  $ rails console  Loading development environment (Rails 5.0.0.1)  &gt;&gt; Book.find(3)    Book Load (0.2ms)  SELECT  \"books\".* FROM \"books\" WHERE \"books\".\"id\" = ? LIMIT ?  [[\"id\", 3], [\"LIMIT\", 1]]  =&gt; #&lt;Book id: 3, title: \"1984\", author: \"George Orwell\", price_cents: 0, created_at: \"2016-12-26 15:51:15\", updated_at: \"2016-12-26 15:51:15\", quantity: 200&gt;  &gt;&gt; Book.find(1)    Book Load (0.2ms)  SELECT  \"books\".* FROM \"books\" WHERE \"books\".\"id\" = ? LIMIT ?  [[\"id\", 1], [\"LIMIT\", 1]]  =&gt; #&lt;Book id: 1, title: \"why's (poignant) Guide to Ruby\", author: \"why the lucky stiff\", price_cents: 100, created_at: \"2016-12-26 15:51:15\", updated_at: \"2016-12-26 15:51:15\", quantity: 500&gt;  &gt;&gt; Book.find(5)    Book Load (0.2ms)  SELECT  \"books\".* FROM \"books\" WHERE \"books\".\"id\" = ? LIMIT ?  [[\"id\", 5], [\"LIMIT\", 1]]  =&gt; #&lt;Book id: 5, title: \"Life of Pi\", author: \"Yann Martel\", price_cents: 750, created_at: \"2016-12-26 15:51:15\", updated_at: \"2016-12-26 15:51:15\", quantity: 50&gt;  &gt;&gt; Book.find(100)    Book Load (0.2ms)  SELECT  \"books\".* FROM \"books\" WHERE \"books\".\"id\" = ? LIMIT ?  [[\"id\", 100], [\"LIMIT\", 1]]  ActiveRecord::RecordNotFound: Couldn't find Book with 'id'=100\tfrom /Users/alimi/.rvm/gems/ruby-2.3.1/gems/activerecord-5.0.0.1/lib/active_record/core.rb:173:in `find'\tfrom (irb):5\tfrom /Users/alimi/.rvm/gems/ruby-2.3.1/gems/railties-5.0.0.1/lib/rails/commands/console.rb:65:in `start'\tfrom /Users/alimi/.rvm/gems/ruby-2.3.1/gems/railties-5.0.0.1/lib/rails/commands/console_helper.rb:9:in `start'\tfrom /Users/alimi/.rvm/gems/ruby-2.3.1/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:78:in `console'\tfrom /Users/alimi/.rvm/gems/ruby-2.3.1/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\tfrom /Users/alimi/.rvm/gems/ruby-2.3.1/gems/railties-5.0.0.1/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\tfrom bin/rails:4:in `require'\tfrom bin/rails:4:in `&lt;main&gt;'  &gt;&gt; exit  $ rails server  =&gt; Booting Puma  ...Let‚Äôs use our new knowledge of Book.find to get and show the requested book in the BooksController show method.      In your text editor, open the BooksController.        We‚Äôve already grabbed the requested book id and set it to @id. Let‚Äôs use that to find the requested book.    Add the following line to the end of the show method:    @book = Book.find(@id)            Save your changes and go to http://localhost:3000/books/1.    Did you notice anything different? I hope not, because we didn‚Äôt update the template üòù  12345678910  class BooksController &lt; ApplicationController    def index      @books = Book.all    end    def show      @id = params[:id]      @book = Book.find(@id)    end  end      Now, open the BooksController show template (app/views/books/show.html.erb).        Add the following line to the end of the file    This book is called &lt;%= @book.title %&gt;            Save your changes and go back to http://localhost:3000/books/1.  12  This book's id is &lt;%= @id %&gt;.  This book is called &lt;%= @book.title %&gt;.Yay! You got the request book and showed some of its information.Unfortunately, it‚Äôs kinda smashed together on the page.Let‚Äôs use a definition list to clean it up.      Open app/views/books/show.html.erb in your text editor and delete everything in the file.    Yes, EVERYTHING.    There‚Äôs nothing wrong with what we‚Äôve done so far, but adding the definition list is easier from scratch.        Now, add the following code to the file:    &lt;dl&gt;  &lt;dt&gt;Id&lt;/dt&gt;  &lt;dd&gt;&lt;%= @book.id %&gt;&lt;/dd&gt;  &lt;dt&gt;Title&lt;/dt&gt;  &lt;dd&gt;&lt;%= @book.title %&gt;&lt;/dd&gt;&lt;/dl&gt;        This is an HTML definition list with a couple of terms: ‚ÄúId‚Äù and ‚ÄúTitle‚Äù. The terms are defined with values for the given book.    Save your changes and go to http://localhost:3000/books/1 to see the results.  1234567  &lt;dl&gt;    &lt;dt&gt;Id&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.id %&gt;&lt;/dd&gt;    &lt;dt&gt;Title&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.title %&gt;&lt;/dd&gt;  &lt;/dl&gt;      Now that we have a definition list with the book's id and title, update it to include the rest of the book's information (author, price_cents, and quantity).        What did you come up with? Your solution should look something like this:    &lt;dl&gt;  &lt;dt&gt;Id&lt;/dt&gt;  &lt;dd&gt;&lt;%= @book.id %&gt;&lt;/dd&gt;  &lt;dt&gt;Title&lt;/dt&gt;  &lt;dd&gt;&lt;%= @book.title %&gt;&lt;/dd&gt;  &lt;dt&gt;Author&lt;/dt&gt;  &lt;dd&gt;&lt;%= @book.author %&gt;&lt;/dd&gt;  &lt;dt&gt;Price Cents&lt;/dt&gt;  &lt;dd&gt;&lt;%= @book.price_cents %&gt;&lt;/dd&gt;  &lt;dt&gt;Quantity&lt;/dt&gt;  &lt;dd&gt;&lt;%= @book.quantity %&gt;&lt;/dd&gt;&lt;/dl&gt;            Update your solution to match this solution.  12345678910111213141516  &lt;dl&gt;    &lt;dt&gt;Id&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.id %&gt;&lt;/dd&gt;    &lt;dt&gt;Title&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.title %&gt;&lt;/dd&gt;    &lt;dt&gt;Author&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.author %&gt;&lt;/dd&gt;    &lt;dt&gt;Price Cents&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.price_cents %&gt;&lt;/dd&gt;    &lt;dt&gt;Quantity&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.quantity %&gt;&lt;/dd&gt;  &lt;/dl&gt;Price Cents?The books details look great, but doesn‚Äôt ‚ÄúPrice Cents‚Äù look kinda weird?Do you ever wonder how much something would cost in pennies? Really?! I thought I was the only one!For most people, it would be easier to see the book‚Äôs price in dollars. Fortunately, Rails has our back.Rails provides a number_to_currency method that prints a number as currency.Let‚Äôs see what happens when you use it.      Reopen app/views/books/show.html.erb and change the ‚ÄúPrice Cents‚Äù definition from    &lt;dd&gt;&lt;%= @book.price_cents %&gt;&lt;/dd&gt;        to    &lt;dd&gt;&lt;%= number_to_currency(@book.price_cents) %&gt;            Save your changes and revist http://localhost:3000/books/1.  12345678910111213141516  &lt;dl&gt;    &lt;dt&gt;Id&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.id %&gt;&lt;/dd&gt;    &lt;dt&gt;Title&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.title %&gt;&lt;/dd&gt;    &lt;dt&gt;Author&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.author %&gt;&lt;/dd&gt;    &lt;dt&gt;Price Cents&lt;/dt&gt;    &lt;dd&gt;&lt;%= number_to_currency(@book.price_cents) %&gt;&lt;/dd&gt;    &lt;dt&gt;Quantity&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.quantity %&gt;&lt;/dd&gt;  &lt;/dl&gt;Looks great, right?!Except why‚Äôs (poignant) Guide to Ruby doesn‚Äôt cost $100.00. We set the book‚Äôs price_cents to 100, and 100 cents is $1.00.number_to_currency formats a number as a dollar amount, but the number has to be in dollars.We need to first convert price_cents to dollars before we can really use number_to_currency.      Reopen app/views/books/show.html.erb and change the ‚ÄúPrice Cents‚Äù definition from    &lt;dd&gt;&lt;%= number_to_currency(@book.price_cents) %&gt;&lt;/dd&gt;        to    &lt;dd&gt;&lt;%= number_to_currency(@book.price_cents / 100.0) %&gt;&lt;/dd&gt;        To convert from cents to dollars, we can simply divide by 100.    (Actually we have to divide by 100.0 because floating point math is fun)    Then, the converted value is used by number_to_currency.        You can also go ahead and change the definition term from ‚ÄúPrice Cents‚Äù to ‚ÄúPrice‚Äù.        Save your changes and try looking up a few of your books in your browser.  12345678910111213141516  &lt;dl&gt;    &lt;dt&gt;Id&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.id %&gt;&lt;/dd&gt;    &lt;dt&gt;Title&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.title %&gt;&lt;/dd&gt;    &lt;dt&gt;Author&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.author %&gt;&lt;/dd&gt;    &lt;dt&gt;Price&lt;/dt&gt;    &lt;dd&gt;&lt;%= number_to_currency(@book.price_cents / 100.0) %&gt;&lt;/dd&gt;    &lt;dt&gt;Quantity&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.quantity %&gt;&lt;/dd&gt;  &lt;/dl&gt;We‚Äôre making really good progress! Anyone can visit your bookstore to see what books you have, and they can learn a little about those books.I love that I can see what books you have and how much they cost, but what if I‚Äôve never heard of one of your books before??Let‚Äôs add book descriptions to help give just a little more info about your books.Adding descriptions to booksWe can add descriptions to books by adding a description column to the books table.Do you remember how we added columns to your application‚Äôs database tables?We‚Äôve done that through migrations. We created a migration to add the books table, and we changed that migration to add new columns.Now that you‚Äôre bookstore application is coming along, we don‚Äôt want to go back and edit past migrations. Editing past migrations can compromise the data you‚Äôve worked so hard to collect!But how will we add the description column to the books table??A new migration!      Go back to Terminal and stop your application‚Äôs web server by running Ctrl-C.        Now, run rails generate migration add_description_to_books.    This creates a new timestamped migration file db/migrate/TIMESTAMP_add_description_to_books.rb.    $ rails generate migration add_description_to_books        invoke  active_record        create    db/migrate/20161227020938_add_description_to_books.rb      Open your new migration in your text editor.        Inside the change method, add the following line:    add_column :books, :description, :text        With this change, we‚Äôre setting up the migration to add a column to the books table. The new column will be named description and it will store any amount of text.        Save your changes.  12345  class AddDescriptionToBooks &lt; ActiveRecord::Migration[5.0]    def change      add_column :books, :description, :text    end  end      Now, go back to Terminal.    Run rake db:migrate to run your new migration against your application‚Äôs database.    $ rake db:migrate  == 20161227020938 AddDescriptionToBooks: migrating ============================  -- add_column(:books, :description, :text)     -&gt; 0.0049s  == 20161227020938 AddDescriptionToBooks: migrated (0.0050s) ===================Let‚Äôs take a look at how this changes your bookstore.      In Terminal, start rails console, get your first book and assign it to a variable called my_first_book.    my_first_book = Book.first        Does the book look different?    At the end, you should see a nil description.    #&lt;Book id: 1, title: \"why's (poignant) Guide to Ruby\", ..., description: nil&gt;        description is nil because you just added it.        You can give my_first_book a description by running    my_first_book.update(description: \"YOUR INSPIRING DESCRIPTION\")        Where YOUR INSPIRING DESCRIPTION is‚Ä¶YOUR INSPIRING DESCRIPTION.    (Don‚Äôt worry about your description being inspiring üòâ)        After you‚Äôve added YOUR INSPIRING DESCRIPTION to my_first_book, you can run my_first_book.description to see the new description.        Go ahead and add descriptions for the of rest your books. Your application‚Äôs database should have seven books, which means you have six descriptions to write.        When you‚Äôre done, exit the rails console and restart your application‚Äôs web server by running rails server.    $ rails console  Loading development environment (Rails 5.0.0.1)  &gt;&gt; my_first_book = Book.first  &gt;&gt; my_first_book.update(description: \"An introductory book to the Ruby programming language, written by why the lucky stiff. The book is unusual among programming books in that it includes quite a lot of strange humor and narrative side tracks which are sometimes completely unrelated to the topic. Many motifs have become inside jokes in the Ruby community, such as references to the words 'chunky bacon'. The book includes many characters which have become popular as well, particularly the cartoon foxes and Trady Blix, a large black feline friend of why's, who acts as a guide to the foxes and occasionally teaches them some Ruby.\")     (0.1ms)  begin transaction    SQL (0.6ms)  UPDATE \"books\" SET \"updated_at\" = ?, \"description\" = ? WHERE \"books\".\"id\" = ?  [[\"updated_at\", 2016-12-27 02:28:28 UTC], [\"description\", \"An introductory book to the Ruby programming language, written by why the lucky stiff. The book is unusual among programming books in tha    t it includes quite a lot of strange humor and narrative side tracks which are sometimes completely unrelated to the topic. Many motifs have become inside jokes in the Ruby comm    unity, such as references to the words 'chunky bacon'. The book includes many characters which have become popular as well, particularly the cartoon foxes and Trady Blix, a larg    e black feline friend of why's, who acts as a guide to the foxes and occasionally teaches them some Ruby.\"], [\"id\", 1]]     (2.3ms)  commit transaction  =&gt; true  &gt;&gt; my_first_book.description  =&gt; \"An introductory book to the Ruby programming language, written by why the lucky stiff. The book is unusual among programming books in that it includes quite a lot of strange humor and narrative side tracks which are sometimes completely unrelated to the topic. Many motifs have become inside jokes in the Ruby community, such as references to the words 'chunky bacon'. The book includes many characters which have become popular as well, particularly the cartoon foxes and Trady Blix, a large black feline friend of why's, who acts as a guide to the foxes and occasionally teaches them some Ruby.\"  ...  &gt;&gt; exit      Now that your books have descriptions, you can share them with the WORLD!    Reopen app/views/books/show.html.erb and add the book‚Äôs description to the end of the definition list.        What did you come up with? You should‚Äôve added the following lines:    &lt;dt&gt;Description&lt;/dt&gt;&lt;dd&gt;&lt;%= @book.description %&gt;&lt;/dd&gt;            Save your changes and view your beautiful descriptions in your browser.  12345678910111213141516171819  &lt;dl&gt;    &lt;dt&gt;Id&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.id %&gt;&lt;/dd&gt;    &lt;dt&gt;Title&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.title %&gt;&lt;/dd&gt;    &lt;dt&gt;Author&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.author %&gt;&lt;/dd&gt;    &lt;dt&gt;Price&lt;/dt&gt;    &lt;dd&gt;&lt;%= number_to_currency(@book.price_cents / 100.0) %&gt;&lt;/dd&gt;    &lt;dt&gt;Quantity&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.quantity %&gt;&lt;/dd&gt;    &lt;dt&gt;Description&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.description %&gt;&lt;/dd&gt;  &lt;/dl&gt;Links!Now you have a lovely books index and lots of individual book views, but there is no relationship between the two. Let‚Äôs link them!Since you have a books index with a little bit of book information and book views lots of specific information, it makes sense to link from the books index to specific book pages.If a visitor to your bookstore is really excited to see a book on the index, they could click on that book to get more detailed information about it.We‚Äôll update the index so book titles link to their book‚Äôs page.In HTML, you add links using anchor elements (&lt;a&gt; tags). Anchor elements link to other pages by their href attribute.Fortunately, Rails gives us a convience method to abstract away some of that work.      In your text editor, open app/views/books/index.html.erb.        Change the list item that renders book titles and authors to this:    &lt;li&gt;  &lt;%= link_to(book.title, book_path(book)) %&gt; by &lt;%= book.author %&gt;&lt;/li&gt;        Rails gives us a link_to method we can use to create anchor elements.    First, you give it the text for the link. In this case, we want to use the book‚Äôs title as the link text.    Then, you give it the path for the link. We want the link to go to /books/:id, but we passed it book_path(book). book_path(book) is another Rails method. Long story short, it generates /books/:id for the given book.        Save your changes and go to http://localhost:3000/books. Try clicking all the links!    When you‚Äôre done, stop your application‚Äôs web server.  123456789  &lt;h1&gt;Welcome to My Super Rad Bookstore!&lt;/h1&gt;  &lt;ul&gt;    &lt;% @books.each do |book| %&gt;      &lt;li&gt;        &lt;%= link_to(book.title, book_path(book)) %&gt; by &lt;%= book.author %&gt;      &lt;/li&gt;    &lt;% end %&gt;  &lt;/ul&gt;",
        "url": "/rails_tutorial/tutorial/chapter_04/"
      }
      ,
    
      "tutorial-chapter-05": {
        "title": "Creating Books Through the Browser",
        "content": "Creating Books Through the BrowserSo far you‚Äôve created books on the rails console. It works, but it‚Äôs not the best experience. In most web applications, you enter data through‚Ä¶the web.Your bookstore is a web application, so let‚Äôs treat it like one. Let‚Äôs set up your application so you can create books from your browser.      Open Terminal and go to the bookstore directory.        Now, run rake routes.    We‚Äôve worked through a couple of the books routes. First, we used the index action to list all your application‚Äôs books. Then, we used the show action to show details for a given book.    Now, we‚Äôll use the new action to create a new book.        The path for the new action is /books/new.    new_book GET    /books/new(.:format)      books#new        Let‚Äôs try going to that path.    $ pwd  /Users/awesomesauce/Projects/bookstore  $ rake routes     Prefix Verb   URI Pattern               Controller#Action      books GET    /books(.:format)          books#index            POST   /books(.:format)          books#create   new_book GET    /books/new(.:format)      books#new  edit_book GET    /books/:id/edit(.:format) books#edit       book GET    /books/:id(.:format)      books#show            PATCH  /books/:id(.:format)      books#update            PUT    /books/:id(.:format)      books#update            DELETE /books/:id(.:format)      books#destroy      In Terminal, start your application‚Äôs web server by running rails server.        Now, try going to http://localhost:3000/books/new.        You got an error, but doesn‚Äôt it look familiar?    Why you think you got an Unknown action error?    $ rails server  =&gt; Booting Puma  =&gt; Rails 5.0.0.1 application starting in development on http://localhost:3000  =&gt; Run `rails server -h` for more startup optionsThe error message gives you a hint as to why you‚Äôre getting an Unknown action error.The action 'new' could not be found for BooksControllerWhen you make a request to /books/new, your request gets routed to the BooksController new action. What does your BooksController look like? Does it have a new action?The BooksController doesn‚Äôt have a new action because we haven‚Äôt defined it yet.      In your text editor, open the BooksController (app/controllers/boooks_controller.rb).        At the end of the BooksController add the new method.    def newend            Save your changes, and revisit http://localhost:3000/books/new.  12345678910111213  class BooksController &lt; ApplicationController    def index      @books = Book.all    end    def show      @id = params[:id]      @book = Book.find(@id)    end    def new    end  endAnother error, but it should also look familiar.BooksController#new is missing a template for this request format and variant.You‚Äôve added the new method to the BooksController, but you haven‚Äôt created the new action‚Äôs template.Let‚Äôs add it!      Go back to terminal and stop your application‚Äôs web server by running Ctrl-C.        Now, run touch app/views/books/new.html.erb to create the new action‚Äôs template.        Restart your application‚Äôs web server and revisit http://localhost:3000/books/new. What do you see?    A blank page! üéâ    $ rails server  ...  ^CExiting  $ touch app/views/books/new.html.erb  $ rails server  =&gt; Booting Puma  =&gt; Rails 5.0.0.1 application starting in development on http://localhost:3000  =&gt; Run `rails server -h` for more startup optionsA Little About FormsData is usually added to web applications through forms.You probably have never noticed them, but forms are everywhere on the internet. When you login to a site, you enter your credentials into a form. When you post a status on Facebook, you enter your status into a form. When you‚Äôre Googling for programming resources, you enter your search terms into a form.After you add your data to a form, you submit it by clicking a submit button. For example, a login form might have a submit button that says ‚ÄúLogin‚Äù.We‚Äôre going to use forms to create new books in your application.      In your text editor, open app/views/books/new.html.erb and add the following code:    &lt;%= form_for(@book) do |f| %&gt;&lt;% end %&gt;        form_for is a method provided by Rails. It provides a consistent interface to build forms inside Rails applications.    Here, we‚Äôre passing @book to form_for because we want to create a form for a book.    form_for takes a block as its last argument. We haven‚Äôt done anything interesting inside the block, but that‚Äôll change soon üòâ        Save your changes and revisit http://localhost:3000/books/new.  12  &lt;%= form_for(@book) do |f| %&gt;  &lt;% end %&gt;Hmm‚Ä¶an error.You‚Äôre seeing an ArgumentError in Books#new. There‚Äôs a lot going on in the error, but the message has a helpful hint.First argument in form cannot contain nil or be emptyRemember the code we used to start the form?&lt;%= form_for(@book) do |f| %&gt;@book is the first argument in the form, so the error is telling us @book must be nil or empty.How could @book be nil?      Open the BooksController in your text editor and take a look at the new method.    Is @book defined inside in the new method?    def newend        It‚Äôs nowhere to be found! That explains that error üòÖ  12345678910111213  class BooksController &lt; ApplicationController    def index      @books = Book.all    end    def show      @id = params[:id]      @book = Book.find(@id)    end    def new    end  endLet‚Äôs fix that error.      Inside the BooksController new method, add the following line:    @book = Book.new        @book is set to be a new book because we want to create a form for new books.        Save your changes and revisit http://localhost:3000/books/new.    No errors! But we still have a blank page. Let‚Äôs start building out that form.  1234567891011121314  class BooksController &lt; ApplicationController    def index      @books = Book.all    end    def show      @id = params[:id]      @book = Book.find(@id)    end    def new      @book = Book.new    end  end      In your text editor, open app/views/books.new.html.erb.        Inside the form_for block, add the following:    &lt;ul&gt;  &lt;li&gt;    &lt;%= f.label :title %&gt;    &lt;%= f.text_field :title %&gt;  &lt;/li&gt;  &lt;li&gt;    &lt;%= f.label :author %&gt;    &lt;%= f.text_field :author %&gt;  &lt;/li&gt;&lt;/ul&gt;        We‚Äôre putting your form elements inside an unordered list. The form will have two fields, one for title and one for author.    f.label defines labels for each field.    f.text_field creates a text input field for each field.        Save your changes and revisit http://localhost:3000/books/new.    Can you match the code you added to the different elements on the page?  12345678910111213  &lt;%= form_for(@book) do |f| %&gt;    &lt;ul&gt;      &lt;li&gt;        &lt;%= f.label :title %&gt;        &lt;%= f.text_field :title %&gt;      &lt;/li&gt;      &lt;li&gt;        &lt;%= f.label :author %&gt;        &lt;%= f.text_field :author %&gt;      &lt;/li&gt;    &lt;/ul&gt;  &lt;% end %&gt;      Your new book form has fields for title and author.    Try adding a field for the price. Remember, we named the field price_cents.        What did you come up with? If you followed the pattern used for the other two fields, you probably came up with something like this:    &lt;li&gt;  &lt;%= f.label :price_cents %&gt;  &lt;%= f.text_field :price_cents %&gt;&lt;/li&gt;        That works well, but price_cents isn‚Äôt a text field. It‚Äôs a number.    To make it a number field, simply change    &lt;%= f.text_field :price_cents %&gt;        to    &lt;%= f.number_field :price_cents %&gt;            Your full solution should look like this:    &lt;li&gt;  &lt;%= f.label :price_cents %&gt;  &lt;%= f.number_field :price_cents %&gt;&lt;/li&gt;        Update your solution, save your changes, and revisit http://localhost:3000/books/new.    Does the price_cents field differ from other fields on the page?  1234567891011121314151617  &lt;ul&gt;    &lt;li&gt;      &lt;%= f.label :title %&gt;      &lt;%= f.text_field :title %&gt;    &lt;/li&gt;    &lt;li&gt;      &lt;%= f.label :author %&gt;      &lt;%= f.text_field :author %&gt;    &lt;/li&gt;    &lt;li&gt;      &lt;%= f.label :price_cents %&gt;      &lt;%= f.number_field :price_cents %&gt;    &lt;/li&gt;  &lt;/ul&gt;&lt;% end %&gt;We have a couple more fields to add to the form. We need fields for quantity and description.      Add quantity to your form as a number_field.        Add description to your form as a text_area.    (text_area differs from text_field by offering more space for text - which is useful for long descriptions.)        What does your solution look like? Your complete form should look like this:    &lt;%= form_for(@book) do |f| %&gt;  &lt;ul&gt;    &lt;li&gt;      &lt;%= f.label :title %&gt;      &lt;%= f.text_field :title %&gt;    &lt;/li&gt;    &lt;li&gt;      &lt;%= f.label :author %&gt;      &lt;%= f.text_field :author %&gt;    &lt;/li&gt;    &lt;li&gt;      &lt;%= f.label :price_cents %&gt;      &lt;%= f.number_field :price_cents %&gt;    &lt;/li&gt;    &lt;li&gt;      &lt;%= f.label :quantity %&gt;      &lt;%= f.number_field :quantity %&gt;    &lt;/li&gt;    &lt;li&gt;      &lt;%= f.label :description %&gt;      &lt;%= f.text_area :description %&gt;    &lt;/li&gt;  &lt;/ul&gt;&lt;% end %&gt;            Update your solution to match this solution and save your changes.  Now you have a beautiful form full of fields. You can enter so much book data! üòçBut there‚Äôs no way for you to save that data in your application‚Äôs database üòûDon‚Äôt worry! We can fix that!      At the end of the form_for block`, add the following line:    &lt;%= f.submit %&gt;        This will add a submission button to your form.        Save your changes and revisit http://localhost:3000/books/new.    f.submit generates a button labeled ‚ÄúCreate Book‚Äù.  12345678910111213141516171819  &lt;%= form_for(@book) do |f| %&gt;    &lt;ul&gt;      &lt;li&gt;        &lt;%= f.label :title %&gt;        &lt;%= f.text_field :title %&gt;      &lt;/li&gt;      &lt;li&gt;        &lt;%= f.label :author %&gt;        &lt;%= f.text_field :author %&gt;      &lt;/li&gt;      &lt;li&gt;        &lt;%= f.label :price_cents %&gt;        &lt;%= f.number_field :price_cents %&gt;      &lt;/li&gt;    &lt;/ul&gt;    &lt;%= f.submit %&gt;  &lt;% end %&gt;      Now that you have a form with a shiny ‚ÄúCreate Book‚Äù button, why don‚Äôt you try creating a book?    Fill out the form and click ‚ÄúCreate Book‚Äù.        Error? ERROR?!        You‚Äôre getting an Unknown action error that says ‚ÄúThe action ‚Äòcreate‚Äô could not be found for BooksController‚Äù.    Huh?    We‚Äôve been working with the BooksController new action? How did we end up with an error for the create action?  Take a look at what happened in your application‚Äôs web server when you clicked ‚ÄúCreate Book‚Äù.Started POST \"/books\" for ::1 at 2016-12-27 14:32:50 -0500AbstractController::ActionNotFound (The action 'create' could not be found for BooksController):Before the error happened, the server received a POST request to the /books path. This request happened when you clicked the ‚ÄúCreate Book‚Äù button.Your form‚Äôs data was submitted as a POST request to the /books path.Real interesting, right? Let‚Äôs take a look at your application routes again.      Go back to Terminal and stop your application‚Äôs web server by running Ctrl-C. Then, run rake routes.        Take a look at the second row of the routing table.    POST   /books(.:format)          books#create        Does that look familiar? üòâ    POST requests to /books get sent to the BooksController create action!    It looks like we were destined to reach the BooksController create action, but how did the form know to go there?    By default, a form_for with a new record will be wired up to POST requests to its matching create action.    In our case, we setup form_for with a new book. Therefore, the form was setup to POST to the BooksController create action.    Does this make sense to you? If it does, I‚Äôm impressed. I‚Äôm having a hard time understanding it all. üòÖ        Don‚Äôt worry if you don‚Äôt understand everything that is going on. It will make more sense over time.    The key take away here is the new book form gets submitted to the BooksController create action.        Restart your application‚Äôs web server.    $ rails server  ...  ^CExiting  $ rake routes     Prefix Verb   URI Pattern               Controller#Action      books GET    /books(.:format)          books#index            POST   /books(.:format)          books#create   new_book GET    /books/new(.:format)      books#new  edit_book GET    /books/:id/edit(.:format) books#edit       book GET    /books/:id(.:format)      books#show            PATCH  /books/:id(.:format)      books#update            PUT    /books/:id(.:format)      books#update            DELETE /books/:id(.:format)      books#destroy  $ rails server      Open the BooksController in your text editor.        Add a create method to the end of the controller.    def createend            Save your changes and try adding a book again.    Nothing happens! Hey, it‚Äôs better than an error‚Ä¶    class BooksController &lt; ApplicationController    def index      @books = Book.all    end    def show      @id = params[:id]      @book = Book.find(@id)    end    def new      @book = Book.new    end    def create    end  endThe BooksController create action is going to be responsible for using your form data to create a new book.Take a look at the request parameters that are sent when you submit the new book form.Started POST \"/books\" for ::1 at 2016-12-27 15:29:52 -0500Processing by BooksController#create as HTML  Parameters: {\"utf8\"=&gt;\"‚úì\", \"authenticity_token\"=&gt;\"AOZpk66Fc20R/9xHVhxZLiSwsQj29isG2ohi9gS6TKXT0PUP3n9hYJQrPpY8iSx6uessf9Sgsd3Uv3rEuB/TvQ==\", \"book\"=&gt;{\"title\"=&gt;\"The Cat in the Hat\", \"author\"=&gt;\"Dr. Seuss\", \"price_cents\"=&gt;\"500\", \"quantity\"=&gt;\"1000\", \"description\"=&gt;\"That crazy cat!\"}, \"commit\"=&gt;\"Create Book\"}Inside the parameters hash, there‚Äôs a ‚Äúbook‚Äù key with its own hash.\"book\"=&gt;{\"title\"=&gt;\"The Cat in the Hat\", \"author\"=&gt;\"Dr. Seuss\", \"price_cents\"=&gt;\"500\", \"quantity\"=&gt;\"1000\", \"description\"=&gt;\"That crazy cat!\"}This is the server output for the book I was trying to add, but your server output should look similar.(Unless you were trying add The Cat in the Hat. Then, it should look pretty much the same‚Ä¶)To get the book data that‚Äôs POSTed to the server, we need to access the book key in the params hash.      Add the following code to your BooksController create method:    Book.create(title: params[:book][:title], author: params[:book][:author], price_cents: params[:book][:price_cents], quantity: params[:book][:quantity], description: params[:book][:description])        We‚Äôre using Book.create to create a new book. The new book‚Äôs attributes are being set with values from the params hash book key.        Save you changes and try adding a book again.  123456789101112131415161718  class BooksController &lt; ApplicationController    def index      @books = Book.all    end    def show      @id = params[:id]      @book = Book.find(@id)    end    def new      @book = Book.new    end    def create      Book.create(title: params[:book][:title], author: params[:book][:author], price_cents: params[:book][:price_cents], quantity: params[:book][:quantity], description: params[:book][:description])    end  endNothing happened, right?Not exactly‚Ä¶      Go to Terminal and stop your application‚Äôs web server.        Now, run rails console and get the last book in your database.    Does it look familiar?    It‚Äôs the book you created!    Although it looked like nothing happened when you clicked submit, the request made it to the BooksController create action and Book.create was run.        The create action is almost done. Now, we just need make the experience a little better.    Exit rails console and restart your application‚Äôs web server.    $ rails server  ...  ^CExiting  $ rails console  Loading development environment (Rails 5.0.0.1)  &gt;&gt; Book.last    Book Load (0.5ms)  SELECT  \"books\".* FROM \"books\" ORDER BY \"books\".\"id\" DESC LIMIT ?  [[\"LIMIT\", 1]]  =&gt; #&lt;Book id: 8, title: \"The Cat in the Hat\", author: \"Dr. Seuss\", price_cents: 500, created_at: \"2016-12-27 20:46:15\", updated_at: \"2016-12-27 20:46:15\", quantity: 1000, description: \"That crazy cat!\"&gt;  &gt;&gt; exit  $ rails server      In your text editor, open the BooksController.        At the end of the create method, add the following line:    redirect_to books_path        With this change, you‚Äôll be redirected to the books_path after a new book is created.    books_path is a Rails helper method. It evaluates to /books or your book index page.        Save your changes and revisit http://localhost:3000/books/new.    Add a new book and you will be redirected to the books index. The new book will show up at the end of the index.    Magic      12345678910111213141516171819  class BooksController &lt; ApplicationController    def index      @books = Book.all    end    def show      @id = params[:id]      @book = Book.find(@id)    end    def new      @book = Book.new    end    def create      Book.create(title: params[:book][:title], author: params[:book][:author], price_cents: params[:book][:price_cents], quantity: params[:book][:quantity], description: params[:book][:description])      redirect_to books_path    end  endCleanupAh, it feels like we‚Äôve come so far from those days of creating books on the console‚Ä¶What? It hasn‚Äôt been that long?Anyways‚Ä¶Things are coming together nicely. Let‚Äôs take a look at cleaning some stuff up. First, we‚Äôll start with the BooksController.      Open the BooksController in your text editor and take a look at the create method.        In the first line of the create method, you‚Äôre calling Book.create and setting attributes one by one from the params hash.    Book.create(title: params[:book][:title], author: params[:book][:author], price_cents: params[:book][:price_cents], quantity: params[:book][:quantity], description: params[:book][:description])        Do you notice a pattern in the attributes that are being set?    Every attribute that you‚Äôre setting is in params[:book].    title: params[:book][:title]author: params[:book][:author]price_cents: params[:book][:price_cents]...        Since every attribute you‚Äôre setting is in params[:book], we can simplify that line.        Change Book.create from    Book.create(title: params[:book][:title], author: params[:book][:author], price_cents: params[:book][:price_cents], quantity: params[:book][:quantity], description: params[:book][:description])        to    Book.create(params[:book])            Save your changes, revisit http://localhost:3000/books/new, and try creating a book.  12345678910111213141516171819  class BooksController &lt; ApplicationController    def index      @books = Book.all    end    def show      @id = params[:id]      @book = Book.find(@id)    end    def new      @book = Book.new    end    def create      Book.create(params[:book])      redirect_to books_path    end  endSo‚Ä¶that didn‚Äôt work.The change we made is valid, but we‚Äôre running into a Rails security feature.Rails won‚Äôt let you set several attributes at once with data from a request. In this case, the data came from a request you generated. However, it‚Äôs not hard to imagine a malicious user sending harmful data.Before you can set several attributes at once from request data, you have to explicitly state which attributes can be set. That‚Äôs why you‚Äôre seeing an ActiveModel::ForbiddenAttributesError - you haven‚Äôt permitted any attributes.This security feature is called strong parameters.      Reopen your BooksController.        To use strong parameters, change Book.create from    Book.create(params[:book])        to    Book.create(params.require(:book).permit(:title, :author, :price_cents, :quantity, :description)        When we want to create a book from the params hash, the params hash must have a book hash. From the book hash, we‚Äôll get any of the permitted attributes and assign them to the new book.        Save your changes, revisit http://localhost:3000/books/new, and try creating a book again.  12345678910111213141516171819  class BooksController &lt; ApplicationController    def index      @books = Book.all    end    def show      @id = params[:id]      @book = Book.find(@id)    end    def new      @book = Book.new    end    def create      Book.create(params.require(:book).permit(:title, :author, :price_cents, :quantity, :description))      redirect_to books_path    end  endTo create books in the browser, you‚Äôve been going directly to http://localhost:3000/books/new. That works, but it isn‚Äôt very convenient.Let‚Äôs add a link to the book index that will take us to http://localhost:3000/books/new.      Open app/view/books/index.html.erb in your text editor.        After the unordered list, add the following line:    &lt;%= link_to(\"Add a book\", new_book_path) %&gt;        We‚Äôre using the link_to helper to create a link. The link‚Äôs text will be ‚ÄúAdd a book‚Äù, and it will link to the new_book_path (/books/new).        Save your changes and go to http://localhost:3000/books/new.    You should see the new link. Clicking it should take you to the new book form.  1234567891011  &lt;h1&gt;Welcome to My Super Rad Bookstore!&lt;/h1&gt;  &lt;ul&gt;    &lt;% @books.each do |book| %&gt;      &lt;li&gt;        &lt;%= link_to(book.title, book_path(book)) %&gt; by &lt;%= book.author %&gt;      &lt;/li&gt;    &lt;% end %&gt;  &lt;/ul&gt;  &lt;%= link_to(\"Add a book\", new_book_path) %&gt;Now you can add all the books you heart desires from the comfort of your browser.      When you‚Äôre done adding books and basking in the glory, stop your application‚Äôs web server and give yourself a high five.      ",
        "url": "/rails_tutorial/tutorial/chapter_05/"
      }
      ,
    
      "tutorial-chapter-06": {
        "title": "Updating Books",
        "content": "Updating BooksYou have so many books in your bookstore! üéâWhat would happen if you suddenly sold every copy of a book? What about if the price changes?You‚Äôd have to open rails console to change your book‚Äôs data. That doesn‚Äôt sound very great.What if you could update books in your browser? Wouldn‚Äôt that be a little easier?Let‚Äôs make it so you can can update books in the browser.      Open Terminal and go to your bookstore directory. Then, run rake routes.        Now that we want to edit and update books, a couple of rows in the routing table should stand out.    First, take a look at the row with edit_book.    edit_book GET    /books/:id/edit(.:format) books#edit        The path to edit_book is /books/:id/edit. Doesn‚Äôt that look a little familiar? You‚Äôve been going to /books/:id to see the details for a given book. Now, you‚Äôll go to /books/:id/edit to edit the given book.        Start your application‚Äôs web server and go to http://localhost:3000/books. From the index, click the link for why‚Äôs (poignant) Guide to Ruby.    Your browser should have URL of http://localhost:3000/books/1 in its address bar. Edit the URL so it‚Äôs http://localhost:3000/books/1/edit to visit the edit path for why‚Äôs (poignant) Guide to Ruby. Now, try going to the new URL.    $ pwd  /Users/awesomesauce/Projects/bookstore  $ rake routes     Prefix Verb   URI Pattern               Controller#Action      books GET    /books(.:format)          books#index            POST   /books(.:format)          books#create   new_book GET    /books/new(.:format)      books#new  edit_book GET    /books/:id/edit(.:format) books#edit       book GET    /books/:id(.:format)      books#show            PATCH  /books/:id(.:format)      books#update            PUT    /books/:id(.:format)      books#update            DELETE /books/:id(.:format)      books#destroy  $ rails server  =&gt; Booting PumaYou got an error, right?Good.Can you guess why you‚Äôre seeing an Unknown action error?You‚Äôre getting an Unknown action error because your BooksController doesn‚Äôt have an edit method. Let‚Äôs add it.      Open the BooksController in your text editor. Add the edit method to the end of the controller.    def editend            Try going to http://localhost:3000/books/1/edit again.    What do you think will happen?  12345678910111213141516171819202122  class BooksController &lt; ApplicationController    def index      @books = Book.all    end    def show      @id = params[:id]      @book = Book.find(@id)    end    def new      @book = Book.new    end    def create      Book.create(params.require(:book).permit(:title, :author, :price_cents, :quantity, :description))      redirect_to books_path    end    def edit    end  endDid you guess you‚Äôd see an ActionController::UnknownFormat error? Me either. üòÖHowever, you might have guessed that the request was going to error. You added the edit action to the BooksController, but it doesn‚Äôt have a template to render.Let‚Äôs add it.      Go back to Terminal and stop your application‚Äôs web server.        Run touch app/views/books/edit.html.erb to create the edit book template.        Restart your application‚Äôs web server and revisit http://localhost:3000/books/1/edit.    A blank page has never looked better!    $ rails server  ...  ^CExiting  $ touch app/views/books/edit.html.erb  $ rails serverIn the edit template, we‚Äôll take advantage of forms again. We‚Äôll use them to gather new book data.Before we add the form to the template, let‚Äôs make some of the existing book data available.      Open the BooksController and add the following line inside the edit method:    @book = Book.find(params[:id])        (Doesn‚Äôt that look a lot like the show method?)        Save your changes.  1234567891011121314151617181920212223  class BooksController &lt; ApplicationController    def index      @books = Book.all    end    def show      @id = params[:id]      @book = Book.find(@id)    end    def new      @book = Book.new    end    def create      Book.create(params.require(:book).permit(:title, :author, :price_cents, :quantity, :description))      redirect_to books_path    end    def edit      @book = Book.find(params[:id])    end  endThe edit book form is going be similiar to the new book form.Remember what the new book form looked like?&lt;%= form_for(@book) do |f| %&gt;  &lt;ul&gt;    &lt;li&gt;      &lt;%= f.label :title %&gt;      &lt;%= f.text_field :title %&gt;    &lt;/li&gt;    &lt;li&gt;      &lt;%= f.label :author %&gt;      &lt;%= f.text_field :author %&gt;    &lt;/li&gt;    &lt;li&gt;      &lt;%= f.label :price_cents %&gt;      &lt;%= f.number_field :price_cents %&gt;    &lt;/li&gt;    &lt;li&gt;      &lt;%= f.label :quantity %&gt;      &lt;%= f.number_field :quantity %&gt;    &lt;/li&gt;    &lt;li&gt;      &lt;%= f.label :description %&gt;      &lt;%= f.text_area :description %&gt;    &lt;/li&gt;  &lt;/ul&gt;  &lt;%= f.submit %&gt;&lt;% end %&gt;Let‚Äôs start the edit book form by adding a field to edit the book‚Äôs title.      Open app/views/books/edit.html.erb in your text editor and add the following:    &lt;%= form_for(@book) do |f| %&gt;  &lt;ul&gt;    &lt;li&gt;      &lt;%= f.label :title %&gt;      &lt;%= f.text_field :title %&gt;    &lt;/li&gt;  &lt;/ul&gt;&lt;% end %&gt;            Save your changes and revist http://localhost:3000/books/1/edit.  Whoa! The title is already filled-in!In the BooksController edit method, you found the requested book in your database and assigned it to @book. When you called form_for in app/views/books/edit.html.erb, you passed it @book.Since @book is a book in your database with a title, the title text_field was populated with @book‚Äôs title.(Magic)      Update the form so it has fields for all the book attributes: title, author, price_cents, quantity, and description.    Use the new book form in app/views/books/new.html.erb as an example.        How‚Äôs your form look? It should look like this:    &lt;%= form_for(@book) do |f| %&gt;  &lt;ul&gt;    &lt;li&gt;      &lt;%= f.label :title %&gt;      &lt;%= f.text_field :title %&gt;    &lt;/li&gt;    &lt;li&gt;      &lt;%= f.label :author %&gt;      &lt;%= f.text_field :author %&gt;    &lt;/li&gt;    &lt;li&gt;      &lt;%= f.label :price_cents %&gt;      &lt;%= f.number_field :price_cents %&gt;    &lt;/li&gt;    &lt;li&gt;      &lt;%= f.label :quantity %&gt;      &lt;%= f.number_field :quantity %&gt;    &lt;/li&gt;    &lt;li&gt;      &lt;%= f.label :description %&gt;      &lt;%= f.text_area :description %&gt;    &lt;/li&gt;  &lt;/ul&gt;&lt;% end %&gt;            Update your solution to match this solution. Save your changes and revisit http://localhost:3000/books/1/edit.  12345678910111213141516171819202122232425262728  &lt;%= form_for(@book) do |f| %&gt;    &lt;ul&gt;      &lt;li&gt;        &lt;%= if.label :title %&gt;        &lt;%= f.text_field :title %&gt;      &lt;/li&gt;      &lt;li&gt;        &lt;%= f.label :author %&gt;        &lt;%= f.text_field :author %&gt;      &lt;/li&gt;      &lt;li&gt;        &lt;%= f.label :price_cents %&gt;        &lt;%= f.number_field :price_cents %&gt;      &lt;/li&gt;      &lt;li&gt;        &lt;%= f.label :quantity %&gt;        &lt;%= f.number_field :quantity %&gt;      &lt;/li&gt;      &lt;li&gt;        &lt;%= f.label :description %&gt;        &lt;%= f.text_area :description %&gt;      &lt;/li&gt;    &lt;/ul&gt;  &lt;% end %&gt;Now you can edit all your book data, but there‚Äôs no way to save your changes.We need to add a submit button so you can submit your changes via the form.      Open app/views/books/edit.html.erb and add a submit button as the last line inside the form_for block.    &lt;%= f.submit %&gt;        This will add a button to your form labeled ‚ÄúUpdate Book‚Äù. Magic        Save your changes and revisit http://localhost:3000/books/1/edit. Try making a change and submitting the form.  123456789101112131415161718192021222324252627282930  &lt;%= form_for(@book) do |f| %&gt;    &lt;ul&gt;      &lt;li&gt;        &lt;%= f.label :title %&gt;        &lt;%= f.text_field :title %&gt;      &lt;/li&gt;      &lt;li&gt;        &lt;%= f.label :author %&gt;        &lt;%= f.text_field :author %&gt;      &lt;/li&gt;      &lt;li&gt;        &lt;%= f.label :price_cents %&gt;        &lt;%= f.number_field :price_cents %&gt;      &lt;/li&gt;      &lt;li&gt;        &lt;%= f.label :quantity %&gt;        &lt;%= f.number_field :quantity %&gt;      &lt;/li&gt;      &lt;li&gt;        &lt;%= f.label :description %&gt;        &lt;%= f.text_area :description %&gt;      &lt;/li&gt;    &lt;/ul&gt;    &lt;%= f.submit %&gt;  &lt;% end %&gt;We‚Äôve been through this drill before‚Ä¶      Open the BooksController and add an update method to the end of it.        Save your changes and revisit http://localhost:3000/books/1/edit. Try making a change to the book and submitting the form.  1234567891011121314151617181920212223242526  class BooksController &lt; ApplicationController    def index      @books = Book.all    end    def show      @id = params[:id]      @book = Book.find(@id)    end    def new      @book = Book.new    end    def create      Book.create(params.require(:book).permit(:title, :author, :price_cents, :quantity, :description))      redirect_to books_path    end    def edit      @book = Book.find(params[:id])    end    def update    end  endNothing happened!The form is being submitted to the BooksController update method, and the method is‚Ä¶empty. I think I‚Äôd be more surprised if something did happen. üòâThe update method should probably do something. Maybe it should update the book.      First, let‚Äôs find the book you‚Äôre trying to update.    Open the BooksController and add the following line insided the update method:    book = Book.find(params[:id])        We‚Äôve done this in a few of the BooksController methods.    Now that we have the book, how will we update it?    You‚Äôve updated books before. Do you remember when you added descriptions to all your books? How did you do it?    You did something along the lines of my_first_book.update(description: \"Woooo\").    You called the update method on each of your books to give them descriptions. We‚Äôll use update again to make the requested changes.        We could simply do book.update(params[:book]), but that won‚Äôt work because of strong parameters.    Instead, add the following line to the end of the BooksController update method.    book.update(params.require(:book).permit(:title, :author, :price_cents, :quantity, :description))            Save your changes, revisit http://localhost:3000/books/1/edit, make some changes, and submit that form!  12345678910111213141516171819202122232425262728  class BooksController &lt; ApplicationController    def index      @books = Book.all    end    def show      @id = params[:id]      @book = Book.find(@id)    end    def new      @book = Book.new    end    def create      Book.create(params.require(:book).permit(:title, :author, :price_cents, :quantity, :description))      redirect_to books_path    end    def edit      @book = Book.find(params[:id])    end    def update      book = Book.find(params[:id])      book.update(params.require(:book).permit(:title, :author, :price_cents, :quantity, :description))    end  endWhere are my changes?!Nothing happened, right?Go to http://localhost:3000/books/1, and make sure to refresh the page.Your change is there!Don‚Äôt believe me? Try making another change?How are changes happening when it looks like the form isn‚Äôt being submitted?The form is being submitted to the BooksController update method, and the requested changes are being made to the book. But that‚Äôs where the update method ends. It looks like nothing happened because there‚Äôs no visual queue that something happened.After a book is updated, let‚Äôs redirect to that book‚Äôs details. That way, we can see the changes.      At the end of the BooksController update method, add the following line:    redirect_to book_path(book)            Save your changes, revisit http://localhost:3000/books/1/edit, and try making another change. When you submit your changes, you should be redirected to the first book‚Äôs details. Keep an out to see your changes.  1234567891011121314151617181920212223242526272829  class BooksController &lt; ApplicationController    def index      @books = Book.all    end    def show      @id = params[:id]      @book = Book.find(@id)    end    def new      @book = Book.new    end    def create      Book.create(params.require(:book).permit(:title, :author, :price_cents, :quantity, :description))      redirect_to books_path    end    def edit      @book = Book.find(params[:id])    end    def update      book = Book.find(params[:id])      book.update(params.require(:book).permit(:title, :author, :price_cents, :quantity, :description))      redirect_to book_path(book)    end  endYay! In addition to adding books from the browser, you can now edit books too.Before we move on, let‚Äôs take a look at cleaning up some stuff. Let‚Äôs start with the BooksController.In both the create and update methods of the BooksController, you‚Äôre authorizing and getting the same params.def create  Book.create(params.require(:book).permit(:title, :author, :price_cents, :quantity, :description))  ...end...def update  ...  book.update(params.require(:book).permit(:title, :author, :price_cents, :quantity, :description))  ...endFortunately, there‚Äôs a convention to help manage this shared bit of code.      Open the BooksController in your text editor, and add the following code to the end of it:    def book_params  params.require(:book).permit(:title, :author, :price_cents, :quantity, :description)end        By defining a new book_params method, we have one place to deal with getting and authorizing book params.        Now, update the create method so it uses book_params. Change    Book.create(params.require(:book).permit(:title, :author, :price_cents, :quantity, :description))        to    Book.create(book_params)            Make the same change to the update method.        Save your changes and try creating and editing books. Everything should still work the same as it did before these changes.  123456789101112131415161718192021222324252627282930313233  class BooksController &lt; ApplicationController    def index      @books = Book.all    end    def show      @id = params[:id]      @book = Book.find(@id)    end    def new      @book = Book.new    end    def create      Book.create(book_params)      redirect_to books_path    end    def edit      @book = Book.find(params[:id])    end    def update      book = Book.find(params[:id])      book.update(book_params)      redirect_to book_path(book)    end    def book_params      params.require(:book).permit(:title, :author, :price_cents, :quantity, :description)    end  endLet‚Äôs make one more change to improve the edit workflow.Right now, you can only edit books if you know the edit_book_path URL. Let‚Äôs make this a little user-friendly by adding a link to the edit page from the book show page.      Open app/views/books/show.html.erb in your text editor. Add the following line to the end of the file:    &lt;%= link_to \"Edit book\", edit_book_path(@book) %&gt;        This will create a link with text ‚ÄúEdit book‚Äù. It will link to the edit_book_path for @book which will evaluate to /books/:id/edit.    Adding the link here works really well because we already have the book we want to edit as @book.        Save your changes and visit a few books. Clicking the ‚ÄúEdit book‚Äù link should take you to the edit page for the book you‚Äôre viewing.        When you‚Äôre done exploring, stop your application‚Äôs web server.  123456789101112131415161718192021  &lt;dl&gt;    &lt;dt&gt;Id&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.id %&gt;&lt;/dd&gt;    &lt;dt&gt;Title&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.title %&gt;&lt;/dd&gt;    &lt;dt&gt;Author&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.author %&gt;&lt;/dd&gt;    &lt;dt&gt;Price&lt;/dt&gt;    &lt;dd&gt;&lt;%= number_to_currency(@book.price_cents / 100.0) %&gt;&lt;/dd&gt;    &lt;dt&gt;Quantity&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.quantity %&gt;&lt;/dd&gt;    &lt;dt&gt;Description&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.description %&gt;&lt;/dd&gt;  &lt;/dl&gt;  &lt;%= link_to \"Edit book\", edit_book_path(@book) %&gt;",
        "url": "/rails_tutorial/tutorial/chapter_06/"
      }
      ,
    
      "tutorial-chapter-07": {
        "title": "Styling Your Bookstore",
        "content": "Styling Your BookstoreYour bookstore is really starting to take shape. But doesn‚Äôt it look a little‚Ä¶spartan?Don‚Äôt get me wrong, there‚Äôs a beauty in the simplicity. However, there are a few changes we can make that‚Äôll make your bookstore easier to use.We‚Äôll add a CSS file to add some style rules. Then, we‚Äôll update your templates to take advantage of the new style rules.      Download the stylesheet file bookstore.scss here.        Move bookstore.scss to app/assets/stylesheets.    Rails will automatically load all stylesheet files defined in app/assets/stylesheets.    $ ls -l app/assets/stylesheets  total 16  -rw-r--r--  1 awesomesauce  staff   736 Dec 30 12:13 application.css  -rw-r--r--  1 awesomesauce  staff  2812 Dec 30 12:14 bookstore.scssHey - I thought we were adding a CSS file?! What‚Äôs a .scss file?bookstore.scss is a Sass file!As they say at the top of their homepage, Sass is ‚ÄúCSS with superpowers.‚ÄùWe can use both Sass and CSS files in your application because Rails ships with support for both.If you‚Äôre curious, you can read the Sass docs to learn more about it.Now that your application has some styles, let‚Äôs use them!Let‚Äôs start by adding a header that will get rendered on every page.      Open app/views/layouts/application.html.erb in your text editor.    This file makes up the skeleton of every page in your application.    All your content is rendered inside the body tag.    &lt;body&gt;  &lt;%= yield %&gt;&lt;/body&gt;            After the beginning of the body tag, add the following code:    &lt;div class=\"navigation\"&gt;  &lt;div class=\"center\"&gt;    &lt;%= link_to \"My Super Rad Bookstore\", books_path %&gt;  &lt;/div&gt;&lt;/div&gt;        On every page of your bookstore, there will be a header with a link labeled ‚ÄúMy Super Rad Bookstore‚Äù that links to the books index. No matter what page your on, you‚Äôll be able to get back to your bookstore‚Äôs main page.        Now, let‚Äôs add a containing div around your application‚Äôs content.    Inside the body tag, change the yield line from    &lt;%= yield %&gt;        to    &lt;div class=\"container\"&gt;  &lt;%= yield %&gt;&lt;/div&gt;        This let‚Äôs us add some styling to make your application‚Äôs content consistent across the different pages.        Save your changes.  12345678910111213141516171819202122  &lt;!DOCTYPE html&gt;  &lt;html&gt;    &lt;head&gt;      &lt;title&gt;Bookstore&lt;/title&gt;      &lt;%= csrf_meta_tags %&gt;      &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;      &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;    &lt;/head&gt;    &lt;body&gt;      &lt;div class=\"navigation\"&gt;        &lt;div class=\"center\"&gt;          &lt;%= link_to \"My Super Rad Bookstore\", books_path %&gt;        &lt;/div&gt;      &lt;/div&gt;      &lt;div class=\"container\"&gt;        &lt;%= yield %&gt;      &lt;/div&gt;    &lt;/body&gt;  &lt;/html&gt;      Now, let‚Äôs take a look at the books index. Open app/views/books/index.html.erb.        At the end of the template, you have a link to add a book.    Let‚Äôs make that link look like a button. This will help people recognize the link as an actionable item.        Change the link from    &lt;%= link_to(\"Add a book\", new_book_path) %&gt;        to    &lt;%= link_to(\"Add a book\", new_book_path, class: \"button\") %&gt;        With this change, you‚Äôre adding a CSS class called button to the link. The CSS class button is defined in bookstore.scss.        Save your changes.  1234567891011  &lt;h1&gt;Welcome to My Super Rad Bookstore!&lt;/h1&gt;  &lt;ul&gt;    &lt;% @books.each do |book| %&gt;      &lt;li&gt;        &lt;%= link_to(book.title, book_path(book)) %&gt; by &lt;%= book.author %&gt;      &lt;/li&gt;    &lt;% end %&gt;  &lt;/ul&gt;  &lt;%= link_to(\"Add a book\", new_book_path, class: \"button\") %&gt;Now that we have some styles in place, let‚Äôs see what they look like.      Go to Terminal and make sure you‚Äôre in the bookstore directory.        Now, start your application‚Äôs web server and go to http://localhost:3000/books.    $ pwd  /Users/alimi/Projects/bookstore  $ rails server  =&gt; Booting Puma  =&gt; Rails 5.0.0.1 application starting in development on http://localhost:3000Wow! Doesn‚Äôt it look so different?!Let‚Äôs add a few more finishing touches.      Open app/views/books/new.html.erb.        We‚Äôll add the button CSS class to the form submission button to make it look like a‚Ä¶button.    Trust me, it‚Äôll be a really good looking button üòâ        Change the submit button from    &lt;%= f.submit %&gt;        to    &lt;%= f.submit(class: \"button\" )%&gt;        This change is very simmilar to the change we made to the ‚ÄúAdd a book‚Äù link. Before, you weren‚Äôt passing any arguments to the submit button. Now, you‚Äôre setting the class to button.        Save your changes and go to the new book page to see your changes.  123456789101112131415161718192021222324252627282930  &lt;%= form_for(@book) do |f| %&gt;    &lt;ul&gt;      &lt;li&gt;        &lt;%= f.label :title %&gt;        &lt;%= f.text_field :title %&gt;      &lt;/li&gt;      &lt;li&gt;        &lt;%= f.label :author %&gt;        &lt;%= f.text_field :author %&gt;      &lt;/li&gt;      &lt;li&gt;        &lt;%= f.label :price_cents %&gt;        &lt;%= f.number_field :price_cents %&gt;      &lt;/li&gt;      &lt;li&gt;        &lt;%= f.label :quantity %&gt;        &lt;%= f.number_field :quantity %&gt;      &lt;/li&gt;      &lt;li&gt;        &lt;%= f.label :description %&gt;        &lt;%= f.text_area :description %&gt;      &lt;/li&gt;    &lt;/ul&gt;    &lt;%= f.submit(class: \"button\") %&gt;  &lt;% end %&gt;There‚Äôs one more link we‚Äôll style as a button. Can you guess which one it is?It‚Äôs a sneaky one - the ‚ÄúEdit book‚Äù link on the book details page.Once again, we‚Äôll style the link as a button to help people recognize it as an actionable item.      Open app/views/books/show.html.erb.        Just as we‚Äôve done before, add the button class as the last option to the link.        Save your changes and visit http://localhost:3000/books/1 to see your changes.  123456789101112131415161718192021  &lt;dl&gt;    &lt;dt&gt;Id&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.id %&gt;&lt;/dd&gt;    &lt;dt&gt;Title&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.title %&gt;&lt;/dd&gt;    &lt;dt&gt;Author&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.author %&gt;&lt;/dd&gt;    &lt;dt&gt;Price&lt;/dt&gt;    &lt;dd&gt;&lt;%= number_to_currency(@book.price_cents / 100.0) %&gt;&lt;/dd&gt;    &lt;dt&gt;Quantity&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.quantity %&gt;&lt;/dd&gt;    &lt;dt&gt;Description&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.description %&gt;&lt;/dd&gt;  &lt;/dl&gt;  &lt;%= link_to(\"Edit book\", edit_book_path(@book), class: \"button\") %&gt;Finally, we have one more button to style as a‚Ä¶button.      Open app/views/books/edit.html.erb.        Just like the submit button on the new book template, add the button class as the last option to the edit book template‚Äôs submit button.        Save your changes, go to http://localhost:3000/books/1/edit, and admire your freshly styled button.  123456789101112131415161718192021222324252627282930  &lt;%= form_for(@book) do |f| %&gt;    &lt;ul&gt;      &lt;li&gt;        &lt;%= f.label :title %&gt;        &lt;%= f.text_field :title %&gt;      &lt;/li&gt;      &lt;li&gt;        &lt;%= f.label :author %&gt;        &lt;%= f.text_field :author %&gt;      &lt;/li&gt;      &lt;li&gt;        &lt;%= f.label :price_cents %&gt;        &lt;%= f.number_field :price_cents %&gt;      &lt;/li&gt;      &lt;li&gt;        &lt;%= f.label :quantity %&gt;        &lt;%= f.number_field :quantity %&gt;      &lt;/li&gt;      &lt;li&gt;        &lt;%= f.label :description %&gt;        &lt;%= f.text_area :description %&gt;      &lt;/li&gt;    &lt;/ul&gt;    &lt;%= f.submit(class: \"button\") %&gt;  &lt;% end %&gt;Your bookstore looks sooooo purrdy üòçBut there‚Äôs one thing that‚Äôs kinda bugging me. Take a look at http://localhost:3000.The default Rails homepage is a great way to verify things are working when you‚Äôre just getting started, but we‚Äôre well past that.The books index at http://localhost:3000/books is your application‚Äôs true homepage, so let‚Äôs treat it that way!To make the books index your application‚Äôs homepage, we‚Äôll need to update your application‚Äôs routes.      Open config/routes.rb in your text editor.        Before the line with resources :books, add the following line:    root \"books#index\"        This will update your application‚Äôs routes so requests to http://localhost:3000 get routed to the BooksController index action.        Save your changes.  123456  Rails.application.routes.draw do    # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html    root \"books#index\"    resources :books  endLet‚Äôs take a look at how the change to config/routes.rb changed your application‚Äôs routes.      Go back to Terminal, stop your application‚Äôs web server, and run rake routes.    You might not notice it, but there‚Äôs a new row at the beginning of the table.    root GET    /                         books#index        The root route has an empty path (there‚Äôs nothing after /).        It‚Äôs a small change, but it‚Äôs pretty powerful. Restart your application‚Äôs web server and go to http://localhost:3000.    $ rails server  ...  ^CExiting  $ rake routes     Prefix Verb   URI Pattern               Controller#Action       root GET    /                         books#index      books GET    /books(.:format)          books#index            POST   /books(.:format)          books#create   new_book GET    /books/new(.:format)      books#new  edit_book GET    /books/:id/edit(.:format) books#edit       book GET    /books/:id(.:format)      books#show            PATCH  /books/:id(.:format)      books#update            PUT    /books/:id(.:format)      books#update            DELETE /books/:id(.:format)      books#destroy  $ rails serverNow that your bookstore has a root route, let‚Äôs make one more change.      Open app/views/layouts/application.html.erb.        Change the ‚ÄúMy Super Rad Bookstore‚Äù link from    &lt;%= link_to \"My Super Rad Bookstore\", books_path %&gt;        to    &lt;%= link_to \"My Super Rad Bookstore\", root_path %&gt;        By changing the link to root_path, we can always be sure that it will go to your application‚Äôs homepage.        Save your changes and take your updated bookstore for a spin. When you‚Äôre done, stop your application‚Äôs web server.  12345678910111213141516171819202122  &lt;!DOCTYPE html&gt;  &lt;html&gt;    &lt;head&gt;      &lt;title&gt;Bookstore&lt;/title&gt;      &lt;%= csrf_meta_tags %&gt;      &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;      &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;    &lt;/head&gt;    &lt;body&gt;      &lt;div class=\"navigation\"&gt;        &lt;div class=\"center\"&gt;          &lt;%= link_to \"My Super Rad Bookstore\", root_path %&gt;        &lt;/div&gt;      &lt;/div&gt;      &lt;div class=\"container\"&gt;        &lt;%= yield %&gt;      &lt;/div&gt;    &lt;/body&gt;  &lt;/html&gt;",
        "url": "/rails_tutorial/tutorial/chapter_07/"
      }
      ,
    
      "tutorial-chapter-08": {
        "title": "Deleting a Book",
        "content": "Deleting a BookYour bookstore is starting to feel like a fully featured application. You can list, view, add, and edit books. Is there anything else you might want to do with your books?Maybe you accidentally added a book you don‚Äôt have, or a book is no longer available. When these situations happen, wouldn‚Äôt it be nice if you could delete the book?Let‚Äôs add the ability to delete books.Let‚Äôs start by looking at your application‚Äôs routes.      Open Terminal and go to the bookstore directory.        Now, run rake routes.    Can you guess which path we‚Äôll use to delete a book?    It‚Äôs in the last row of the routing table:    DELETE /books/:id(.:format)      books#destroy        A DELETE request to /books/:id will get routed to the BooksController destroy action.        Let‚Äôs try visiting that path.    Start your application‚Äôs web server and go to http://localhost:3000/books/1.    $ pwd  /Users/awesomesauce/Projects/bookstore  $ rake routes     Prefix Verb   URI Pattern               Controller#Action       root GET    /                         books#index      books GET    /books(.:format)          books#index            POST   /books(.:format)          books#create   new_book GET    /books/new(.:format)      books#new  edit_book GET    /books/:id/edit(.:format) books#edit       book GET    /books/:id(.:format)      books#show            PATCH  /books/:id(.:format)      books#update            PUT    /books/:id(.:format)      books#update            DELETE /books/:id(.:format)      books#destroy  $ rails server  =&gt; Booting Puma  =&gt; Rails 5.0.0.1 application starting in development on http://localhost:3000What happened when you went to http://localhost:3000/books/1?You pulled up the details for the first book in your application‚Äôs database.But I thought we were going to be deleting booksAll Kinds of RequestsWhen you visit http://localhost:3000/books/1, you send a GET request to your application‚Äôs web server. GET requests to /books/:id don‚Äôt have anything to do with deleting books.book GET    /books/:id(.:format)      books#showGET requests to /books/:id get routed to the BooksController show action. To delete a book, we need to send a DELETE request to /books/:id.DELETE /books/:id(.:format)      books#destroyThis may seem foreign, but we actually ran into this before when we were updating books.To reach the BooksController update action, we also send a request to /books/:id. However, this request is either a PATCH or PUT request.PATCH  /books/:id(.:format)      books#updatePUT    /books/:id(.:format)      books#updateDo you remember doing anything special to handle the different request type? Me neither. üòäYou‚Äôve been sending PATCH/PUT requests to update books thanks to form_for.&lt;%= form_for(@book) do |f| %&gt;With that one line, you created a form that is submitted as a PATCH/PUT request to your application‚Äôs web server.We‚Äôll do something similiar to generate DELETE requests to delete books.To delete a book, we‚Äôll add a ‚ÄúDelete Book‚Äù button to the book details page.      In your text editor, open app/views/books/show.html.erb.        At the end of the file, add the following line:    &lt;%= button_to(\"Delete Book\", book_path(@book), method: :delete, class: \"button danger\") %&gt;        This will create a button labeled ‚ÄúDelete Book‚Äù. When the button is clicked, a request will be sent to book_path for the given book (/books/:id). The request will be a DELETE request because the method is set to :delete.    The button has a couple of styling rules. First, the button will be styled as a‚Ä¶button. We‚Äôll also want the button to stand out because it‚Äôs potentially dangerous. (We don‚Äôt want anyone to accidentally delete a book). To make it stand out, we‚Äôll add the danger class.        Save your changes, and find a book you don‚Äôt like. If you like all your books, find one you could live without. üòù    Once you‚Äôve found that book, go to its details page in the browser. Find the ‚ÄúDelete Book‚Äù button and click it.  1234567891011121314151617181920212223  &lt;dl&gt;    &lt;dt&gt;Id&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.id %&gt;&lt;/dd&gt;    &lt;dt&gt;Title&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.title %&gt;&lt;/dd&gt;    &lt;dt&gt;Author&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.author %&gt;&lt;/dd&gt;    &lt;dt&gt;Price&lt;/dt&gt;    &lt;dd&gt;&lt;%= number_to_currency(@book.price_cents / 100.0) %&gt;&lt;/dd&gt;    &lt;dt&gt;Quantity&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.quantity %&gt;&lt;/dd&gt;    &lt;dt&gt;Description&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.description %&gt;&lt;/dd&gt;  &lt;/dl&gt;  &lt;%= link_to(\"Edit book\", edit_book_path(@book), class: \"button\") %&gt;  &lt;%= button_to(\"Delete Book\", book_path(@book), method: :delete, class: \"button danger\") %&gt;Ahh, another Unknown action error. Feels just like home. üòÖ      Spend a few minutes to see if you can get past the Unknown action error.    Instead of erroring, the button should do nothing.        Did you get it?! The BooksController needs a destroy method.        If you haven‚Äôt already, add an empty destroy method to your BooksController.  123456789101112131415161718192021222324252627282930313233343536  class BooksController &lt; ApplicationController    def index      @books = Book.all    end    def show      @id = params[:id]      @book = Book.find(@id)    end    def new      @book = Book.new    end    def create      Book.create(book_params)      redirect_to books_path    end    def edit      @book = Book.find(params[:id])    end    def update      book = Book.find(params[:id])      book.update(book_params)      redirect_to book_path(book)    end    def book_params      params.require(:book).permit(:title, :author, :price_cents, :quantity, :description)    end    def destroy    end  endNow you have a ‚ÄúDelete Book‚Äù button that doesn‚Äôt do anything. Let‚Äôs change that.      In the BooksController destroy method, you need to first find the book you want to destroy. Then, you‚Äôll want to call destroy on the book to delete it from your database.    book.destroy        After the book is deleted, you‚Äôll redirect to the books index page. This will let you verify that the book is no longer in your database.        Given this description, try wiring up the BooksController destroy method. Use the other BooksController methods for guidance, and compare your work with others around you.        What did you come up with?!    Your solution should look something like this:    def destroy  book = Book.find(params[:id])  book.destroy  redirect_to books_pathend            Don‚Äôt worry if your solution doesn‚Äôt look exactly like this. As long as you‚Äôre destroying the requested book and redirecting to the books index, you‚Äôre good.    If that‚Äôs not the case, update your solution to match this one.        Save your changes and delete some books! üòà        When you‚Äôre done wreaking havoc, stop your application‚Äôs web server.  123456789101112131415161718192021222324252627282930313233343536373839  class BooksController &lt; ApplicationController    def index      @books = Book.all    end    def show      @id = params[:id]      @book = Book.find(@id)    end    def new      @book = Book.new    end    def create      Book.create(book_params)      redirect_to books_path    end    def edit      @book = Book.find(params[:id])    end    def update      book = Book.find(params[:id])      book.update(book_params)      redirect_to book_path(book)    end    def book_params      params.require(:book).permit(:title, :author, :price_cents, :quantity, :description)    end    def destroy      book = Book.find(params[:id])      book.destroy      redirect_to books_path    end  end",
        "url": "/rails_tutorial/tutorial/chapter_08/"
      }
      ,
    
      "tutorial-chapter-09": {
        "title": "Reviewing a Book",
        "content": "Reviewing a BookYour bookstore is full of wonderful books. Although they have some great descriptions, your books deserve great advocates!Your books need reviews. üòâBefore we can add reviews, we need a place to store them. Let‚Äôs add a new table to your database.      Open Terminal and go to your bookstore directory.        Now, run rails generate model review.    You might remember running this command when we created the books table.    rails generate model review creates a bunch of files.    invoke  active_recordcreate    db/migrate/20170103220053_create_reviews.rbcreate    app/models/review.rbinvoke    test_unitcreate      test/models/review_test.rbcreate      test/fixtures/reviews.yml        The first file it creates is a migration file. We‚Äôve already created a few of these in your bookstore application.    $ ls -l db/migratetotal 24-rw-r--r--  1 alimi  staff  230 Dec 30 12:00 20161115030350_create_books.rb-rw-r--r--  1 alimi  staff  125 Dec 30 12:00 20161227020938_add_description_to_books.rb        Migration files always have file names that start with the timestamp of when they were created.    Let‚Äôs take a look at the migration that was generated by rails generate model review.    $ pwd  /Users/awesomesauce/Projects/bookstore  $ rails generate model review        invoke  active_record        create    db/migrate/20170103220053_create_reviews.rb        create    app/models/review.rb        invoke    test_unit        create      test/models/review_test.rb        create      test/fixtures/reviews.yml      In your text editor, open the CreateReviews migration (db/migrations/TIMESTAMP_create_reviews.rb).        Take a look at the change method. It has a create_table block that will create the reviews table.    def change  create_table :reviews do |t|    t.timestamps  endend        If you ran the migration as it is now, your reviews table wouldn‚Äôt have anything other than the created_at and updated_at timestamps. We‚Äôll need to change the create_table block so your new reviews table can store more review related data. üòÑ  12345678  class CreateReviews &lt; ActiveRecord::Migration[5.0]    def change      create_table :reviews do |t|        t.timestamps      end    end  endThe reviews table will need a column to store the text of a review. Let‚Äôs call that column body, and let‚Äôs make it a text column so you can leave long, inspiring reviews.      Using your other migrations as an example, update the create_table block of your CreateReviews migration to add a text column called body to your reviews table.        When you‚Äôre done, save your changes, and run the migration by running rake db:migrate.    If you make any mistakes, you can always undo the migration by running rake db:rollback. Then, you can make changes to your CreateReviews migration and re-run it with rake db:migrate.        How did you update the migration?    You needed to add one line to the create_table block.    t.text :body            If you didn‚Äôt already, add this line to your migration.    If you ran the migration without adding the body column, you‚Äôll need to rollback and re-run the migration.  123456789  class CreateReviews &lt; ActiveRecord::Migration[5.0]    def change      create_table :reviews do |t|        t.text :body        t.timestamps      end    end  endNow that we have reviews, let‚Äôs play with them on the rails console.      Go to Terminal and start the rails console.        You now have a new object you can use: Review.    Try running Review.new. It will return a new, empty Review.    #&lt;Review id: nil, body: nil, created_at: nil, updated_at: nil&gt;        In addition to id, created_at, and updated_at, the new review also has a body.        Using the Review class, create two reviews.    The same methods you used to create books can be used to create reviews.    When you‚Äôre done Review.count should return 2.    $ rails console  Loading development environment (Rails 5.0.0.1)  &gt;&gt; Review.new  =&gt; #&lt;Review id: nil, body: nil, created_at: nil, updated_at: nil&gt;      Did you create two reviews? How did you do it?    Maybe you created a review by using create.    Review.create(body: \"Wow, what a great book!\")        Or maybe you started with a new review and called save on it.    a_new_review = Review.newa_new_review.body = \"10/10 would recommend\"a_new_review.save        You might‚Äôve even come up with something totally different!            If you get 2 when you run Review.count, yay!    If not, use either of the methods we described to create two reviews.  Associating Reviews to BooksNow you have a couple of reviews, but doesn‚Äôt it feel like we‚Äôre missing something?How are these reviews related to books?They‚Äôre not üòÖFortunately, Rails gives us a few tools to associate reviews to books.In this case, we can say a review should only belong to one book. This is called a belongs_to relationship.Let‚Äôs define the belongs_to relationship.      In your text editor, open app/models/review.rb.        Inside the Review class, add the following line.    belongs_to :book        With this change, we‚Äôre setting up your application so a Review belongs_to a Book.        Save your changes.  123  class Review &lt; ApplicationRecord    belongs_to :book  end      Go back to the rails console and run reload! to pick up your changes.        Now, get your first review from the database and assign it to a variable called my_first_review.    my_first_review = Review.first            Let‚Äôs try to get my_first_review‚Äôs book.    Run my_first_review.book.    That returned nil because my_first_review was never associated with a book.        Let‚Äôs try assigning your first book to your first review.    Run the following:    my_first_review.book = Book.first        That returned an error, didn‚Äôt it? üôÉ        It might be hard to see, but you actually got a pretty useful error‚Ä¶    ActiveModel::MissingAttributeError: can't write unknown attribute `book_id`        We‚Äôve defined the belongs_to relationship between review and book, but we need a way to save that relationship in your database. To do that, we‚Äôll need to add a book_id column to your reviews table.        Let‚Äôs make that change to the reviews table, but before you move on exit the rails console.    &gt;&gt; reload!  Reloading...  =&gt; true  &gt;&gt; my_first_review = Review.first    Review Load (0.2ms)  SELECT  \"reviews\".* FROM \"reviews\" ORDER BY \"reviews\".\"id\" ASC LIMIT ?  [[\"LIMIT\", 1]]  =&gt; #&lt;Review id: 1, body: \"Wow, what a great book!\", created_at: \"2017-01-04 02:07:50\", updated_at: \"2017-01-04 02:07:50\"&gt;  &gt;&gt; my_first_review.book  =&gt; nil  &gt;&gt; my_first_review.book = Book.first    Book Load (0.3ms)  SELECT  \"books\".* FROM \"books\" ORDER BY \"books\".\"id\" ASC LIMIT ?  [[\"LIMIT\", 1]]  ActiveModel::MissingAttributeError: can't write unknown attribute `book_id`  ...  &gt;&gt; exitTo add a book_id column to the reviews table, we‚Äôll need a new migration.Remember, editing an old migration would mean rolling back that migration and we don‚Äôt want to do that because that would delete the data in the database.      In Terminal, run rails generate migration add_book_id_to_reviews.    This will generate a new timestamped migration called AddBookIdToReviews.        Do you remember when you added description to the books table?    class AddDescriptionToBooks &lt; ActiveRecord::Migration[5.0]  def change    add_column :books, :description, :text  endend        We‚Äôll want to do something similiar to add the book_id column to the reviews table.        Open the AddBookIdToReviews migration in your text editor (db/migrate/TIMESTAMP_add_book_id_to_reviews.rb).        Using the AddDescriptionToBooks migration as an example, update the AddBookIdToReviews migration so a book_id column is added to the reviews table. The book_id column should be an integer column.    $ rails generate migration add_book_id_to_reviews        invoke  active_record        create    db/migrate/20170104024335_add_book_id_to_reviews.rb      What does your solution look like?    Inside the change method, you should have the following line:    add_column :reviews, :book_id, :integer        This will add a book_id column to the reviews table, and the new column will be an integer column.        Update your solution to match this solution and save your changes.  12345  class AddBookIdToReviews &lt; ActiveRecord::Migration[5.0]    def change      add_column :reviews, :book_id, :integer    end  end      Now go back to Terminal and run your migration!    rake db:migrate            If you pay close attention to the output, you can see the book_id column getting added to the reviews table.    $ rake db:migrate  == 20170104024335 AddBookIdToReviews: migrating ===============================  -- add_column(:reviews, :book_id, :integer)     -&gt; 0.0073s  == 20170104024335 AddBookIdToReviews: migrated (0.0074s) ======================Now that the reviews table has a book_id column, you can assign books to reviews. Let‚Äôs try it!      Open rails console and run the following code to assign your first book to your first review.    my_first_review = Review.firstmy_first_review.book = Book.firstmy_first_review.save            Now, try running my_first_review.book.    Yay! üéâ    Your first review is now associated with your first book.    If you look at my_first_review, you‚Äôll notice its book_id is 1 - your first book‚Äôs id.        Go ahead and assign your second review to your first book. While you‚Äôre at it, also create another review for your first book.    When you‚Äôre done, Review.count should return 3.    $ rails console  Loading development environment (Rails 5.0.0.1)  &gt;&gt; my_first_review = Review.first    Review Load (0.2ms)  SELECT  \"reviews\".* FROM \"reviews\" ORDER BY \"reviews\".\"id\" ASC LIMIT ?  [[\"LIMIT\", 1]]  =&gt; #&lt;Review id: 1, body: \"Wow, what a great book!\", created_at: \"2017-01-04 02:07:50\", updated_at: \"2017-01-04 02:07:50\", book_id: nil&gt;  &gt;&gt; my_first_review.book = Book.first    Book Load (0.7ms)  SELECT  \"books\".* FROM \"books\" ORDER BY \"books\".\"id\" ASC LIMIT ?  [[\"LIMIT\", 1]]  =&gt; #&lt;Book id: 1, title: \"why's (poignant) Guide to Ruby\", author: \"why the lucky stiff\", price_cents: 100, created_at: \"2016-12-26 15:51:15\", updated_at: \"2016-12-30 20:29:14\", quantity: 500, description: \"Chunky Bacon!\"&gt;  &gt;&gt; my_first_review.save     (0.1ms)  begin transaction    SQL (0.8ms)  UPDATE \"reviews\" SET \"updated_at\" = ?, \"book_id\" = ? WHERE \"reviews\".\"id\" = ?  [[\"updated_at\", 2017-01-04 03:14:40 UTC], [\"book_id\", 1], [\"id\", 1]]     (3.2ms)  commit transaction  =&gt; true  &gt;&gt; my_first_review.book  =&gt; #&lt;Book id: 1, title: \"why's (poignant) Guide to Ruby\", author: \"why the lucky stiff\", price_cents: 100, created_at: \"2016-12-26 15:51:15\", updated_at: \"2016-12-30 20:29:14\", quantity: 500, description: \"Chunky Bacon!\"&gt;A Book Has Many ReviewsYour first book now has multiple reviews.We can find which review a book belongs to, but we can‚Äôt find all the reviews a book has.Or can we???Since a book can have many reviews, we can define a has_many relationship between books and reviews.      In your text editor, open app/models/book.rb, and add the followling line inside the class    has_many :reviews        This will set up your application so a Book has_many Reviews.    In addition, we won‚Äôt have to make any database changes because the reviews table already has a book_id column. The relationship is already defined in the database.        Save your changes.  123  class Book &lt; ApplicationRecord    has_many :reviews  end      Now, go back to the rails console and run reload! to get you newest changes.        Get your first book and assign it to my_first_book.        Now, try running my_first_book.reviews.    It might be hard to see, but all your book reviews are there!            Don‚Äôt believe me??    Try running my_first_book.reviews.count. It should return 3.        Spend some time playing around with this relationship. You can do things like my_first_book.reviews.first or my_first_book.reviews.pluck(:body).    To find a complete list of all the things you can do, take a look at the documentation here.        When your done exploring, exit the rails console.    &gt;&gt; reload!  Reloading...  =&gt; true  &gt;&gt; my_first_book = Book.first    Book Load (0.1ms)  SELECT  \"books\".* FROM \"books\" ORDER BY \"books\".\"id\" ASC LIMIT ?  [[\"LIMIT\", 1]]  =&gt; #&lt;Book id: 1, title: \"why's (poignant) Guide to Ruby\", author: \"why the lucky stiff\", price_cents: 100, created_at: \"2016-12-26 15:51:15\", updated_at: \"2016-12-30 20:29:14\", quantity: 500, description: \"Chunky Bacon!\"&gt;  &gt;&gt; my_first_book.reviews    Review Load (0.2ms)  SELECT \"reviews\".* FROM \"reviews\" WHERE \"reviews\".\"book_id\" = ?  [[\"book_id\", 1]]  =&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Review id: 1, body: \"Wow, what a great book!\", created_at: \"2017-01-04 02:07:50\", updated_at: \"2017-01-04 03:14:40\", book_id: 1&gt;, #&lt;Review id: 2, body: \"10/10 would recommend\", created_at: \"2017-01-04 02:08:57\", updated_at: \"2017-01-04 03:23:23\", book_id: 1&gt;, #&lt;Review id: 3, body: \"This book is so good!\", created_at: \"2017-01-04 03:23:12\", updated_at: \"2017-01-04 03:23:12\", book_id: 1&gt;]&gt;  &gt;&gt; my_first_book.reviews.count     (0.4ms)  SELECT COUNT(*) FROM \"reviews\" WHERE \"reviews\".\"book_id\" = ?  [[\"book_id\", 1]]  =&gt; 3  &gt;&gt; exitThe magic that is a Relational Database!Are you starting to see how we‚Äôre using Rails to build a relational database?So far, you‚Äôve built two tables: a books table and a reviews table. Those tables are connected to one another by the book_id column on the Reviews table. That column is making it possible for books to have many reviews in our database.",
        "url": "/rails_tutorial/tutorial/chapter_09/"
      }
      ,
    
      "tutorial-chapter-10": {
        "title": "Showing Reviews",
        "content": "Showing ReviewsNow that your books have some reviews, let‚Äôs share them with world!      Open Terminal, go to your bookstore directory, and start your application‚Äôs web server.        Now, open the details page for your first book (http://localhost:3000/books/1).    This page shows the details of your first book, and your first book has reviews. Doesn‚Äôt this feel like a good place to show those reviews?    ‚Ä∫ pwd  /Users/awesomesauce/Projects/bookstore  ‚Ä∫ rails server  =&gt; Booting Puma  =&gt; Rails 5.0.0.1 application starting in development on http://localhost:3000How Do Book Details Get Rendered Again?Do you remember how the book details page gets rendered?When you go to http://localhost:3000/books/1, a GET request is sent to your application‚Äôs web server. This request gets routed to the BooksController show method.def show  @id = params[:id]  @book = Book.find(@id)endIn the show method, you made the requested book‚Äôs data available by assigning the book to @book. Then, the show template (app/views/books/show.html.erb) can use @book to show the book‚Äôs data.Since the show template has access to the book, it also has access to the book‚Äôs reviews.We can take advantage of this to show a book‚Äôs reviews.      In your text editor, open app/views/books/show.html.erb.        Let‚Äôs start by showing how many reviews the book has. Add the following line before the ‚ÄúEdit book‚Äù link:    &lt;p&gt; Number of reviews: &lt;%= @book.reviews.count %&gt; &lt;/p&gt;            Save your changes and revisit http://localhost:3000/books/1.    You should now see how many reviews your first book has! üéâ  12345678910111213141516171819202122232425  &lt;dl&gt;    &lt;dt&gt;Id&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.id %&gt;&lt;/dd&gt;    &lt;dt&gt;Title&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.title %&gt;&lt;/dd&gt;    &lt;dt&gt;Author&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.author %&gt;&lt;/dd&gt;    &lt;dt&gt;Price&lt;/dt&gt;    &lt;dd&gt;&lt;%= number_to_currency(@book.price_cents / 100.0) %&gt;&lt;/dd&gt;    &lt;dt&gt;Quantity&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.quantity %&gt;&lt;/dd&gt;    &lt;dt&gt;Description&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.description %&gt;&lt;/dd&gt;  &lt;/dl&gt;  &lt;p&gt; Number of reviews: &lt;%= @book.reviews.count %&gt; &lt;/p&gt;  &lt;%= link_to(\"Edit book\", edit_book_path(@book), class: \"button\") %&gt;  &lt;%= button_to(\"Delete Book\", book_path(@book), method: :delete, class: \"button danger\") %&gt;Now we need to show the reviews‚Ä¶ üòÖ      Since a book has many reviews, it would make sense to list them out. Maybe, in an unordered list?    Didn‚Äôt we do something like this already?    Yeah! You used an unordered list to show books on the books index (app/views/books/index.html.erb).    &lt;ul&gt;  &lt;% @books.each do |book| %&gt;    &lt;li&gt;      &lt;%= link_to(book.title, book_path(book)) %&gt; by &lt;%= book.author %&gt;    &lt;/li&gt;  &lt;% end %&gt;&lt;/ul&gt;        For each book in @books, you added a list item (li) to the unordered list (ul) with some information about the book.    We‚Äôll want to do something similiar for book reviews.        Using the books index as an example, add an unordered list to the show template with the book‚Äôs reviews.    Add the unordered list before the ‚ÄúEdit book‚Äù link. For each review, add a list item with the review‚Äôs body.        What does your unordered list look like? It should look something like this:    &lt;ul&gt;  &lt;% @book.reviews.each do |review| %&gt;    &lt;li&gt; &lt;%= review.body %&gt; &lt;/li&gt;  &lt;% end %&gt;&lt;/ul&gt;            If you didn‚Äôt come up with a similar solution, update your solution to match this one.        Save your changes, and go check out those reviews!        When you‚Äôre done, stop your application‚Äôs web server.  12345678910111213141516171819202122232425262728293031  &lt;dl&gt;    &lt;dt&gt;Id&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.id %&gt;&lt;/dd&gt;    &lt;dt&gt;Title&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.title %&gt;&lt;/dd&gt;    &lt;dt&gt;Author&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.author %&gt;&lt;/dd&gt;    &lt;dt&gt;Price&lt;/dt&gt;    &lt;dd&gt;&lt;%= number_to_currency(@book.price_cents / 100.0) %&gt;&lt;/dd&gt;    &lt;dt&gt;Quantity&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.quantity %&gt;&lt;/dd&gt;    &lt;dt&gt;Description&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.description %&gt;&lt;/dd&gt;  &lt;/dl&gt;  &lt;p&gt; Number of reviews: &lt;%= @book.reviews.count %&gt; &lt;/p&gt;  &lt;ul&gt;    &lt;% @book.reviews.each do |review| %&gt;      &lt;li&gt; &lt;%= review.body %&gt; &lt;/li&gt;    &lt;% end %&gt;  &lt;/ul&gt;  &lt;%= link_to(\"Edit book\", edit_book_path(@book), class: \"button\") %&gt;  &lt;%= button_to(\"Delete Book\", book_path(@book), method: :delete, class: \"button danger\") %&gt;",
        "url": "/rails_tutorial/tutorial/chapter_10/"
      }
      ,
    
      "tutorial-chapter-11": {
        "title": "Adding Reviews from the Browser",
        "content": "Adding Reviews from the BrowserNow you can see your beautiful reviews, but wouldn‚Äôt it be nice if you could also add reviews??      Let‚Äôs start by taking a look at your application‚Äôs routes file. In your text editor, open config/routes.rb.    So far, you‚Äôve specified one resource in your routes file - books.    resources :books        It‚Äôs been a while since we‚Äôve been inside the routes file, but your application now has a new resource - reviews. You‚Äôve defined a relationship between these two resources in your application. A book can have many reviews, and review belongs to a book.    We can define this relationship in your routes file.        In your routes file, change    resources :books        to    resources :books do  resources :reviewsend            Save your changes.  12345678  Rails.application.routes.draw do    # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html    root \"books#index\"    resources :books do      resources :reviews    end  endLet‚Äôs see how that changed your application‚Äôs routes.      Open Terminal, go to the bookstore directory, and run rake routes.    Whoa! Your application‚Äôs routing table got waaaaay bigger.    Your application now has a bunch of review routes. Do you notice a pattern in their paths?    /books/:book_id/reviews/books/:book_id/reviews/books/:book_id/reviews/new        They all start with /books/:book_id because of the change you made to your application‚Äôs routes file:    resources :books do  resources :reviewsend        By nesting :reviews inside of :books, you‚Äôre setting up all your review routes to go through the book they belong to.    For example, instead of having a route to get all your application‚Äôs reviews (/reviews), you have a route to get all of a books reviews (/books/:book_id/reviews).    Why are we doing this again?    We‚Äôre setting up your application‚Äôs routes to reflect the belongs_to/has_many relationship that exists between books and reviews.    It might feel a little abstract, but this will come in handy when we‚Äôre adding reviews.    ‚Ä∫ pwd  /Users/alimi/Projects/bookstore  ‚Ä∫ rake routes            Prefix Verb   URI Pattern                                Controller#Action              root GET    /                                          books#index      book_reviews GET    /books/:book_id/reviews(.:format)          reviews#index                   POST   /books/:book_id/reviews(.:format)          reviews#create   new_book_review GET    /books/:book_id/reviews/new(.:format)      reviews#new  edit_book_review GET    /books/:book_id/reviews/:id/edit(.:format) reviews#edit       book_review GET    /books/:book_id/reviews/:id(.:format)      reviews#show                   PATCH  /books/:book_id/reviews/:id(.:format)      reviews#update                   PUT    /books/:book_id/reviews/:id(.:format)      reviews#update                   DELETE /books/:book_id/reviews/:id(.:format)      reviews#destroy             books GET    /books(.:format)                           books#index                   POST   /books(.:format)                           books#create          new_book GET    /books/new(.:format)                       books#new         edit_book GET    /books/:id/edit(.:format)                  books#edit              book GET    /books/:id(.:format)                       books#show                   PATCH  /books/:id(.:format)                       books#update                   PUT    /books/:id(.:format)                       books#update                   DELETE /books/:id(.:format)                       books#destroyWhat Route Do We Use to Add Reviews?Given the changes to your application‚Äôs routes, what route would we use to add new reviews?One route stands out:new_book_review GET    /books/:book_id/reviews/new(.:format)      reviews#newI mean‚Ä¶it has a prefix of new_book_review. üòâLet‚Äôs try visiting that path.      Start your application‚Äôs web server, and go to http://localhost:3000/books/1/reviews/new. Since the path starts with /books/1, this is where we‚Äôd go to add a review for your first book.    Those errors sure do get old, don‚Äôt they‚Ä¶    ‚Ä∫ rails server  =&gt; Booting Puma  =&gt; Rails 5.0.0.1 application starting in development on http://localhost:3000You got a Routing Error with a message that says ‚Äúuninitialized constant ReviewsController‚Äù. Any ideas why you‚Äôre seeing that error?‚Ä¶You don‚Äôt have a ReviewsController!      Go back to Terminal, stop your application‚Äôs web server, and run the following command:    touch app/controllers/reviews_controller.rb        This will create an empty file named app/controllers/reviews_controller.rb.        Restart your application‚Äôs web server, and open app/controllers/reviews_controller.rb in your text editor.  ‚Ä∫ rails server=&gt; Booting Puma...^CExiting‚Ä∫ touch app/controllers/reviews_controller.rb‚Ä∫ rails server=&gt; Booting Puma      Now you have a file for the ReviewsController, but you still haven‚Äôt defined it.        Add the following code to app/controllers/reviews_controller.rb    class ReviewsController &lt; ApplicationControllerend            Save your changes and revisit http://localhost:3000/books/1/reviews/new.  12  class ReviewsController &lt; ApplicationController  endAnother error, but we know how to deal with these.Right?!You‚Äôre seeing an Unknown action error that says ‚ÄúThe action ‚Äònew‚Äô could not be found for ReviewsController‚Äù. How would you fix this error?The ReviewsController needs a new action!      Add an empty new method to the ReviewsController.    def newend            Save your changes and revisit http://localhost:3000/books/1/reviews/new.  1234  class ReviewsController &lt; ApplicationController    def new    end  endYou have a ReviewsController that has a new method, but you‚Äôre still getting an error when you visit the new reviews path (http://localhost:3000/books/1/reviews/new).The ActionController::UnknownFormat error might seem intense, but do you remember seeing it before? There‚Äôs one key piece of information burried in the weeds.ReviewsController#new is missing a template for this request format and variant.We‚Äôre missing a template!      First, go back to Terminal and stop your application‚Äôs web server.        Now, you‚Äôll need to create directory for the review templates. Run the following command:    mkdir app/views/reviews        This created an empty reviews directory inside of app/views.        Then, you can create the new reviews template with the following command:    touch app/views/reviews/new.html.erb            Restart your application‚Äôs web server, and try going back to http://localhost:3000/books/1/reviews/new.    What do you think will happen?        ‚Ä∫ rails server  ...  ^CExiting  ‚Ä∫ mkdir app/views/reviews  ‚Ä∫ touch app/views/reviews/new.html.erb  ‚Ä∫ rails server  =&gt; Booting Puma  =&gt; Rails 5.0.0.1 application starting in development on http://localhost:3000Have you ever been so excited to see a blank page?!Please, contain your excitement!We‚Äôre rendering a blank page for the new reviews page, but what should we be rendering instead?We‚Äôre going to follow the same we pattern we used back in Chapter 5 to add books.To add a book, you start by visiting the new book page (http://localhost:3000/books/new). When you get there, you see a form where you can enter data for the new book you want to add.When you‚Äôre done adding the data for the new book, you click on ‚ÄúCreate Book‚Äù to add the new book.We‚Äôre going to repeat this workflow, but instead of creating a book we‚Äôre going to create a review for a given book.Let‚Äôs get started by showing the title of the book that‚Äôs being reviewed at the top of the page.      Open the ReviewsController in your text editor, and add the following code to new method.    @book = Book.find(params[:book_id])        This will make the book‚Äôs data available in the new review template.        Save your changes.  12345  class ReviewsController &lt; ApplicationController    def new      @book = Book.find(params[:book_id])    end  end      Now, open app/views/reviews/new.html.erb and add the following line:    &lt;h1&gt; New review for &lt;%= @book.title %&gt; &lt;/h1&gt;            Save your changes and revisit http://localhost:3000/books/1/reviews/new.    The top of the page should have a message that says ‚ÄúNew review for why‚Äôs (poignant) Guide to Ruby‚Äù.        Try visiting the new review path for different books in your bookstore.    For example, to visit the new review path for the second book in your bookstore you would go to http://localhost:3000/books/2/reviews/new.    As you go to different paths, the message at the top of the page should change to show that book‚Äôs title.  1  &lt;h1&gt; New Review for &lt;%= @book.title %&gt; &lt;/h1&gt;Now, we need to make the new review form.To get started, we‚Äôll update the ReviewsController new method to make a new review available in the new review template.That‚Äôs a lot of new üòÖ      Open the ReviewsController and add the following line at the end of the new method.    @review = @book.reviews.build        This will create an empty review for the book that we can use in the new review template.        Save your changes.  123456  class ReviewsController &lt; ApplicationController    def new      @book = Book.find(params[:book_id])      @review = @book.reviews.build    end  endNow, we can build the review form!      This form is going to be pretty simmilar to the new book form, but with less fields.    &lt;%= form_for(@book) do |f| %&gt;  &lt;ul&gt;    &lt;li&gt;      &lt;%= f.label :title %&gt;      &lt;%= f.text_field :title %&gt;    &lt;/li&gt;    &lt;li&gt;      &lt;%= f.label :author %&gt;      &lt;%= f.text_field :author %&gt;    &lt;/li&gt;    &lt;li&gt;      &lt;%= f.label :price_cents %&gt;      &lt;%= f.number_field :price_cents %&gt;    &lt;/li&gt;    &lt;li&gt;      &lt;%= f.label :quantity %&gt;      &lt;%= f.number_field :quantity %&gt;    &lt;/li&gt;    &lt;li&gt;      &lt;%= f.label :description %&gt;      &lt;%= f.text_area :description %&gt;    &lt;/li&gt;  &lt;/ul&gt;  &lt;%= f.submit(class: \"button\") %&gt;&lt;% end %&gt;            Using the new book form as an example, add a new review form to app/views/reviews/new.html.erb. The only field you need to set on a review is its body.    When you‚Äôre done, try add a review!    Psst‚Ä¶not to be a downer, but chances are your solution won‚Äôt work  What did you come up with? If you‚Äôre anything like me, you followed the pattern in the new book form and came up with something like this:&lt;%= form_for(@review) do |f| %&gt;  &lt;ul&gt;    &lt;li&gt;      &lt;%= f.label :body %&gt;      &lt;%= f.text_field :body %&gt;    &lt;/li&gt;  &lt;/ul&gt;  &lt;%= f.submit(class: \"button\") %&gt;&lt;% end %&gt;For some reason, that doesn‚Äôt work. This solution leads to an error‚Ä¶This is a tricky error, but the gist of it is that we have an undefined method for reviews_path.By doing &lt;%= form_for(@review) do |f| %&gt;, we‚Äôre creating a form for a new review that will get submitted to the reviews_path. What‚Äôs wrong with that?We don‚Äôt have a reviews_path‚Ä¶we have a book_reviews_path.Do you remember what your application‚Äôs routes file looks like?Rails.application.routes.draw do  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html  root \"books#index\"  resources :books do    resources :reviews  endendReviews are resources nested under books. Therefore, all review routes have to be referenced through a book.      To make the new review form work, we need to change    &lt;%= form_for(@review) do |f| %&gt;        to    &lt;%= form_for([@book, @review]) do |f| %&gt;        With this change, the form will use the book_reviews_path instead of the invalid reviews_path.        Your form should now look like this:    &lt;%= form_for([@book, @review]) do |f| %&gt;  &lt;ul&gt;    &lt;li&gt;      &lt;%= f.label :body %&gt;      &lt;%= f.text_field :body %&gt;    &lt;/li&gt;  &lt;/ul&gt;  &lt;%= f.submit(class: \"button\") %&gt;&lt;% end %&gt;        Update your form to match this solution.        Save your changes and try adding a review to your first book by visiting http://localhost:3000/books/1/reviews/new.  123456789101112  &lt;h1&gt; New Review for &lt;%= @book.title %&gt; &lt;/h1&gt;  &lt;%= form_for([@book, @review]) do |f| %&gt;    &lt;ul&gt;      &lt;li&gt;        &lt;%= f.label :body %&gt;        &lt;%= f.text_field :body %&gt;      &lt;/li&gt;    &lt;/ul&gt;    &lt;%= f.submit(class: \"button\") %&gt;  &lt;% end %&gt;An Unknown action error?! But we were so close!!!Don‚Äôt be so down! We‚Äôve gotten through this before‚Ä¶we can fix this.The error is telling us what we need to do.The action 'create' could not be found for ReviewsController.      Add an empty create method to the ReviewsController.    def createend            Save your changes and try adding a review for your first book again by visiting http://localhost:3000/books/1/reviews/new.  123456789  class ReviewsController &lt; ApplicationController    def new      @book = Book.find(params[:book_id])      @review = @book.reviews.build    end    def create    end  endNothing happened, right?RIGHT?!?Of course nothing happened, the create method is empty.We need to update the ReviewsController create method so it creates a review for the requested book.      Add the followling lines to the ReviewsController create method:    book = Book.find(params[:book_id])book.reviews.create(params)        First, we find the requested book and assign it to a variable called book. Then, we create a review for the book using the data that was sent with the form. The data is available in the params hash.        Save your changes, revisit http://localhost:3000/books/1/reviews/new, and try adding a review one more time.  1234567891011  class ReviewsController &lt; ApplicationController    def new      @book = Book.find(params[:book_id])      @review = @book.reviews.build    end    def create      book = Book.find(params[:book_id])      book.reviews.create(params)    end  endAre you really surprised to see another error? üòâWhat do you think is going on? You‚Äôre getting an ActiveModel::ForbiddenAttributesError, but why?If you look closely at the browser, Rails is telling you where the problem is. It‚Äôs inside the create method.book.reviews.create(params)Why would you get an ActiveModel::ForbiddenAttributesError from doing book.reviews.create(params)‚Ä¶ü§îCheck out the ActiveModel::ForbiddenAttributesError doc. What does the description say?  Raised when forbidden attributes are used for mass assignment.Ah! We‚Äôre trying to create the review using all the data from the params hash, but we haven‚Äôt allowed any attributes to be set. This is that security feature we looked at earlier called strong parameters.Strong parameters forces us to explcitly state what attributes can be set to prevent malicious data from entering our applications. When you try to assign attributes that haven‚Äôt been permitted, you get an ActiveModel::ForbiddenAttributesError error.To fix the ReviewsController create method, we need to specify the attributes that can be set on reviews. There is only one attribute we care about - body.      Add the following method to the end of the ReviewsController:    def review_params  params.require(:review).permit(:body)end        Inside this review_params method, we‚Äôre saying the params hash must have a review hash. Inside the review hash, we‚Äôll allow a body attribute to be used on a new review.        Do you remember what the params hash looks like? It looks something like this:    {\"utf8\"=&gt;\"‚úì\", \"authenticity_token\"=&gt;\"JYZD9Lsnb6RbMX7OW/QUXNY6Uzxd0MYZNcDKHKZjAmggVeGwKb6lPkOE60zgptRlquzdhJo9tOU5r7mLthxXog==\", \"review\"=&gt;{\"body\"=&gt;\"Wooooooooo\"}, \"commit\"=&gt;\"Create Review\", \"book_id\"=&gt;\"1\"}        There‚Äôs a bunch of stuff in there, but now we‚Äôre restricted to only using the body attribute from the review hash.        Now we can use review_params inside the create method. Replace    book.reviews.create(params)        with    book.reviews.create(review_params)            Save your changes, revisit http://localhost:3000/books/1/reviews/new, and try adding a review!  123456789101112131415  class ReviewsController &lt; ApplicationController    def new      @book = Book.find(params[:book_id])      @review = @book.reviews.build    end    def create      book = Book.find(params[:book_id])      book.reviews.create(review_params)    end    def review_params      params.require(:review).permit(:body)    end  endNothing happened‚Ä¶or did it?      Go back to your first book‚Äôs details page at http://localhost:3000/books/1.    Notice anything different???    Your new review!!! üéâ        Nothing happens at the end of the ReviewsController create method so it feels like your review wasn‚Äôt created. Let‚Äôs fix this.    Add the following line to the end of the ReviewsController create method:    redirect_to book_path(book)        After a review is added for the book, we‚Äôll redirect to the book details page for the book so we can verify the new review was created.        Save your changes, revisit http://localhost:3000/books/1/reviews/new, and watch what happens when you add a new review.  12345678910111213141516  class ReviewsController &lt; ApplicationController    def new      @book = Book.find(params[:book_id])      @review = @book.reviews.build    end    def create      book = Book.find(params[:book_id])      book.reviews.create(review_params)      redirect_to book_path(book)    end    def review_params      params.require(:review).permit(:body)    end  endYou‚Äôve done a lot of work in this chapter, but look at your bookstore! Now you can write all those book reviews you‚Äôve been putting off for all these years.Before you jump into writing those reviews, let‚Äôs clean up one more thing‚Ä¶To create a review for a book, you have to know the URL you want to visit. We can make this a little nicer by adding a link to the new review page from the book details pages.You‚Äôll be able to quickly write a review for the book you‚Äôre looking at.      Let‚Äôs start by looking at your application‚Äôs routes. Go to Terminal, stop your application‚Äôs web server, and run rake routes.    Which row has the path we‚Äôve been using to get to the new review page?    new_book_review GET    /books/:book_id/reviews/new(.:format)      reviews#new        The first column in the row is a prefix. The new review page has a prefix of new_book_review. We‚Äôll use this prefix to build a link to the new review path.        Restart your application‚Äôs web server.    ‚Ä∫ rails server  =&gt; Booting Puma  ...  ^CExiting  ‚Ä∫ rake routes            Prefix Verb   URI Pattern                                Controller#Action              root GET    /                                          books#index      book_reviews GET    /books/:book_id/reviews(.:format)          reviews#index                   POST   /books/:book_id/reviews(.:format)          reviews#create   new_book_review GET    /books/:book_id/reviews/new(.:format)      reviews#new  edit_book_review GET    /books/:book_id/reviews/:id/edit(.:format) reviews#edit       book_review GET    /books/:book_id/reviews/:id(.:format)      reviews#show                   PATCH  /books/:book_id/reviews/:id(.:format)      reviews#update                   PUT    /books/:book_id/reviews/:id(.:format)      reviews#update                   DELETE /books/:book_id/reviews/:id(.:format)      reviews#destroy             books GET    /books(.:format)                           books#index                   POST   /books(.:format)                           books#create          new_book GET    /books/new(.:format)                       books#new         edit_book GET    /books/:id/edit(.:format)                  books#edit              book GET    /books/:id(.:format)                       books#show                   PATCH  /books/:id(.:format)                       books#update                   PUT    /books/:id(.:format)                       books#update                   DELETE /books/:id(.:format)                       books#destroy  ‚Ä∫ rails server  =&gt; Booting Puma  ...      Now, open app/views/books/show.html.erb in your text editor.        Find the ‚ÄúEdit book‚Äù link.    &lt;%= link_to(\"Edit book\", edit_book_path(@book), class: \"button\") %&gt;            After the link ‚ÄúEdit book‚Äù link, add a link to ‚ÄúAdd a Review‚Äù.    The link should say ‚ÄúAdd a Review‚Äù. It should link to the new_book_review_path for @book, and it should have a ‚Äúbutton‚Äù class so it gets styled like an actionable element.        What did you come up with?    The link should look something like this:    &lt;%= link_to(\"Add a Review\", new_book_review_path(@book), class: \"button\") %&gt;            Update your solution to match this solution.        Save your changes, find some books, and review them!        When you‚Äôre done writing reviews, stop your application‚Äôs web server.  123456789101112131415161718192021222324252627282930313233  &lt;dl&gt;    &lt;dt&gt;Id&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.id %&gt;&lt;/dd&gt;    &lt;dt&gt;Title&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.title %&gt;&lt;/dd&gt;    &lt;dt&gt;Author&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.author %&gt;&lt;/dd&gt;    &lt;dt&gt;Price&lt;/dt&gt;    &lt;dd&gt;&lt;%= number_to_currency(@book.price_cents / 100.0) %&gt;&lt;/dd&gt;    &lt;dt&gt;Quantity&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.quantity %&gt;&lt;/dd&gt;    &lt;dt&gt;Description&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.description %&gt;&lt;/dd&gt;  &lt;/dl&gt;  &lt;p&gt; Number of reviews: &lt;%= @book.reviews.count %&gt; &lt;/p&gt;  &lt;ul&gt;    &lt;% @book.reviews.each do |review| %&gt;      &lt;li&gt; &lt;%= review.body %&gt; &lt;/li&gt;    &lt;% end %&gt;  &lt;/ul&gt;  &lt;%= link_to(\"Edit book\", edit_book_path(@book), class: \"button\") %&gt;  &lt;%= link_to(\"Add a Review\", new_book_review_path(@book), class: \"button\") %&gt;  &lt;%= button_to(\"Delete Book\", book_path(@book), method: :delete, class: \"button danger\") %&gt;",
        "url": "/rails_tutorial/tutorial/chapter_11/"
      }
      ,
    
      "tutorial-chapter-12": {
        "title": "Adding Users to Your Database",
        "content": "Adding Users to Your DatabaseHow does it feel to get all those reviews out of your system? I‚Äôm sure it feels good üòÜYou worked really hard to write those reviews, but how will anyone know you wrote them?What if people show up and start leaving reviews? How will you keep to track of who‚Äôs reviewing what?We need users!A user should be able to login to your bookstore. Once they‚Äôre logged in, any reviews they write can be attributed to them.We‚Äôll start by adding users to your database.Let‚Äôs start by creating a migration for the users table.      Open Terminal and go to the bookstore directory.        Now, run rails generate model user.    This command should be a little familiar. We used it earlier when added the books and reviews tables. It will generate a CreateUsers migration.    $ pwd  /Users/awesomesauce/Projects/bookstore  $ rails generate model user        invoke  active_record        create    db/migrate/20170112224318_create_users.rb        create    app/models/user.rb        invoke    test_unit        create      test/models/user_test.rb        create      test/fixtures/users.yml      Open the CreateUsers migration in your text editor.    Remember, the CreateUsers migration file has a timestamped filename.    db/migrate/TIMESTAMP_create_users.rb  12345678  class CreateUsers &lt; ActiveRecord::Migration[5.0]    def change      create_table :users do |t|        t.timestamps      end    end  endThere‚Äôs a Pattern to Creating Tables in Migrations‚Ä¶Does the CreateUsers migration look familiar? It doesn‚Äôt do much yet, but it looks a lot like the CreateBooks and CreateReviews migrations.Take a look at the CreateBooks migration to refresh your memory.class CreateBooks &lt; ActiveRecord::Migration[5.0]  def change    create_table :books do |t|      t.string :title      t.string :author      t.integer :price_cents      t.timestamps      t.integer :quantity    end  endendJust like the CreateBooks migration, the CreateUsers migration has a change method. Inside the change method, there‚Äôs a create_table block with the name of the table to create. In the CreateBooks migration the table name is :books, but in the the CreateUsers migration it‚Äôs users.You define the columns you want to add to the table inside the create_table block. You added a bunch of columns in the CreateBooks migration, but you haven‚Äôt added any to the CreateUsers migration‚Ä¶yet üòâTo support users logging in, we need to add a couple of columns to the users table.First, we‚Äôll need to add a username for the‚Ä¶user‚Äôs name.Then, we‚Äôll need to add a password_digest column. This will be used to securely store user passwords (more on that later).Both columns will be string columns.      Using your other migrations as examples, update the create_table block in the CreateUsers migration so username and password_digest are added as string columns to the users table.        When you‚Äôre done, save your changes, and run the migration by running rake db:migrate.    If you make any mistakes, you can always undo the migration by running rake db:rollback. Then, you can make changes to the CreateUsers migration and re-run it with rake db:migrate.  What does your solution look like?! Did you add the columns to the users table??      Your create_table block should look something like this:    create_table :users do |t|  t.string :username  t.string :password_digest  t.timestampsend            If your create_table block doesn‚Äôt look like this, update your solution to match this solution and run the migration.    If you ran the migration without the username or password_digest columns, you‚Äôll need to rollback the migration and run it again.  123456789  class CreateUsers &lt; ActiveRecord::Migration[5.0]    def change      create_table :users do |t|        t.string :username        t.string :password_digest        t.timestamps      end    end  endWhat‚Äôs a Password Digest?Your bookstore application now has a users table with a couple of columns. The username column probably seems reasonable, but I‚Äôm sure the password_digest column looks questionable. What‚Äôs a password digest anyways?Rails provides a feature to make password management convienient. By adding the passowrd_digest column, you‚Äôve already taken the first step towards using this feature.The next step is going to require a code change.      Open app/models/user.rb in your text editor.        Inside the User class, add the following line:    has_secure_password        This will call Rails‚Äô has_secure_password method to make the password management feature available on all users.        Save your changes.  123  class User &lt; ApplicationRecord    has_secure_password  endLet‚Äôs see what we can do with the User class.      Go to Terminal and start the rails console.        Now, let‚Äôs try building your bookstore‚Äôs first user. Run the following code:    my_first_user = User.new(username: \"CatPower\")        Woah! That‚Äôs a gnarly error!        If you look closely at the error, it‚Äôs trying to tell you what‚Äôs wrong. It even has a suggestion on how you can fix it.    You don't have bcrypt installed in your application. Please add it to your Gemfile and run bundle install        Let‚Äôs break down this error, but first - exit the rails console.    $ rails console  Loading development environment (Rails 5.0.0.1)  &gt;&gt; my_first_user = User.new(username: \"CatPower\")  You don't have bcrypt installed in your application. Please add it to your Gemfile and run bundle install  LoadError: cannot load such file -- bcrypt  ...  &gt;&gt; exitbcrypt, RubyGems, and GemfilesLet‚Äôs take a look at the first part of the error.You don't have bcrypt installed in your application.Your bookstore application doesn‚Äôt have bcrypt installed, and it never did. Why‚Äôs that a problem now?has_secure_password is being run on every User, including my_first_user. Under the hood, has_secure_password uses bcrypt to encrypt and save passwords.Since your bookstore application doesn‚Äôt have bcrypt, has_secure_password can‚Äôt run and it throws this error.Now that we have some idea of what the problem is, how can we fix it? Let‚Äôs take a look at the second part of the error.Please add it to your Gemfile and run bundle installHmm‚Ä¶I guess we have to add bcrypt to your Gemfile.What‚Äôs a Gemfile?Ah, a Gemfile! It‚Äôs a really important part of the Ruby ecosystem.A lot of Ruby projects have Gemfiles to manage the RubyGems they use.Huh‚Ä¶what‚Äôs a RubyGem?A RubyGem is a bundle of Ruby code that can be used in any Ruby project. Some RubyGems are small, and others are pretty big.RubyGems are usually referred to as Gems because who has time for all those syllables.bcrypt is a RubyGem.Your bookstore application is a Ruby project, it just happens to be a Rails application too üòâAs a Ruby project that uses RubyGems, it has a Gemfile. Let‚Äôs take a look at it.Your application‚Äôs Gemfile is a file named‚Ä¶Gemfile. It‚Äôs not nested inside any directories, and it‚Äôs one of the first files in the bookstore directory.      Open the Gemfile in your text editor.    Woah! Your application‚Äôs Gemfile already has some stuff in it!    Turns out your application has been using a Gemfile this whole time.        Your application‚Äôs Gemfile is the default Gemfile that ships with all new Rails applications. You can choose different RubyGems, but this default list helps you get started quickly.    If you read through the Gemfile, you might recongize some RubyGems we‚Äôve been using. You might even come across a RubyGem that brought us here in the first place‚Ä¶  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748  source 'http://rubygems.org'  # Bundle edge Rails instead: gem 'rails', github: 'rails/rails'  gem 'rails', '~&gt; 5.0.0', '&gt;= 5.0.0.1'  # Use sqlite3 as the database for Active Record  gem 'sqlite3'  # Use Puma as the app server  gem 'puma', '~&gt; 3.0'  # Use SCSS for stylesheets  gem 'sass-rails', '~&gt; 5.0'  # Use Uglifier as compressor for JavaScript assets  gem 'uglifier', '&gt;= 1.3.0'  # Use CoffeeScript for .coffee assets and views  gem 'coffee-rails', '~&gt; 4.2'  # See https://github.com/rails/execjs#readme for more supported runtimes  # gem 'therubyracer', platforms: :ruby  # Use jquery as the JavaScript library  gem 'jquery-rails'  # Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks  gem 'turbolinks', '~&gt; 5'  # Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder  gem 'jbuilder', '~&gt; 2.5'  # Use Redis adapter to run Action Cable in production  # gem 'redis', '~&gt; 3.0'  # Use ActiveModel has_secure_password  # gem 'bcrypt', '~&gt; 3.1.7'  # Use Capistrano for deployment  # gem 'capistrano-rails', group: :development  group :development, :test do    # Call 'byebug' anywhere in the code to stop execution and get a debugger console    gem 'byebug', platform: :mri  end  group :development do    # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.    gem 'web-console'    gem 'listen', '~&gt; 3.0.5'    # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring    gem 'spring'    gem 'spring-watcher-listen', '~&gt; 2.0.0'  end  # Windows does not include zoneinfo files, so bundle the tzinfo-data gem  gem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]      Did you find find bcrypt in your Gemfile?! It‚Äôs tucked in there‚Ä¶    # Use ActiveModel has_secure_password# gem 'bcrypt', '~&gt; 3.1.7'        Wait a minute‚Ä¶if bcrypt is in my Gemfile why isn‚Äôt it in my application?    bcrypt is in your Gemfile, but it‚Äôs only included as comment. In Ruby, any line that starts with # is a comment. Comments are never run; they‚Äôre just messages to help you understand what‚Äôs going on.        To include bcrypt, you just need to uncomment that line. Change    # gem 'bcrypt', '~&gt; 3.1.7'        to    gem 'bcrypt', '~&gt; 3.1.7'            Save your changes.  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748  source 'http://rubygems.org'  # Bundle edge Rails instead: gem 'rails', github: 'rails/rails'  gem 'rails', '~&gt; 5.0.0', '&gt;= 5.0.0.1'  # Use sqlite3 as the database for Active Record  gem 'sqlite3'  # Use Puma as the app server  gem 'puma', '~&gt; 3.0'  # Use SCSS for stylesheets  gem 'sass-rails', '~&gt; 5.0'  # Use Uglifier as compressor for JavaScript assets  gem 'uglifier', '&gt;= 1.3.0'  # Use CoffeeScript for .coffee assets and views  gem 'coffee-rails', '~&gt; 4.2'  # See https://github.com/rails/execjs#readme for more supported runtimes  # gem 'therubyracer', platforms: :ruby  # Use jquery as the JavaScript library  gem 'jquery-rails'  # Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks  gem 'turbolinks', '~&gt; 5'  # Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder  gem 'jbuilder', '~&gt; 2.5'  # Use Redis adapter to run Action Cable in production  # gem 'redis', '~&gt; 3.0'  # Use ActiveModel has_secure_password  gem 'bcrypt', '~&gt; 3.1.7'  # Use Capistrano for deployment  # gem 'capistrano-rails', group: :development  group :development, :test do    # Call 'byebug' anywhere in the code to stop execution and get a debugger console    gem 'byebug', platform: :mri  end  group :development do    # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.    gem 'web-console'    gem 'listen', '~&gt; 3.0.5'    # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring    gem 'spring'    gem 'spring-watcher-listen', '~&gt; 2.0.0'  end  # Windows does not include zoneinfo files, so bundle the tzinfo-data gem  gem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]How Do We Install RubyGems From the Gemfile?Now that bcrypt is part of your Gemfile, you‚Äôre ready to install it.The RubyGems in your Gemfile are installed by bundle install.You might remember bundle install from a looooong time ago. rails new runs bundle install as its last step in creating your application.      Open Terminal and run bundle install.    bundle install goes through each RubyGem in your Gemfile and decides if it needs to install it or not. If your application already has the RubyGem, it will output ‚ÄúUsing‚Ä¶‚Äù and move on to the next RubyGem.    We‚Äôre only adding one RubyGem to your application - bcrypt. When bundle install gets to bcrypt, it will tell you that it‚Äôs being installed:    Installing bcrypt 3.1.11 with native extensions            When bundle install finishes, you‚Äôll get a message telling you how many RubyGems your application is using.    Bundle complete! 16 Gemfile dependencies, 63 gems now installed.        $ bundle install  Fetching gem metadata from http://rubygems.org/.........  Fetching version metadata from http://rubygems.org/..  Fetching dependency metadata from http://rubygems.org/.  Using rake 11.3.0  Using concurrent-ruby 1.0.2  Using i18n 0.7.0  Using minitest 5.9.1  Using thread_safe 0.3.5  Using builder 3.2.2  Using erubis 2.7.0  Using mini_portile2 2.1.0  Using rack 2.0.1  Using nio4r 1.2.1  Using websocket-extensions 0.1.2  Using mime-types-data 3.2016.0521  Using arel 7.1.4  Installing bcrypt 3.1.11 with native extensions  Using byebug 9.0.6  Using coffee-script-source 1.10.0  Using execjs 2.7.0  Using method_source 0.8.2  Using thor 0.19.1  Using debug_inspector 0.0.2  Using ffi 1.9.14  Using multi_json 1.12.1  Using rb-fsevent 0.9.8  Using puma 3.6.0  Using bundler 1.13.6  Using sass 3.4.22  Using tilt 2.0.5  Using sqlite3 1.3.12  Using turbolinks-source 5.0.0  Using tzinfo 1.2.2  Using nokogiri 1.6.8.1  Using rack-test 0.6.3  Using sprockets 3.7.0  Using websocket-driver 0.6.4  Using mime-types 3.1  Using coffee-script 2.4.1  Using uglifier 3.0.3  Using rb-inotify 0.9.7  Using turbolinks 5.0.1  Using activesupport 5.0.0.1  Using loofah 2.0.3  Using mail 2.6.4  Using listen 3.0.8  Using rails-dom-testing 2.0.1  Using globalid 0.3.7  Using activemodel 5.0.0.1  Using jbuilder 2.6.0  Using spring 2.0.0  Using rails-html-sanitizer 1.0.3  Using activejob 5.0.0.1  Using activerecord 5.0.0.1  Using spring-watcher-listen 2.0.1  Using actionview 5.0.0.1  Using actionpack 5.0.0.1  Using actioncable 5.0.0.1  Using actionmailer 5.0.0.1  Using railties 5.0.0.1  Using sprockets-rails 3.2.0  Using coffee-rails 4.2.1  Using jquery-rails 4.2.1  Using web-console 3.4.0  Using rails 5.0.0.1  Using sass-rails 5.0.6  Bundle complete! 16 Gemfile dependencies, 63 gems now installed.  Use `bundle show [gemname]` to see where a bundled gem is installed.Now that you‚Äôre application is using bcrypt, maybe we can start doing stuff with Users. üòÑ      Open the rails console and run the following:    my_first_user = User.new(username: \"CatPower\")        Yay! No errors üéâ    This assigns a new User with username ‚ÄúCatPower‚Äù to my_first_user.    my_first_user has a username, but she doesn‚Äôt have a password.    Fortunately, has_secure_password added a method to User so you can set passwords.        Try setting a password for my_first_user by running:    my_first_user.password = \"password\"            Now, try saving my_first_user.    my_first_user.save        Wait‚Ä¶that worked?        &gt;&gt; my_first_user = User.new(username: 'CatPower')  =&gt; #&lt;User id: nil, username: \"CatPower\", password_digest: nil, created_at: nil, updated_at: nil&gt;  &gt;&gt; my_first_user.password = 'password'  =&gt; \"password\"  &gt;&gt; my_first_user.save     (0.1ms)  begin transaction    SQL (0.6ms)  INSERT INTO \"users\" (\"username\", \"password_digest\", \"created_at\", \"updated_at\") VALUES (?, ?, ?, ?)  [[\"username\", \"CatPower\"], [\"password_digest\", \"$2a$10$T9KFCyIrtgFhBtEixMYm9e757ZXa7UlBVOyaAzCtbwt2rNP5snSle\"], [\"created_at\", 2017-01-13 02:57:39 UTC], [\"updated_at\", 2017-01-13 02:57:39 UTC]]     (1.1ms)  commit transaction  =&gt; true      Take a look at how the password was saved into the users table. Run my_first_user.password_digest.    That‚Äôs not the generic password you were expecting, was it?    has_secure_password transformed the plain text password you set on my_first_user into an encrypted password. Then, the encrypted password was stored in the password_digest column.        Now that you have a user with a password, you can authenticate her.    What do you think will happen when you run the following code?    my_first_user.authenticate(\"password\")        What about if you do something like this instead?    my_first_user.authenticate(\"I'm just guessing\")        Give them a try!    &gt;&gt; my_first_user.password_digest  =&gt; \"$2a$10$T9KFCyIrtgFhBtEixMYm9e757ZXa7UlBVOyaAzCtbwt2rNP5snSle\"      When you run my_first_user.authenticate with my_first_user‚Äôs password, authenticate returned the user.    &gt;&gt; my_first_user.authenticate(\"password\")=&gt; #&lt;User id: 1, username: \"CatPower\", password_digest: \"$2a$10$T9KFCyIrtgFhBtEixMYm9e757ZXa7UlBVOyaAzCtbwt...\", created_at: \"2017-01-13 02:57:39\", updated_at: \"2017-01-13 02:57:39\"&gt;            When you run my_first_user.authenticate with an invalid password, authenticate returned false.    &gt;&gt; my_first_user.authenticate(\"bad password\")=&gt; false        &gt;&gt; my_first_user.authenticate(\"password\")  =&gt; #&lt;User id: 1, username: \"CatPower\", password_digest: \"$2a$10$T9KFCyIrtgFhBtEixMYm9e757ZXa7UlBVOyaAzCtbwt...\", created_at: \"2017-01-13 02:57:39\", updated_at: \"2017-01-13 02:57:39\"&gt;  &gt;&gt; my_first_user.authenticate(\"bad password\")  =&gt; false      Yay! Now you can create users, securely store their passwords, and authenticate them.    Exit the rails console and do your happy dance.      ",
        "url": "/rails_tutorial/tutorial/chapter_12/"
      }
      ,
    
      "tutorial-chapter-13": {
        "title": "Logging In and Logging Out",
        "content": "Logging In and Logging OutYour bookstore has users, but there‚Äôs no way for them to login. Let‚Äôs change that üòä      Let‚Äôs start by looking at your application‚Äôs routes file. Open config/routes.rb in your text editor.    You‚Äôve added a couple of resources to the routes file. First, you defined :books. This added a series of routes to your application for creating, reading, updating, and deleting your books. Then, you added another resource :reviews. This added similar routes, but they‚Äôre focused on reviews instead of books.    Now that your application has users, it might be tempting to add a :users resource. This would be useful if we were going to change user data, but we don‚Äôt need to change any user data to log someone in.    We just need to keep track of a user once they‚Äôve logged in to your bookstore. We‚Äôll represent this as a session - a user creates a new session when they log in.        Let‚Äôs add a :session resource to your routes file. Before the end of config/routes.rb, add the following line:    resource :session            Save your changes.  12345678910  Rails.application.routes.draw do    # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html    root \"books#index\"    resources :books do      resources :reviews    end    resource :session  endLet‚Äôs see what your application routes look like now.      Open Terminal, go the bookstore directory, and run rake routes.    Aww, your routes are getting so big üòç    When a user logs in, they‚Äôre going to create a new session. What path will they visit to create a new session?    They‚Äôll go to /session/new.    new_session GET    /session/new(.:format)                     sessions#new            Start your application‚Äôs web server and visit the new session path at http://localhost:3000/session/new.    ‚Ä∫ pwd  /Users/awesomesauce/Projects/bookstore  ‚Ä∫ rake routes            Prefix Verb   URI Pattern                                Controller#Action              root GET    /                                          books#index      book_reviews GET    /books/:book_id/reviews(.:format)          reviews#index                   POST   /books/:book_id/reviews(.:format)          reviews#create   new_book_review GET    /books/:book_id/reviews/new(.:format)      reviews#new  edit_book_review GET    /books/:book_id/reviews/:id/edit(.:format) reviews#edit       book_review GET    /books/:book_id/reviews/:id(.:format)      reviews#show                   PATCH  /books/:book_id/reviews/:id(.:format)      reviews#update                   PUT    /books/:book_id/reviews/:id(.:format)      reviews#update                   DELETE /books/:book_id/reviews/:id(.:format)      reviews#destroy             books GET    /books(.:format)                           books#index                   POST   /books(.:format)                           books#create          new_book GET    /books/new(.:format)                       books#new         edit_book GET    /books/:id/edit(.:format)                  books#edit              book GET    /books/:id(.:format)                       books#show                   PATCH  /books/:id(.:format)                       books#update                   PUT    /books/:id(.:format)                       books#update                   DELETE /books/:id(.:format)                       books#destroy           session POST   /session(.:format)                         sessions#create       new_session GET    /session/new(.:format)                     sessions#new      edit_session GET    /session/edit(.:format)                    sessions#edit                   GET    /session(.:format)                         sessions#show                   PATCH  /session(.:format)                         sessions#update                   PUT    /session(.:format)                         sessions#update                   DELETE /session(.:format)                         sessions#destroy  ‚Ä∫ rails server  =&gt; Booting Puma  =&gt; Rails 5.0.0.1 application starting in development on http://localhost:3000Oh boy, another Routing Error! üòù      The error tells you what‚Äôs wrong‚Ä¶    uninitialized constant SessionsController            Fix this familiar error and come back when you get a different one.  Were you able to get past the Routing Error?No worries if you‚Äôre stuck, we‚Äôll help you out üòä      You‚Äôre getting a Routing Error because you application doesn‚Äôt have a SessionsController.    To fix this, you need to create a SessionsController.    All controllers follow a similar pattern. They live inside the app/controllers directory, and they‚Äôre filename matches their name.    For example, the SessionsController will be a file named app/controllers/sessions_controller.    Controllers also share the same roots. Do you remember what your BooksController looked like when you first added it?    class BooksControllers &lt; ApplicationControllerend        There wasn‚Äôt much to it, remember?        If you didn‚Äôt create an empty SessionsController (app/controllers/sessions_controller), go ahead and create now.    class SessionsController &lt; ApplicationControllerend            Then, revisit http://localhost:3000/session/new to see your next error!        Now, you‚Äôre getting an Unknown action error. Just like the last error, it‚Äôs giving you a hint.    The action 'new' could not be found for SessionsController        You know what to do, right?!            Fix that error. When you‚Äôre done, you‚Äôll get one more error.        What did you come up with?! Are you seeing a new error??    You had to add a new method to the SessionsController.    def newend            If you didn‚Äôt already add the new method, go ahead and add it now.  1234class SessionsController &lt; ApplicationController  def new  endendWe‚Äôre sooooo close to the end of the error train.Can you think of reason why you‚Äôre getting an ActionController::UnknownFormat error? It looks crazy, but we‚Äôve seen this plenty of times before.You‚Äôre getting an ActionController::UnknownFormat error because the SessionsController new action doesn‚Äôt have a template.      Fix this error!    Remember, templates for the SessionsController will live inside app/views/sessions.    When you‚Äôre done, http://localhost:3000/session/new will render a blank page.        Did you figure out how to add the SessionsController new template?    You had to add a new directory.    mkdir app/views/sessions        Then, you had to create an empty template file named new.html.erb inside app/views/sessions.    touch app/views/sessions/new.html.erb            If you didn‚Äôt already, add the empty SessionsController new template file (app/views/sessions/new.html.erb).    If you‚Äôre following the steps we just laid out, you‚Äôll have to stop your application‚Äôs web server before running the commands. When you‚Äôre done, you can restart it.    Ah, has a blank page ever looked so good?  A blank page is great and all, but wouldn‚Äôt it be even better if a user could log in?!In the SessionsController new template, we need to render a form where users can enter their credentials to create a new session and log in.      Open app/views/sessions/new.html.erb and add the following:    &lt;%= form_for(:session, url: session_path) do |f| %&gt;&lt;% end %&gt;        The form_for might look a little familiar. We‚Äôve used it to build forms for adding and updating books, and adding new reviews. However, there are a few differences.    In the past forms you‚Äôve built with form_for, you started by passing an instance of the record you wanted to update or create. For example, the new books form has a new instance of Book.    &lt;%= form_for(@book) do |f| %&gt;        We aren‚Äôt doing this for the new session form because we‚Äôre not going to save the session in the database. We‚Äôre going to save it in the browser (more on that later).    Unlike the other forms, we have to specify a URL for the new session form. form_for can figure out where to send the form data when given an instance of a class; otherwise, you have to expcitily set the URL.    Other than that, the new session form is just like the other forms you‚Äôve built.        Using the new book form in app/views/books/new.html.erb as an example, add two text fields to the new sessions form.    First, add a text field labeled ‚ÄúUsername‚Äù.    Then, add a text field labeled ‚ÄúPassword‚Äù.    Finally, add a form submission button.  12  &lt;%= form_for(:session, url: session_path) do |f| %&gt;  &lt;% end %&gt;      What does your solution look like? It should look something like this:    &lt;%= form_for(:session, url: session_path) do |f| %&gt;  &lt;ul&gt;    &lt;li&gt;      &lt;%= f.label :username %&gt;      &lt;%= f.text_field :username %&gt;    &lt;/li&gt;    &lt;li&gt;      &lt;%= f.label :password %&gt;      &lt;%= f.text_field :password %&gt;    &lt;/li&gt;  &lt;/ul&gt;  &lt;%= f.submit(class: \"button\") %&gt;&lt;% end %&gt;            Update your solution to match this solution. Save your changes and take a look at the form by visiting http://localhost:3000/session/new.  123456789101112131415  &lt;%= form_for(:session, url: session_path) do |f| %&gt;    &lt;ul&gt;      &lt;li&gt;        &lt;%= f.label :username %&gt;        &lt;%= f.text_field :username %&gt;      &lt;/li&gt;      &lt;li&gt;        &lt;%= f.label :password %&gt;        &lt;%= f.text_field :password %&gt;      &lt;/li&gt;    &lt;/ul&gt;    &lt;%= f.submit(class: \"button\") %&gt;  &lt;% end %&gt;Yay! The form looks so good!!But you might‚Äôve noticed a couple of‚Ä¶weird things.First, did you try typing anything in the ‚ÄúPassword‚Äù field. It shows up as plain text! That‚Äôs not great if we‚Äôre trying to protect passwords. Fortunately, we can change this behavior.Also, the form submission button doesn‚Äôt have the friendliest message. ‚ÄúSave Session‚Äù is technically right, but most users probably expect to see something like ‚ÄúLogin‚Äù.Let‚Äôs make these things better!First, we can change the ‚ÄúPassword‚Äù field from a text field to a password field.      Reopen app/views/sessions/new.html.erb and change    &lt;%= f.text_field :password %&gt;        to    &lt;%= f.password_field :password %&gt;            Now, let‚Äôs change the text of the form submission button to ‚ÄúLogin‚Äù. Change    &lt;%= f.submit(class: \"button\") %&gt;        to    &lt;%= f.submit(\"Login\", class: \"button\") %&gt;            Save your changes, revisit http://localhost:3000/session/new, and try logging in!    You should have a user with username ‚ÄúCatPower‚Äù and a password of ‚Äúpassword‚Äù.  ‚Ä¶You know how to deal with Unknown action errors, right?!      Fix this error!    When you‚Äôre done, submitting the form shouldn‚Äôt do anything.        How did you get past that Unknown action error?    You added an empty create method to the SessionsController, right?    def createend            If you didn‚Äôt already, add an empty create method to the SessionsController.  1234567  class SessionsController &lt; ApplicationController    def new    end    def create    end  endNothing happens when you try to login, but how could anything happen. The new session form is being submitted to the SessionsController create method, and that method is empty.Let‚Äôs update the create method so users can login.      Just like past forms, the new session form data is available in the SessionsController inside the params hash. If you take a look at your application‚Äôs web server‚Äôs output, you can see the params coming in.    Parameters: {\"utf8\"=&gt;\"‚úì\", \"authenticity_token\"=&gt;\"C2s/BLrDEpUMmOL+FMx6SqNzLTqKvcLlvpw32+lD2O32Aryi9Kt0tlWVM+gUS3DYhQt1+3q0Tn3kqakWdZylVw==\", \"session\"=&gt;{\"username\"=&gt;\"CatPower\", \"password\"=&gt;\"[FILTERED]\"}, \"commit\"=&gt;\"Login\"}        The form data is tucked in the session hash, and it includes a username and password.    We can use the form data with the authenticate method to log users in.        First, we‚Äôll need to find the user by their username. Add the following code inside the create method:    user = User.find_by(username: params[:session][:username])        find_by is a handy method that let‚Äôs us get records from your database with something other than an id. We‚Äôre using find_by here to get the user by their username.        Now that we have the user‚Äôs record, we can check if they‚Äôve given us a valid password. Add the following code to the create mehtod:    if user.authenticate(params[:session][:password])  flash[:notice] = \"Welcome back, #{user.username}!\"  session[:user_id] = user.id  redirect_to root_pathelse  flash[:alert] = \"Sorry, your username or password is invalid.\"  render :newend        First, we‚Äôll try to authenticate the user. If the user is successfully authenticated, we‚Äôll          show them a success message      save their id in the browser‚Äôs session as user_id      send them to the root_path        If the user cannot be authenticated, we‚Äôll          show them a failure message      re-render the new template so they can try logging in again            There‚Äôs a lot happening here, so let‚Äôs try to break it down to get a better feel for what each of these lines of code is doing.    Before we continue, save your changes.  12345678910111213141516  class SessionsController &lt; ApplicationController    def new    end    def create      user = User.find_by(username: params[:session][:username])      if user.authenticate(params[:session][:password])        flash[:notice] = \"Welcome back, #{user.username}!\"        session[:user_id] = user.id        redirect_to root_path      else        flash[:alert] = \"Sorry, your username or password is invalid.\"        render :new      end    end  endThe Rails SessionLet‚Äôs start by looking at this line:session[:user_id] = user.idRails saves a session for every user that visits your application. By default, these sessions are stored in the user‚Äôs browser using something called cookies. Cookies are small files that browsers can use to save data on a user‚Äôs machine.To protect the session‚Äôs contents, Rails signs and encrypts it so the contents are only accessible by the Rails application.Rails makes the session available as a session hash. You can save anything inside the session hash. For example, we decided to store a user_id.session[:user_id] = user.idSessions are probably feeling really abstract right now, but they‚Äôll make more sense when you see them in action.Flash MessagesIn the create method, we also made use of the flash.flash[:notice] = \"Welcome back, #{user.username}!\"flash[:alert] = \"Sorry, your username or password is invalid.\"The flash is also part of the session, but it doesn‚Äôt get saved in the user‚Äôs browser. Instead, the flash is cleared after every request.We can take advantage of the flash‚Äôs short life cycle to temporarily show messages. For example, imagine what happens after you a user logs in to your bookstore. It‚Äôs nice to see the welcome back message, but you don‚Äôt really need continue seeing that message as you make your rounds through the bookstore.Just like the session, the flash is made available in your application as a flash hash. You can also store anything in the flash, but it‚Äôs commonly used to save things like notices and alerts.In the create method, you‚Äôre putting the succes message in flash[:notice] and the failure message is flash[:alert]. To show these messages, we need to make a change to your application‚Äôs layout template.      Open app/views/layouts/application.html.erb.        Before the container div, add the following lines:    &lt;% if flash[:notice] %&gt;  &lt;p class=\"notice\"&gt; &lt;%= flash[:notice] %&gt; &lt;/p&gt;&lt;% end %&gt;&lt;% if flash[:alert] %&gt;  &lt;p class=\"alert\"&gt; &lt;%= flash[:alert] %&gt; &lt;/p&gt;&lt;% end %&gt;        If anything is inside flash[:notice] or flash[:alert], we‚Äôll render their contents.        Save your changes.  123456789101112131415161718192021222324252627282930  &lt;!DOCTYPE html&gt;  &lt;html&gt;    &lt;head&gt;      &lt;title&gt;Bookstore&lt;/title&gt;      &lt;%= csrf_meta_tags %&gt;      &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;      &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;    &lt;/head&gt;    &lt;body&gt;      &lt;div class=\"navigation\"&gt;        &lt;div class=\"center\"&gt;          &lt;%= link_to \"My Super Rad Bookstore\", root_path %&gt;        &lt;/div&gt;      &lt;/div&gt;      &lt;% if flash[:notice] %&gt;        &lt;p class=\"notice\"&gt; &lt;%= flash[:notice] %&gt; &lt;/p&gt;      &lt;% end %&gt;      &lt;% if flash[:alert] %&gt;        &lt;p class=\"alert\"&gt; &lt;%= flash[:alert] %&gt; &lt;/p&gt;      &lt;% end %&gt;      &lt;div class=\"container\"&gt;        &lt;%= yield %&gt;      &lt;/div&gt;    &lt;/body&gt;  &lt;/html&gt;Now that you have a fully functional create method, let‚Äôs take it out for a spin!      Go to http://localhost:3000/session/new and try logging in with an invalid username.    ‚Ä¶      This error is a little tricky. Remember when we used find_by in the SessionsController create method to get the user by their username?user = User.find_by(username: params[:session][:username])find_by will return the user only if a user with that username exists. Otherwise, it returns nil. So when you try to log in with an invalid username, user becomes nil.That‚Äôs why you‚Äôre seeing the NoMethodError - you can‚Äôt call authenticate on nil.To fix this error, we‚Äôll need to make a change in the create method.      Open app/views/controllers/sessions_controller.rb. Inside the create method change    if user.authenticate(params[:session][:password])        to    if user &amp;&amp; user.authenticate(params[:session][:password])        With this change, user.authenticate will only be called if the user exists.        Save your changes, revisit http://localhost:3000/session/new, and try logging in with an invalid username again.  1234567891011121314151617  class SessionsController &lt; ApplicationController    def new    end    def create      user = User.find_by(username: params[:session][:username])      if user &amp;&amp; user.authenticate(params[:session][:password])        flash[:notice] = \"Welcome back, #{user.username}!\"        session[:user_id] = user.id        redirect_to root_path      else        flash[:alert] = \"Sorry, your username or password is invalid.\"        render :new      end    end  endYay! That‚Äôs a lot better, isn‚Äôt it?      Now try logging in as ‚ÄúCatPower‚Äù, but use an invalid password. You should still get the failure message.        Finally, try logging in as ‚ÄúCatPower‚Äù using ‚Äúpassword‚Äù as the password.  YAYAY!!!      Try clicking around the bookstore.    The success message should go way as soon as you visit a new page.  Now that you‚Äôre logged in, let‚Äôs make it so you can log out!Let‚Äôs add a ‚ÄúLog out‚Äù link to your bookstore‚Äôs header.      Open app/views/layouts/application.html.erb. Change the ‚Äúnavigation‚Äù div from    &lt;div class=\"navigation\"&gt;  &lt;div class=\"center\"&gt;    &lt;%= link_to \"My Super Rad Bookstore\", root_path %&gt;  &lt;/div&gt;&lt;/div&gt;        to:    &lt;div class=\"navigation\"&gt;  &lt;div class=\"left\"&gt;  &lt;/div&gt;  &lt;div class=\"center\"&gt;    &lt;%= link_to \"My Super Rad Bookstore\", root_path %&gt;  &lt;/div&gt;  &lt;div class=\"right\"&gt;    &lt;%= link_to \"Log Out\", session_path, method: :delete %&gt;  &lt;/div&gt;&lt;/div&gt;        Inside the ‚Äúnavigation‚Äù div, we‚Äôre adding two divs: a ‚Äúleft‚Äù div and a ‚Äúright‚Äù div. The ‚Äúleft‚Äù div is there to just keep things aligned. The ‚Äúright‚Äù div is really the one we‚Äôre interested in.    In the ‚Äúright‚Äù div, we‚Äôre adding a ‚ÄúLog Out‚Äù link. When the link is clicked, it will send a DELETE request to the session_path (/session).        Visit http://localhost:3000 to see the new ‚ÄúLog Out‚Äù link.    What do you think will happen if you try logging out? Give it a try üôÉ  12345678910111213141516171819202122232425262728293031323334353637  &lt;!DOCTYPE html&gt;  &lt;html&gt;    &lt;head&gt;      &lt;title&gt;Bookstore&lt;/title&gt;      &lt;%= csrf_meta_tags %&gt;      &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;      &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;    &lt;/head&gt;    &lt;body&gt;      &lt;div class=\"navigation\"&gt;        &lt;div class=\"left\"&gt;        &lt;/div&gt;        &lt;div class=\"center\"&gt;          &lt;%= link_to \"My Super Rad Bookstore\", root_path %&gt;        &lt;/div&gt;        &lt;div class=\"right\"&gt;          &lt;%= link_to \"Log Out\", session_path, method: :delete %&gt;        &lt;/div&gt;      &lt;/div&gt;      &lt;% if flash[:notice] %&gt;        &lt;p class=\"notice\"&gt; &lt;%= flash[:notice] %&gt; &lt;/p&gt;      &lt;% end %&gt;      &lt;% if flash[:alert] %&gt;        &lt;p class=\"alert\"&gt; &lt;%= flash[:alert] %&gt; &lt;/p&gt;      &lt;% end %&gt;      &lt;div class=\"container\"&gt;        &lt;%= yield %&gt;      &lt;/div&gt;    &lt;/body&gt;  &lt;/html&gt;      Since the ‚ÄúLog Out‚Äù link sends a DELETE request, it gets routed to the SessionsController destroy method. Whelp, that explains the error you‚Äôre seeing.    The action 'destroy' could not be found for SessionsController            Let‚Äôs create the destroy method. Open the SessionsController (app/controllers/sessions_controller.rb), and add the following method:    def destroy  session[:user_id] = nil  flash[:notice] = \"See ya next time!\"  redirect_to root_pathend        The first line of this method removes the user_id we saved in the session by setting session[:user_id] to nil. The second line shows a friendly message confirming the user has been logged out. The final line redirects the user to the root_path.        Save your changes and try logging out! After you‚Äôve logged out, stop your application‚Äôs web server.  1234567891011121314151617181920212223  class SessionsController &lt; ApplicationController    def new    end    def create      user = User.find_by(username: params[:session][:username])      if user &amp;&amp; user.authenticate(params[:session][:password])        flash[:notice] = \"Welcome back, #{user.username}!\"        session[:user_id] = user.id        redirect_to root_path      else        flash[:alert] = \"Sorry, your username or password is invalid.\"        render :new      end    end    def destroy      session[:user_id] = nil      flash[:notice] = \"See ya next time!\"      redirect_to root_path    end  end",
        "url": "/rails_tutorial/tutorial/chapter_13/"
      }
      ,
    
      "tutorial-chapter-14": {
        "title": "Logged In vs Logged Out Users",
        "content": "Logged In vs Logged Out UsersYou‚Äôre logged out, but isn‚Äôt it a little weird that you still see the ‚ÄúLog Out‚Äù link?Let‚Äôs change that! We‚Äôll only show the ‚ÄúLog Out‚Äù link to users who are logged in.How Do We Know If a User is Logged In or Not?If we only want to show the ‚ÄúLog Out‚Äù link to logged in users, we first have to figure out if a user is logged in or not. Fortunately, we already have the parts in place to figure this out.After a user successfully logs in, you‚Äôre saving their user id in the session. You did this in the SessionsController create method.def create  user = User.find_by(username: params[:session][:username])  if user &amp;&amp; user.authenticate(params[:session][:password])    ...    session[:user_id] = user.id    ...  else    ...  endendWhen a user logs out, you remove their user id from the session. You did this in the SessionsController destroy method.def destroy  session[:user_id] = nil  ...endWe can tell if a user is logged in or not by checking in the session. If a user id is present, we know that user is logged in. Otherwise, no one is logged in.We‚Äôve only used the session in your controllers, but it‚Äôs also avaialble in your templates. Let‚Äôs see what we can do with it.Before we get to far, you‚Äôll need to log in again.      Open Terminal and go to the bookstore directory.        Now, start you application‚Äôs web server.        Go to http://localhost:3000/session/new and log in as ‚ÄúCatPower‚Äù with password ‚Äúpassword‚Äù.    ‚Ä∫ pwd  /Users/alimi/Projects/bookstore  ‚Ä∫ rails server  =&gt; Booting Puma  =&gt; Rails 5.0.0.1 application starting in development on http://localhost:3000Now that you‚Äôre logged in, we can start making some changes üòä      Open app/views/layouts/application.html.erb.        Above the ‚ÄúLog Out‚Äù link, add the following line:    &lt;p&gt; Hi, my user id is &lt;%= session[:user_id] %&gt; &lt;/p&gt;        The same session hash you used in the SessionsController is also available here in this template.    With this change, you‚Äôre going to show what user id is saved in the session. Since you‚Äôre logged in as ‚ÄúCatPower‚Äù, it‚Äôs going to show CatPower‚Äôs user id.        Save your changes and revist http://localhost:3000.  1234567891011121314151617181920212223242526272829303132333435363738  &lt;!DOCTYPE html&gt;  &lt;html&gt;    &lt;head&gt;      &lt;title&gt;Bookstore&lt;/title&gt;      &lt;%= csrf_meta_tags %&gt;      &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;      &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;    &lt;/head&gt;    &lt;body&gt;      &lt;div class=\"navigation\"&gt;        &lt;div class=\"left\"&gt;        &lt;/div&gt;        &lt;div class=\"center\"&gt;          &lt;%= link_to \"My Super Rad Bookstore\", root_path %&gt;        &lt;/div&gt;        &lt;div class=\"right\"&gt;          &lt;p&gt; Hi, my user id is &lt;%= session[:user_id] %&gt; &lt;/p&gt;          &lt;%= link_to \"Log Out\", session_path, method: :delete %&gt;        &lt;/div&gt;      &lt;/div&gt;      &lt;% if flash[:notice] %&gt;        &lt;p class=\"notice\"&gt; &lt;%= flash[:notice] %&gt; &lt;/p&gt;      &lt;% end %&gt;      &lt;% if flash[:alert] %&gt;        &lt;p class=\"alert\"&gt; &lt;%= flash[:alert] %&gt; &lt;/p&gt;      &lt;% end %&gt;      &lt;div class=\"container\"&gt;        &lt;%= yield %&gt;      &lt;/div&gt;    &lt;/body&gt;  &lt;/html&gt;Sweet! Now that we know how to access the session in your templates, let‚Äôs put it to use.      Reopen app/views/layouts/application.html.erb.        Change the ‚ÄúLog Out‚Äù link and its parent div from    &lt;div class=\"right\"&gt;  &lt;p&gt; Hi, my user id is &lt;%= session[:user_id] %&gt; &lt;/p&gt;  &lt;%= link_to \"Log Out\", session_path, method: :delete %&gt;&lt;/div&gt;        to    &lt;div class=\"right\"&gt;  &lt;% if session[:user_id].present? %&gt;    &lt;%= link_to \"Log Out\", session_path, method: :delete %&gt;  &lt;% else %&gt;    I'm not logged in  &lt;% end %&gt;&lt;/div&gt;        If a user_id is set in the session, we‚Äôll show the ‚ÄúLog Out‚Äù link. Otherwise, we‚Äôll just show ‚ÄúI‚Äôm not logged in‚Äù.        Save your changes and revisit http://localhost:3000. Log out and you should no longer see the ‚ÄúLog Out‚Äù link.  1234567891011121314151617181920212223242526272829303132333435363738394041  &lt;!DOCTYPE html&gt;  &lt;html&gt;    &lt;head&gt;      &lt;title&gt;Bookstore&lt;/title&gt;      &lt;%= csrf_meta_tags %&gt;      &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;      &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;    &lt;/head&gt;    &lt;body&gt;      &lt;div class=\"navigation\"&gt;        &lt;div class=\"left\"&gt;        &lt;/div&gt;        &lt;div class=\"center\"&gt;          &lt;%= link_to \"My Super Rad Bookstore\", root_path %&gt;        &lt;/div&gt;        &lt;div class=\"right\"&gt;          &lt;% if session[:user_id].present? %&gt;            &lt;%= link_to \"Log Out\", session_path, method: :delete %&gt;          &lt;% else %&gt;            I'm not logged in          &lt;% end %&gt;        &lt;/div&gt;      &lt;/div&gt;      &lt;% if flash[:notice] %&gt;        &lt;p class=\"notice\"&gt; &lt;%= flash[:notice] %&gt; &lt;/p&gt;      &lt;% end %&gt;      &lt;% if flash[:alert] %&gt;        &lt;p class=\"alert\"&gt; &lt;%= flash[:alert] %&gt; &lt;/p&gt;      &lt;% end %&gt;      &lt;div class=\"container\"&gt;        &lt;%= yield %&gt;      &lt;/div&gt;    &lt;/body&gt;  &lt;/html&gt;Progress!Now that we aren‚Äôt showing the ‚ÄúLog Out‚Äù link to logged out users, let‚Äôs show them a ‚ÄúLogin‚Äù link instead.      In app/views/layouts/application.html.erb, replace ‚ÄúI‚Äôm not logged in‚Äù with a link labeled ‚ÄúLogin‚Äù. The link should go to the new_session path.    Use the other links in the template as examples.        What does your link look like? It should look something like this:    &lt;%= link_to \"Log In\", new_session_path %&gt;            If you didn‚Äôt already, add the ‚ÄúLog In‚Äù link. Save your changes, revist http://localhost:3000, and try logging in!  1234567891011121314151617181920212223242526272829303132333435363738394041  &lt;!DOCTYPE html&gt;  &lt;html&gt;    &lt;head&gt;      &lt;title&gt;Bookstore&lt;/title&gt;      &lt;%= csrf_meta_tags %&gt;      &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;      &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;    &lt;/head&gt;    &lt;body&gt;      &lt;div class=\"navigation\"&gt;        &lt;div class=\"left\"&gt;        &lt;/div&gt;        &lt;div class=\"center\"&gt;          &lt;%= link_to \"My Super Rad Bookstore\", root_path %&gt;        &lt;/div&gt;        &lt;div class=\"right\"&gt;          &lt;% if session[:user_id].present? %&gt;            &lt;%= link_to \"Log Out\", session_path, method: :delete %&gt;          &lt;% else %&gt;            &lt;%= link_to \"Log In\", new_session_path %&gt;          &lt;% end %&gt;        &lt;/div&gt;      &lt;/div&gt;      &lt;% if flash[:notice] %&gt;        &lt;p class=\"notice\"&gt; &lt;%= flash[:notice] %&gt; &lt;/p&gt;      &lt;% end %&gt;      &lt;% if flash[:alert] %&gt;        &lt;p class=\"alert\"&gt; &lt;%= flash[:alert] %&gt; &lt;/p&gt;      &lt;% end %&gt;      &lt;div class=\"container\"&gt;        &lt;%= yield %&gt;      &lt;/div&gt;    &lt;/body&gt;  &lt;/html&gt;If you‚Äôre anything like me, you probably tried to log out just as soon as you logged in so you could see the link change back and forth.But if you‚Äôre not like me, give it a try! You‚Äôve got to appreciate the small things in life üòùYou might also notice that the ‚ÄúLog Out‚Äù/‚ÄùLogin‚Äù links are on every page of your bookstore.app/views/layouts/application.html.erb is the main layout file of your application, and it‚Äôs used by every template in your bookstore. Since we added the links to this layout, they will get rendered on every page.Now that we have logged in and logged out users, can you think of things logged out users shouldn‚Äôt be able to do?I can think of one - logged out users shouldn‚Äôt be able to add books. This is your super rad bookstore after all. You don‚Äôt want some random person to come along and start adding books to your bookstore.      Open app/views/books/index.html.erb and find the ‚ÄúAdd a book‚Äù link.    Take some time and try updating the template so the ‚ÄúAdd a book‚Äù link is only visible to logged in users. Logged out users shouldn‚Äôt see anything.        What does your solution look like? It should look a lot like the code you used to show the ‚ÄúLog Out‚Äù link.    &lt;% if session[:user_id].present? %&gt;  &lt;%= link_to(\"Add a book\", new_book_path, class: \"button\") %&gt;&lt;% end %&gt;        The difference here is we don‚Äôt have an else statement. Before, we wanted to show a ‚ÄúLogin‚Äù link to logged out users.    &lt;% if session[:user_id].present? %&gt;  &lt;%= link_to \"Log Out\", session_path, method: :delete %&gt;&lt;% else %&gt;  &lt;%= link_to \"Log In\", new_session_path %&gt;&lt;% end %&gt;        Now, we don‚Äôt want to show anything to logged out users. Therefore, we don‚Äôt need the else statement.        Update your solution to match this solution and save your changes.        Go to http://localhost:3000, and switch between being logged in and logged out.    When you log out, the ‚ÄúAdd a book‚Äù link will disappear‚Ä¶      12345678910111213  &lt;h1&gt;Welcome to My Super Rad Bookstore!&lt;/h1&gt;  &lt;ul&gt;    &lt;% @books.each do |book| %&gt;      &lt;li&gt;        &lt;%= link_to(book.title, book_path(book)) %&gt; by &lt;%= book.author %&gt;      &lt;/li&gt;    &lt;% end %&gt;  &lt;/ul&gt;  &lt;% if session[:user_id].present? %&gt;    &lt;%= link_to(\"Add a book\", new_book_path, class: \"button\") %&gt;  &lt;% end %&gt;Can you think of other things logged out users shouldn‚Äôt be able to do?Right now, if you go to a book‚Äôs page, anyone can edit, review, or delete a book. I wouldn‚Äôt want to give such broad powers to anyone in my super rad bookstore, and you shouldn‚Äôt either!      Open app/views/books/show.html.erb. At the end of the template, you have links to edit a book and add a review. You also have a button to delete a book.    &lt;%= link_to(\"Edit book\", edit_book_path(@book), class: \"button\") %&gt;&lt;%= link_to(\"Add a Review\", new_book_review_path(@book), class: \"button\") %&gt;&lt;%= button_to(\"Delete Book\", book_path(@book), method: :delete, class: \"button danger\") %&gt;        Update the template so the links and button are only available to logged in users.        What did you come up with? Maybe you did something like this:    &lt;% if session[:user_id].present? %&gt;  &lt;%= link_to(\"Edit book\", edit_book_path(@book), class: \"button\") %&gt;&lt;% end %&gt;&lt;% if session[:user_id].present? %&gt;  &lt;%= link_to(\"Add a Review\", new_book_review_path(@book), class: \"button\") %&gt;&lt;% end %&gt;&lt;% if session[:user_id].present? %&gt;  &lt;%= button_to(\"Delete Book\", book_path(@book), method: :delete, class: \"button danger\") %&gt;&lt;% end %&gt;        This works really well, but doesn‚Äôt it feel a little repetitive? We‚Äôre using the same condition for all three elements to decide if they should be rendered or not.    You can simplify things a bit with something like this:    &lt;% if session[:user_id].present? %&gt;  &lt;%= link_to(\"Edit book\", edit_book_path(@book), class: \"button\") %&gt;  &lt;%= link_to(\"Add a Review\", new_book_review_path(@book), class: \"button\") %&gt;  &lt;%= button_to(\"Delete Book\", book_path(@book), method: :delete, class: \"button danger\") %&gt;&lt;% end %&gt;            If you don‚Äôt have a similar solution, update your solution to match the last solution.        Save your changes and check out the book details page as a logged in and logged out user.  123456789101112131415161718192021222324252627282930313233  &lt;dl&gt;    &lt;dt&gt;Id&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.id %&gt;&lt;/dd&gt;    &lt;dt&gt;Title&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.title %&gt;&lt;/dd&gt;    &lt;dt&gt;Author&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.author %&gt;&lt;/dd&gt;    &lt;dt&gt;Price&lt;/dt&gt;    &lt;dd&gt;&lt;%= number_to_currency(@book.price_cents / 100.0) %&gt;&lt;/dd&gt;    &lt;dt&gt;Quantity&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.quantity %&gt;&lt;/dd&gt;    &lt;dt&gt;Description&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.description %&gt;&lt;/dd&gt;  &lt;/dl&gt;  &lt;p&gt; Number of reviews: &lt;%= @book.reviews.count %&gt; &lt;/p&gt;  &lt;ul&gt;    &lt;% @book.reviews.each do |review| %&gt;      &lt;li&gt; &lt;%= review.body %&gt; &lt;/li&gt;    &lt;% end %&gt;  &lt;/ul&gt;  &lt;% if session[:user_id].present? %&gt;    &lt;%= link_to(\"Edit book\", edit_book_path(@book), class: \"button\") %&gt;    &lt;%= link_to(\"Add a Review\", new_book_review_path(@book), class: \"button\") %&gt;    &lt;%= button_to(\"Delete Book\", book_path(@book), method: :delete, class: \"button danger\") %&gt;  &lt;% end %&gt;Alright, I think we‚Äôve hidden everything we need to hide from logged out users. Your bookstore is super secure now, right?!      Make sure you‚Äôre logged out and try going to http://localhost:3000/books/new.    Anyone can add books!        We made it more difficult for logged out users to mess with your bookstore, but that won‚Äôt stop them if they can figure out the paths to go to.    We can stop mischievous users from snooping around by checking for logged out users in your controllers.  Let‚Äôs start by looking at the BooksController new method.The session is available to us in all of our controllers. Let‚Äôs use it to check if a user is logged in. If they‚Äôre logged in, we can do what we‚Äôve always been doing. Otherwise, let‚Äôs redirect the user to the login page.      Open app/controllers/books_controller.rb. Change the new method from    def new  @book = Book.newend        to    def new  if session[:user_id].blank?    flash[:alert] = \"Please login to continue\"    redirect_to new_session_path  else    @book = Book.new  endend        If a user is logged in, their user id will be in the session. If their user id is not in the session, we‚Äôll add a flash message and send them to the new_session_path. Otherwise, we‚Äôll continue with the method‚Äôs previous behavior.        Save your changes and revist http://localhost:3000/books/new. You should now be redirected to the login page.  1234567891011121314151617181920212223242526272829303132333435363738394041424344  class BooksController &lt; ApplicationController    def index      @books = Book.all    end    def show      @id = params[:id]      @book = Book.find(@id)    end    def new      if session[:user_id].blank?        flash[:alert] = \"Please login to continue\"        redirect_to new_session_path      else        @book = Book.new      end    end    def create      Book.create(book_params)      redirect_to books_path    end    def edit      @book = Book.find(params[:id])    end    def update      book = Book.find(params[:id])      book.update(book_params)      redirect_to book_path(book)    end    def book_params      params.require(:book).permit(:title, :author, :price_cents, :quantity, :description)    end    def destroy      book = Book.find(params[:id])      book.destroy      redirect_to books_path    end  endAdding More Restrictions to the BooksControllerNow that we have this check in place, we should probably add them to a few more of the BooksController methods.index and show should be available to all users, but logged out users shouldn‚Äôt have access to create, edit, update, or destroy.One solution to this problem would be to copy the check we added to the new method to the rest of the methods we want to secure. This would work, but copying code is suprisingly time consuming. Fortunately, Rails has a method that will help us out.      Open the BooksController. Just after the beginning of the controller, add the following line:    before_action :verify_user_session        Before every method in the BooksController, Rails will first call verify_user_session.        If you try to go to http://localhost:3000/books/new now, you‚Äôll get an error. Can you guess why?    We haven‚Äôt defined a verify_user_session method!        At the end of the BooksController, add the verify_user_session method:    def verify_user_session  if session[:user_id].blank?    flash[:alert] = \"Please login to continue\"    redirect_to new_session_path  endend        This should look very familiar. It‚Äôs the same logic you used in the new method!    def new  if session[:user_id].blank?    flash[:alert] = \"Please login to continue\"    redirect_to new_session_path  else    @book = Book.new  endend        Since you‚Äôre doing the check in verify_user_session, you don‚Äôt need it in the new method anymore. Remove the check so the new method is back to its old self.    def new  @book = Book.newend            Save your changes and revisit http://localhost:3000/books/new. You should still be redirected to the login page.    Try visiting another page like the edit book page. For example, if you still have your first book you can go to http://localhost:3000/books/1/edit. Once again, you should be redirected to the login page.  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748  class BooksController &lt; ApplicationController    before_action :verify_user_session    def index      @books = Book.all    end    def show      @id = params[:id]      @book = Book.find(@id)    end    def new      @book = Book.new    end    def create      Book.create(book_params)      redirect_to books_path    end    def edit      @book = Book.find(params[:id])    end    def update      book = Book.find(params[:id])      book.update(book_params)      redirect_to book_path(book)    end    def book_params      params.require(:book).permit(:title, :author, :price_cents, :quantity, :description)    end    def destroy      book = Book.find(params[:id])      book.destroy      redirect_to books_path    end    def verify_user_session      if session[:user_id].blank?        flash[:alert] = \"Please login to continue\"        redirect_to new_session_path      end    end  end      Now that we have all this security in place, log out and visit http://localhost:3000.        We made the BooksController a little too secure üòÖ    Remember, logged out users should still be able to access the BooksController index and show methods.        Open the BooksController. After the before_action, add the following line:    skip_before_action :verify_user_session, only: [:index, :show]        This tells Rails to skip the before_action that calls verify_user_session for the index and show methods.        Save your changes and revisit http://localhost:3000.    Now that you‚Äôre back in, try going directly to a book‚Äôs detail page. For example, you could go to http://localhost:3000/books/1.        Try visiting different paths directly as logged in and logged out users. The book index and details page should be available to both, but only logged in users can reach things like the edit book page.  12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849  class BooksController &lt; ApplicationController    before_action :verify_user_session    skip_before_action :verify_user_session, only: [:index, :show]    def index      @books = Book.all    end    def show      @id = params[:id]      @book = Book.find(@id)    end    def new      @book = Book.new    end    def create      Book.create(book_params)      redirect_to books_path    end    def edit      @book = Book.find(params[:id])    end    def update      book = Book.find(params[:id])      book.update(book_params)      redirect_to book_path(book)    end    def book_params      params.require(:book).permit(:title, :author, :price_cents, :quantity, :description)    end    def destroy      book = Book.find(params[:id])      book.destroy      redirect_to books_path    end    def verify_user_session      if session[:user_id].blank?        flash[:alert] = \"Please login to continue\"        redirect_to new_session_path      end    end  endNow that we have the BooksController locked down, let‚Äôs add the same checks to the ReviewsController.      Open the ReviewsController (app/controllers/reviews_controller.rb).        Using the BooksController as an example, add a before_action to the ReviewsController that calls verify_user_session before each of the controller‚Äôs methods.    verify_user_session should redirect logged out users to the new_session path so they can login.        How did you change the ReviewsController. The before_action line should‚Äôve been a spitting image of the before_action line from the BooksController.    before_action :verify_user_session        What about the verify_user_session method? It should also be a spitting image üòä    def verify_user_session  if session[:user_id].blank?    flash[:alert] = \"Please login to continue\"    redirect_to new_session_path  endend            If you didn‚Äôt already, add the before_action and the verify_user_session method to the ReviewsController.        Save your changes and trying visting a new review page as both a logged out and logged in user. For example, you would add a new review for your first book by visiting http://localhost:3000/books/1/reviews/new.        When you‚Äôre done exploring all your changes, stop your application‚Äôs web server.  12345678910111213141516171819202122232425  class ReviewsController &lt; ApplicationController    before_action :verify_user_session    def new      @book = Book.find(params[:book_id])      @review = @book.reviews.build    end    def create      book = Book.find(params[:book_id])      book.reviews.create(review_params)      redirect_to book_path(book)    end    def review_params      params.require(:review).permit(:body)    end    def verify_user_session      if session[:user_id].blank?        flash[:alert] = \"Please login to continue\"        redirect_to new_session_path      end    end  end",
        "url": "/rails_tutorial/tutorial/chapter_14/"
      }
      ,
    
      "tutorial-chapter-15": {
        "title": "Associating Reviews with Users",
        "content": "Associating Reviews with UsersNow that you can keep track of logged in users, you can keep track of their actions. A great example where this could be useful is with your reviews. Wouldn‚Äôt it be nice to know which users are leaving which reviews?Has Many RelationshipsTo track which users are leaving which reviews, we need to establish a relationship between users and reviews.A user can leave many reviews, and a review can only be written by one user. Does this sound familiar?You‚Äôve already defined a similar relaltionship between books and reviews.class Book &lt; ApplicationRecord  has_many :reviewsendclass Review &lt; ApplicationRecord  belongs_to :bookendA book has many reviews, and a review belongs to a book.      Open the User class (app/models/user.rb) in your text editor.    Using the Book class as an example, update User so a user has many reviews.        What do your changes look like? You should have added the following line to User:    has_many :reviews            If you didn‚Äôt already, make this change to User.        Save your changes.  12345  class User &lt; ApplicationRecord    has_secure_password    has_many :reviews  endNow that we‚Äôve defined a relationship between users and reviews, let‚Äôs see what we can do with it on the rails console.      Open Terminal, make sure you‚Äôre in the bookstore directory, and start the rails console.        Find your first user and assign it to a variable called my_first_user.        Now, try running my_first_user.reviews.    Yikes! That looks like a gnarly error‚Ä¶ üòÖ    The ActiveRecord::StatementInvalid error is giving you hint to what‚Äôs going on. Burried inside the error, you have this message:    no such column: reviews.user_id        We‚Äôve defined the relationship between users and reviews on the model level, but we haven‚Äôt defined it on the database level.    Since we said a user can have many reviews, Rails is expecting the reviews table to have a user_id column. Let‚Äôs add it!        Before you continue, exit the rails console.    $ pwd  /Users/awesomesauce/Projects/bookstore  $ rails console  Loading development environment (Rails 5.0.0.1)  &gt;&gt; my_first_user = User.first    User Load (0.2ms)  SELECT  \"users\".* FROM \"users\" ORDER BY \"users\".\"id\" ASC LIMIT ?  [[\"LIMIT\", 1]]  =&gt; #&lt;User id: 1, username: \"CatPower\", password_digest: \"$2a$10$T9KFCyIrtgFhBtEixMYm9e757ZXa7UlBVOyaAzCtbwt...\", created_at: \"2017-01-13 02:57:39\", updated_at: \"2017-01-13 02:57:39\"&gt;  &gt;&gt; my_first_user.reviews    Review Load (0.3ms)  SELECT \"reviews\".* FROM \"reviews\" WHERE \"reviews\".\"user_id\" = ?  [[\"user_id\", 1]]  ActiveRecord::StatementInvalid: SQLite3::SQLException: no such column: reviews.user_id: SELECT \"reviews\".* FROM \"reviews\" WHERE \"reviews\".\"user_id\" = ?  ...  &gt;&gt; exitTo add a user_id column to the reviews table, we‚Äôll need to create a new migration.      In Terminal, run the following command:    rails generate migration add_user_id_to_reviews        This will generate a new timestamped migration file named AddUserIdtoReviews. It‚Äôs filename will be something along the lines of db/migrate/TIMESTAMP_add_user_id_to_reviews.rb    $ rails generate migration add_user_id_to_reviews        invoke  active_record        create    db/migrate/20170124223830_add_user_id_to_reviews.rb      The AddUserIdtoReviews migration will be very similiar to another migration you‚Äôve created. Can you think of which one?    AddUserIdtoReviews is gonna look a lot like AddBookIdToReviews.    class AddBookIdToReviews &lt; ActiveRecord::Migration[5.0]  def change    add_column :reviews, :book_id, :integer  endend        You added a book_id column to the reviews table because you wanted to define the relationship between books and reviews on the database level. Remember, a book can have many reviews.    We want to do the same thing in AddUserIdtoReviews, except we‚Äôre adding a user_id to reviews.        Using this as an example, update the change method of the AddUserIdtoReviews migration to add a user_id column to the reviews table. The user_id column should be an integer column.    class AddUserIdToReviews &lt; ActiveRecord::Migration[5.0]    def change    end  end      What does your change look like? You should‚Äôve added the following line to the change method:    add_column :reviews, :user_id, :integer            If you didn‚Äôt already, add this line, save your changes, and run the migration.    class AddUserIdToReviews &lt; ActiveRecord::Migration[5.0]    def change      add_column :reviews, :user_id, :integer    end  endNow that we‚Äôve defined the relationship between users and reviews on both the model and the database levels, we can go back to exploring the relationship on the rails console.      Go to Terminal and start the rails console.        Assign your first user to a variable called my_first_user.        Now, try running my_first_user.reviews.    You get an empty collection because my_first_user doesn‚Äôt have any reviews. Let‚Äôs change that!    $ rails console  Loading development environment (Rails 5.0.0.1)  &gt;&gt; my_first_user = User.first    User Load (0.2ms)  SELECT  \"users\".* FROM \"users\" ORDER BY \"users\".\"id\" ASC LIMIT ?  [[\"LIMIT\", 1]]  =&gt; #&lt;User id: 1, username: \"CatPower\", password_digest: \"$2a$10$T9KFCyIrtgFhBtEixMYm9e757ZXa7UlBVOyaAzCtbwt...\", created_at: \"2017-01-13 02:57:39\", updated_at: \"2017-01-13 02:57:39\"&gt;  &gt;&gt; my_first_user.reviews    Review Load (0.1ms)  SELECT \"reviews\".* FROM \"reviews\" WHERE \"reviews\".\"user_id\" = ?  [[\"user_id\", 1]]  =&gt; #&lt;ActiveRecord::Associations::CollectionProxy []&gt;      Assign your first book to a variable called my_first_book.        Now, run the following code to create a new review for my_first_book that will also be associated with my_first_user.    my_first_book.reviews.create(body: \"This review was written by a user!\", user_id: my_first_user.id)        On the new review, we‚Äôre setting a body and a user_id.    By setting the user_id to my_first_user‚Äôs id, we‚Äôll know that the review belongs to my_first_user.    &gt;&gt; my_first_book = Book.first    Book Load (0.3ms)  SELECT  \"books\".* FROM \"books\" ORDER BY \"books\".\"id\" ASC LIMIT ?  [[\"LIMIT\", 1]]  =&gt; #&lt;Book id: 1, title: \"why's (poignant) Guide to Ruby\", author: \"why the lucky stiff\", price_cents: 100, created_at: \"2016-12-26 15:51:15\", updated_at: \"2016-12-30 20:29:14\", quantity: 500, description: \"Chunky Bacon!\"&gt;  &gt;&gt; my_first_book.reviews.create(body: \"This review was written by a user!\", user_id: my_first_user.id)     (0.1ms)  begin transaction    SQL (1.4ms)  INSERT INTO \"reviews\" (\"body\", \"created_at\", \"updated_at\", \"book_id\", \"user_id\") VALUES (?, ?, ?, ?, ?)  [[\"body\", \"This review was written by a user!\"], [\"created_at\", 2017-01-25 00:46:42 UTC], [\"updated_at\", 2017-01-25 00:46:42 UTC], [\"book_id\", 1], [\"user_id\", 1]]     (1.4ms)  commit transaction  =&gt; #&lt;Review id: 8, body: \"This review was written by a user!\", created_at: \"2017-01-25 00:46:42\", updated_at: \"2017-01-25 00:46:42\", book_id: 1, user_id: 1&gt;      Now that my_first_user has a review, try running my_first_user.reviews again.    I thought my_first_user would have reviews üòî    But my_first_user does have reviews!        Do you remember when you assigned the first user in your database to my_first_user?    my_first_user = User.first        It‚Äôs been a while - it was the first thing you did when you entered the rails console.    my_first_user is a variable, and it only knows about the data that existed when it was defined. Even though your first user now has a review in the database, the variable my_first_user doesn‚Äôt know anything about it.        To update my_first_user with the new review data, run:    my_first_user.reload            Now, try running my_first_user.reviews.    üéâ    &gt;&gt; my_first_user.reviews  =&gt; #&lt;ActiveRecord::Associations::CollectionProxy []&gt;  &gt;&gt; my_first_user.reload    User Load (0.4ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT ?  [[\"id\", 1], [\"LIMIT\", 1]]  =&gt; #&lt;User id: 1, username: \"CatPower\", password_digest: \"$2a$10$T9KFCyIrtgFhBtEixMYm9e757ZXa7UlBVOyaAzCtbwt...\", created_at: \"2017-01-13 02:57:39\", updated_at: \"2017-01-13 02:57:39\"&gt;  &gt;&gt; my_first_user.reviews    Review Load (0.2ms)  SELECT \"reviews\".* FROM \"reviews\" WHERE \"reviews\".\"user_id\" = ?  [[\"user_id\", 1]]  =&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Review id: 8, body: \"This review was written by a user!\", created_at: \"2017-01-25 00:46:42\", updated_at: \"2017-01-25 00:48:55\", book_id: 1, user_id: 1&gt;]&gt;Let‚Äôs take a closer look at that new review.      Run the following code to assign the new review to a variable called my_last_review:    my_last_review = Review.last            my_last_review should have a user_id. Try running my_last_review.user_id.    This will return the user_id of the user who‚Äôs associated to my_last_review. Since we set it to my_first_user‚Äôs id, it will most likely be 1.        Now, let‚Äôs try to get the user from the review. Try running my_last_review.user.    Hmm‚Ä¶that‚Äôs an interesting error. Any thoughts on why you got a NoMethodError.    (The hint is in the error)    You got a NoMethodError because we haven‚Äôt completely defined the relationship between users and reviews. You defined part of the relationship - a user has many reviews. However, you haven‚Äôt defined the relationship between reviews and users.    &gt;&gt; my_last_review = Review.last    Review Load (0.2ms)  SELECT  \"reviews\".* FROM \"reviews\" ORDER BY \"reviews\".\"id\" DESC LIMIT ?  [[\"LIMIT\", 1]]  =&gt; #&lt;Review id: 8, body: \"This review was written by a user!\", created_at: \"2017-01-25 00:46:42\", updated_at: \"2017-01-25 00:48:55\", book_id: 1, user_id: 1&gt;  &gt;&gt; my_last_review.user_id  =&gt; 1  &gt;&gt; my_last_review.user  NoMethodError: undefined method `user' for #&lt;Review:0x007fce9e4a5b90&gt;  Did you mean?  user_id  ...We need to define the relationship between reviews and users - a review belongs to a user.      Open app/models/reviews.rb. You might notice another relationship we already defined üòâ    Since a review also belongs to a book, you previously added this line:    belongs_to :book        Now, we need to do the same thing for users.        Update Review so a review belongs_to a user.  123  class Review &lt; ApplicationRecord    belongs_to :book  endThat probably sounded more challenging than it was üòÖ      You should‚Äôve added this line    belongs_to :user            If you didn‚Äôt already, add this line to Review and save your changes.  1234  class Review &lt; ApplicationRecord    belongs_to :book    belongs_to :user  endNow, let‚Äôs see if we can‚Äôt get your last review‚Äôs user.      Go back to the rails console and run the following line to pull in your changes.    reload!            Get your last review again and assign it to my_last_review.        Now, try running my_last_review.user.        Yayay!!!            Exit the rails console.    &gt;&gt; reload!  Reloading...  =&gt; true  &gt;&gt; my_last_review = Review.last    Review Load (0.1ms)  SELECT  \"reviews\".* FROM \"reviews\" ORDER BY \"reviews\".\"id\" DESC LIMIT ?  [[\"LIMIT\", 1]]  =&gt; #&lt;Review id: 8, body: \"This review was written by a user!\", created_at: \"2017-01-25 00:46:42\", updated_at: \"2017-01-25 00:48:55\", book_id: 1, user_id: 1&gt;  &gt;&gt; my_last_review.user    User Load (0.2ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT ?  [[\"id\", 1], [\"LIMIT\", 1]]  =&gt; #&lt;User id: 1, username: \"CatPower\", password_digest: \"$2a$10$T9KFCyIrtgFhBtEixMYm9e757ZXa7UlBVOyaAzCtbwt...\", created_at: \"2017-01-13 02:57:39\", updated_at: \"2017-01-13 02:57:39\"&gt;  &gt;&gt; exitNow that we have a way to assign reviews to their users, let‚Äôs update your bookstore so we always know who‚Äôs leaving reviews.How Do Users Leave Reviews Again?Remember, we can assign a review to a user by setting the user_id on the review. But do you remember how users create reviews?Users create reviews by submitting forms to the ReviewsController create method. Let‚Äôs take a look at it.In your text editor, open the ReviewsController (app/controllers/reviews_controller.rb) and find the create method.def create  book = Book.find(params[:book_id])  book.reviews.create(review_params)  redirect_to book_path(book)endIt‚Äôs been a while since you added this method, so let‚Äôs do a quick review.In the create method, you start by finding the book that‚Äôs being reviewed.book = Book.find(params[:book_id])Then, you create a new review for it using review_params.book.reviews.create(review_params)review_params is a method that defines which of the form‚Äôs fields can be set on the new review.def review_params  params.require(:review).permit(:body)endUsing strong parameters, you set up the review_params method so the form must submit a review hash. The only field you‚Äôre permitting in that hash is the body field.Now, we need to update review_params so we can also set user_id.But how do we know what the user_id should be?Only logged in users can create new reviews, and we know which user is logged in because their user id is saved in the session as user_id.We‚Äôll have to change the review_params method so it lets us set user_id to the user_id saved in the session‚Ä¶      In the ReviewsController, change the review_params method from    def review_params  params.require(:review).permit(:body)end        to    def review_params  permitted_params = params.require(:review).permit(:body)  permitted_params.merge(user_id: session[:user_id])end        We‚Äôre still using strong parameters to restrict which form fields can get set on a new review, but we‚Äôll assign them to a new variable called permitted_params.    Then, we‚Äôll use the merge method to add user_id to permitted_params.    user_id will be set to session[:user_id].        Save your changes and start your application‚Äôs web server.        Now, login and write a new book review!  1234567891011121314151617181920212223242526  class ReviewsController &lt; ApplicationController    before_action :verify_user_session    def new      @book = Book.find(params[:book_id])      @review = @book.reviews.build    end    def create      book = Book.find(params[:book_id])      book.reviews.create(review_params)      redirect_to book_path(book)    end    def review_params      permitted_params = params.require(:review).permit(:body)      permitted_params.merge(user_id: session[:user_id])    end    def verify_user_session      if session[:user_id].blank?        flash[:alert] = \"Please login to continue\"        redirect_to new_session_path      end    end  end      Did you write a really inspiring review?? üòâ    Let‚Äôs take a look at it on the rails console.        Stop your application‚Äôs web server and start the rails console.        Now, get your last review and assign it to a variable called my_last_review.        Let‚Äôs see who write your last review‚Ä¶    Run my_last_review.user.    Yay! I hope ‚ÄúCatPower‚Äù left a good review üòù        Exit the rails console and restart your application‚Äôs web server.    &gt;&gt; my_last_review = Review.last    Review Load (0.2ms)  SELECT  \"reviews\".* FROM \"reviews\" ORDER BY \"reviews\".\"id\" DESC LIMIT ?  [[\"LIMIT\", 1]]  =&gt; #&lt;Review id: 9, body: \"New review, who this?\", created_at: \"2017-01-26 23:19:29\", updated_at: \"2017-01-26 23:19:29\", book_id: 1, user_id: 1&gt;  &gt;&gt; my_last_review.user    User Load (0.2ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT ?  [[\"id\", 1], [\"LIMIT\", 1]]  =&gt; #&lt;User id: 1, username: \"CatPower\", password_digest: \"$2a$10$T9KFCyIrtgFhBtEixMYm9e757ZXa7UlBVOyaAzCtbwt...\", created_at: \"2017-01-13 02:57:39\", updated_at: \"2017-01-13 02:57:39\"&gt;  &gt;&gt; exitNow that we know who‚Äôs leaving reviews, let‚Äôs share that information with your bookstore‚Äôs visitors.      Do you remember where reviews are shown?    In your text editor, open app/views/books/show.html.erb.        Towards the end of the template, you‚Äôre showing all of a books reviews in an unordered list. Let‚Äôs include review usernames in the unordered list.    Change the reviews unordered list from    &lt;ul&gt;  &lt;% @book.reviews.each do |review| %&gt;    &lt;li&gt; &lt;%= review.body %&gt; &lt;/li&gt;  &lt;% end %&gt;&lt;/ul&gt;        to    &lt;ul&gt;  &lt;% @book.reviews.each do |review| %&gt;    &lt;% if(review.user.present?) %&gt;      &lt;li&gt; &lt;%= review.user.username %&gt; - &lt;%= review.body %&gt; &lt;/li&gt;    &lt;% else %&gt;      &lt;li&gt; Anonymous - &lt;%= review.body %&gt; &lt;/li&gt;    &lt;% end %&gt;  &lt;% end %&gt;&lt;/ul&gt;        We‚Äôll show the usernames for reviews who have users. However, you probably have some older reviews in your database that don‚Äôt have users. When that happens, we‚Äôll show ‚ÄúAnonymous‚Äù instead.        Save your changes and visit a book with reviews. You should see a mix of anonymous and not so anonymous users that have left behind some reviews üòä        Try adding new reviews. If you‚Äôre still logged in as ‚ÄúCatPower‚Äù, she‚Äôll start getting a lot of reviews in her name‚Ä¶        When you‚Äôre done, stop your application‚Äôs web server.  12345678910111213141516171819202122232425262728293031323334353637  &lt;dl&gt;    &lt;dt&gt;Id&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.id %&gt;&lt;/dd&gt;    &lt;dt&gt;Title&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.title %&gt;&lt;/dd&gt;    &lt;dt&gt;Author&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.author %&gt;&lt;/dd&gt;    &lt;dt&gt;Price&lt;/dt&gt;    &lt;dd&gt;&lt;%= number_to_currency(@book.price_cents / 100.0) %&gt;&lt;/dd&gt;    &lt;dt&gt;Quantity&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.quantity %&gt;&lt;/dd&gt;    &lt;dt&gt;Description&lt;/dt&gt;    &lt;dd&gt;&lt;%= @book.description %&gt;&lt;/dd&gt;  &lt;/dl&gt;  &lt;p&gt; Number of reviews: &lt;%= @book.reviews.count %&gt; &lt;/p&gt;  &lt;ul&gt;    &lt;% @book.reviews.each do |review| %&gt;      &lt;% if(review.user.present?) %&gt;        &lt;li&gt; &lt;%= review.user.username %&gt; - &lt;%= review.body %&gt; &lt;/li&gt;      &lt;% else %&gt;        &lt;li&gt; Anonymous - &lt;%= review.body %&gt; &lt;/li&gt;      &lt;% end %&gt;    &lt;% end %&gt;  &lt;/ul&gt;  &lt;% if session[:user_id].present? %&gt;    &lt;%= link_to(\"Edit book\", edit_book_path(@book), class: \"button\") %&gt;    &lt;%= link_to(\"Add a Review\", new_book_review_path(@book), class: \"button\") %&gt;    &lt;%= button_to(\"Delete Book\", book_path(@book), method: :delete, class: \"button danger\") %&gt;  &lt;% end %&gt;",
        "url": "/rails_tutorial/tutorial/chapter_15/"
      }
      ,
    
      "tutorial-chapter-16": {
        "title": "The End!",
        "content": "The End!You‚Äôve made it to the end of the tutorial!You‚Äôve added so many features to your bookstore, but there‚Äôs so much more you can do!Here are a few of ideas for features you could add to your bookstore.      Give users the ability to edit their reviews.        Let users delete their reviews.        Show when reviews were created or last edited.        Show a listing of reviews by a given user.        Add images to books. You‚Äôre not supposed to judge a book by it‚Äôs cover‚Ä¶but sometimes it helpful. üòâ    To add images to books, you will need to use a RubyGem like Paperclip.  These are just a few ideas. Feel free to be creative and come up with your own features. This is your bookstore - I can‚Äôt tell you what to do‚Ä¶anymore.Don‚Äôt go off into the big, wide world of programming on your own. Even the most seasoned programmer needs a helping hand every once in a  while.      Join B‚Äômore on Rails.    B‚Äômore on Rails is a community of folks in and around Baltimore who happen to like Rails. üòä    We have Meetups three times a month (if it‚Äôs a Tuesday, there‚Äôs probably a Meetup üòù)    Come to the Meetups to get to know other people who are also into Rails. You might meet people like yourself who are just getting started, or you might meet someone who has been working with Rails for a while. We have a pretty good mix of backgrounds and experiences.        Join B‚Äômore on Rails on Slack.    If you haven‚Äôt heard of Slack, it‚Äôs kinda like a big group text but bigger.        Slack is a casual place to hangout and chat. It‚Äôs also a great place to ask questions. üòä  There are a ton of resources available online for anyone who‚Äôs looking to learn Ruby, Rails, or just about programming. Here are few resources we recommend.      Ruby Monk    This is a great series of small and free tutorials for learning more about the Ruby programming languages!        The Ruby on Rails Tutorial by Michael Hartl    This tutorial is a much more in depth guide into developing web applications with Rails.    Note: since you already have Rails installed on your computer, you don‚Äôt need to use Cloud9 for you development environment.        The Odin Project    The Odin Project offers a series of courses around web development. Along with courses on Ruby and Rails, they have courses on HTML, CSS, and JavaScript.  ",
        "url": "/rails_tutorial/tutorial/chapter_16/"
      }
      
    
  };
</script>
<script src="/rails_tutorial/js/lunr.min.js"></script>
<script src="/rails_tutorial/js/search.js"></script>

      <div class="tutorial-button-group">
  
</div>

    </div>
  </div>
<footer>
  <div class="container">
    <a href="http://bmoreonrails.org/">
      <img src="/rails_tutorial/assets/icons/bmore.png">
    </a>

    <a rel="license" href="/rails_tutorial/license" target="_self">
      <img class="icon"
           alt="Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License"
           src="/rails_tutorial/assets/icons/cc-by-nc-sa.svg"
      />
    </a>

    <a href="https://github.com/bmoreonrails/rails_tutorial">
      <img class="icon"
           alt="Rails Tutorial on GitHub"
           src="/rails_tutorial/assets/icons/github.png"
      />
    </a>

    <a href="https://twitter.com/BmorRailsSchool">
      <img class="icon"
           alt="B'more on Rails School on Twitter"
           src="/rails_tutorial/assets/icons/twitter.png"
      />
    </a>
  </div>
</footer>
</body>
</html>


<script>

$('img.screenshot').featherlight({
    targetAttr: 'src'
});

</script>
